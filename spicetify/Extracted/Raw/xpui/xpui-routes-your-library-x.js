"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6457,4844],{57158:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(30758),a=r(95440),n=r(69175),l=r(66686),s=r(12433),o=r(83989),c=r(39733),d=r(86070);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,a.wA)(),p=!(0,o.n)(),g=(0,c.f)(),y=(0,i.useCallback)((async()=>{u((0,l.aw)(e,!0))}),[u,e]);return(0,d.jsx)(s.D,{role:"menuitem",divider:t,disabled:p&&!g?.getCapabilities().canModifyOffline,onClick:y,leadingIcon:(0,d.jsx)(n.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},25489:(e,t,r)=>{r.d(t,{P:()=>x});var i=r(30758),a=r(64721),n=r(99903),l=r(99532),s=r(68455),o=r(19516),c=r(73724),d=r(57158),u=r(95309),p=r(44670),g=r(90561),y=r(24902),m=r(86070);const x=i.memo((function({uri:e,artistUri:t,canPin:r=p.oT.NO,isPinned:i=!1,canRemove:x=!1}){const{spec:h}=(0,g.o)(e);return(0,m.jsx)(u.pZ,{value:"album",children:(0,m.jsxs)(n.W,{children:[x&&(0,m.jsx)(d.p,{uri:e,removeLabel:a.Ru.get("contextmenu.remove-from-library")}),t&&(0,m.jsx)(s.z,{spec:h,divider:"after",uri:t,displayText:a.Ru.get("contextmenu.go-to-artist-radio")}),r!==p.oT.NO&&(0,m.jsx)(c.k,{uri:e,canPin:r,isPinned:i,type:y.c.PRE_RELEASE_ALBUM,spec:h}),(0,m.jsx)(l.m,{uri:e,spec:h,displayText:a.Ru.get("context-menu.copy-album-link")}),(0,m.jsx)(o.q,{spec:h,divider:"before",uri:e})]})})}))},1205:(e,t,r)=>{r.d(t,{z:()=>x});var i=r(30758),a=r(97500),n=r.n(a),l=r(44779),s=r(40748),o=r(41089),c=r(64721);const d="MRzne1iuLfbh7KEwhHOk";var u=r(86070);function p({onClick:e}){return(0,u.jsx)(s.H,{size:"small",onClick:e,iconOnly:o.M,"aria-label":c.Ru.get("close"),className:d})}const g="dixACKl18S755OnSdpna",y="IPdLO850RGC7isV9QxWB",m="S7PfnpeKtq9MCSrMhifz",x=(0,i.forwardRef)((({onClose:e=(()=>{}),children:t,shouldCloseOnEscapePress:r=!0,colorSet:a="encore-announcement-set",maxWidth:s=180,header:o},c)=>((0,i.useEffect)((()=>{const t=t=>{r&&"Escape"===t.key&&e()};return window.addEventListener("keydown",t,!0),()=>{window.removeEventListener("keydown",t,!0)}}),[r,e]),(0,u.jsxs)("div",{ref:c,className:n()(a,g,{[y]:!!o}),style:{maxWidth:`${s}px`},children:[!!o&&(0,u.jsxs)("div",{className:m,children:[o," ",(0,u.jsx)(p,{onClick:e})]}),t,o?null:(0,u.jsx)(p,{onClick:e}),(0,u.jsx)(l.i,{})]}))))},89916:(e,t,r)=>{r.d(t,{$:()=>u});var i=r(30758),a=r(58274),n=r(27054);function l(e,t,r=!0,i=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,n.fk)(e))return;const l=e.querySelector('[tabindex="0"]');t===a.O.UP&&(0,n.MS)(l,s(e,l,a.O.UP,r,i)),t===a.O.DOWN&&(0,n.MS)(l,s(e,l,a.O.DOWN,r,i))}function s(e,t,r,i,l){const s=t.closest('li[role="listitem"]');if(!s)return t;let o=s,c=t;const d=Array.from(e.querySelectorAll('li[role="listitem"]')),u=d.indexOf(s);if(u<0)return t;if(r===a.O.UP){if(document.activeElement===e){if(o=d[d.length-1],l){const e=o?.querySelectorAll(n.nu);c=e[e.length-1]}else c=o?.querySelector(n.nu);return c??t}if(l){const e=Array.from(s.querySelectorAll(n.nu)),r=e.indexOf(t)-1;if(r>=0)return e[r]}let r=u-1;const a=()=>!c&&(!i&&r>=0||i&&u!==r);do{o=d[r];if(i&&!o&&(r=d.length-1,o=d[r]),l){const e=o?.querySelectorAll(n.nu);c=e?e[e.length-1]:null}else c=o?.querySelector(n.nu);r-=1}while(a())}else if(r===a.O.DOWN){if(document.activeElement===e)return o=d[0],c=o?.querySelector(n.nu),c??t;if(l){const e=Array.from(s.querySelectorAll(n.nu)),r=e.indexOf(t)+1;if(r<e.length)return e[r]}let r=u+1;const a=()=>{const e=!i&&r<=d.length;return!c&&(e||i&&u!==r)};do{o=d[r];i&&!o&&(r=0,o=d[r]),c=o?.querySelector(n.nu),r+=1}while(a())}return c||t}var o=r(75867),c=r(69031),d=r(86070);const u=(0,i.forwardRef)((({onKeyDown:e,children:t,circular:r=!0,allowsMultipleInteractiveChildrenInItem:s=!1,...u},p)=>{const g=(0,c.N)(p);(0,o.R)(g);const y=(0,i.useCallback)((t=>{g.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),document.documentElement.classList.remove("no-focus-outline")),"ArrowUp"===t.key&&l(g.current,a.O.UP,r,s),"ArrowDown"===t.key&&l(g.current,a.O.DOWN,r,s),e?.(t))}),[r,s,g,e]),m=(0,i.useCallback)((e=>{if(!g.current)return;const t=e.target,r=g.current.querySelector('[tabindex="0"]');t.closest('li[role="listitem"]')&&t!==r&&(0,n.MS)(r,t,{preventScroll:!0})}),[g]);return(0,d.jsx)("ul",{role:"list",ref:g,onKeyDown:y,onFocus:m,tabIndex:0,...u,children:t})}))},14993:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(68311);const a="k270skPbT7JOaSidSA2a";var n=r(86070);const l=({iconSize:e=64,...t})=>(0,n.jsx)("div",{className:a,children:(0,n.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},94322:(e,t,r)=>{r.d(t,{X:()=>u,A:()=>H});var i=r(30758),a=r(29004),n=r(35282),l=r(64721),s=r(33805),o=r(43452);const c="KsnGjjEeMb2miriJrkjW";var d=r(86070);const u=()=>{const e=l.Ru.getLocaleForTranslation(),t=o.IB[e]??o.IB.en,r=(0,s.ZZ)(),u=(0,i.useCallback)((()=>{r({type:"OPEN"})}),[r]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(a.n,{iconLeading:n.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};var p=r(8143),g=r(95440),y=r(6128),m=r(90410),x=r(75627),h=r(39399),b=r(68629),f=r(24902),S=r(4592),P=r(24449);const v="ZpqHX3kvsJIsR1QIc4kf",C=({children:e,locale:t,onClick:r,type:i="button"})=>{const a=t===b.Xn,n=(0,P.vf)(window.location.pathname),s=(0,x.o_h)(window.location.pathname),o=(0,h.W)({type:"route",uri:n?f.c.HOME:s?.toURI()}),c={className:v,id:t,onClick:e=>(e=>{if("button"===i){e.preventDefault();const t=new URL(window.location.href);window.location.href.includes("locale")&&t.searchParams.delete("locale"),window.location.href=t.href}r(t)})(e),"data-testid":`language-option-${t}`};if("link"===i){const r=(0,S.ll)(window.location.pathname,!a),i=(0,S.hF)(r,(0,l.a7)(t).baseName),n=o?i:window.location.pathname,s=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${window.location.origin}${n}`);return(0,d.jsx)("a",{href:s,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},w="eYLSfS4EKfwsdTsItWkY",I=({style:e,children:t})=>(0,d.jsx)("div",{className:w,style:e,children:t});var T=r(97500),R=r.n(T);const A="KPuW9eE4auKgVgMtPZoH",D="zCedVxWmwaJhPIGzJixP",j="qzuG9AHNXHQrOGF06r9A",L="ZgjCz5A7qOyprtvcLK8y",E="BSwvSvqHiQUVuim4Eidv",O="TpluDuF12UKv3IIq_VDu",k=({onClose:e,children:t})=>{const r=(0,i.useRef)(null),{isOpen:a}=(0,s.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:R()(A,{[D]:a}),onClick:t=>{t.target===r.current&&e()},role:"presentation",ref:r,children:t})},N=({ariaDescribedBy:e,ariaLabelledBy:t,children:r})=>{const{isOpen:i}=(0,s.iL)();return(0,d.jsx)("div",{className:j,role:"dialog",hidden:!i,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:r})};var F=r(41089);const B=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:O,onClick:()=>{e()},children:(0,d.jsx)(F.M,{size:"small","aria-label":l.Ru.get("close")})});var M=r(59305),U=r(25073),V=r(49872),_=r(81961),z=r(71906);const H=({languageSelectionModalRef:e})=>{const t=(0,i.useRef)(null),[r,a]=(0,i.useState)("0"),n=(0,s.ZZ)(),c=(0,g.d4)(U.MU),u=(0,i.useCallback)((()=>{n({type:"CLOSE"})}),[n]),{isOpen:x}=(0,s.iL)(),h=(0,i.useCallback)((()=>{a(`${t.current?.getBoundingClientRect().height}px`)}),[a]),b=e=>{var t;(0,z.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),u()};if((0,M.m)(u),(0,_.w)({refOrElement:t,observeOnly:"height",onResize:h}),(0,i.useEffect)((()=>{h()}),[h]),!e.current)return null;const f="language-selection-title",S="language-selection-subtitle",v={"--header-height":r};return(0,p.createPortal)((0,d.jsx)(V.s,{active:x,children:(0,d.jsx)("div",{children:(0,d.jsx)(k,{onClose:u,children:(0,d.jsxs)(N,{ariaLabelledBy:f,ariaDescribedBy:S,children:[(0,d.jsxs)("div",{className:L,ref:t,children:[(0,d.jsxs)("div",{className:E,children:[(0,d.jsx)(y.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:f,paddingBottom:m.v4,children:l.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(y.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:S,paddingBottom:m.CD,children:l.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(B,{onClose:u})]}),(0,d.jsx)(I,{style:{...v},children:o.Np.map((e=>{const t=(0,l.a7)(e).baseName,r=(0,P.p)({localeFeatureFlag:c,urlLocale:t,type:"locale"});return(0,d.jsxs)(C,{onClick:b,locale:e,type:r?"link":"button",children:[(0,d.jsx)(y.E,{semanticColor:"textBase",children:o.IB[e].displayName}),(0,d.jsx)(y.E,{children:o.IB[e].displayNameEn})]},e)}))})]})})})}),e.current)}},84844:(e,t,r)=>{r.d(t,{A:()=>El,YourLibraryX:()=>Xs,q:()=>Ol});var i=r(30758),a=r(97500),n=r.n(a),l=r(96131),s=r(95440),o=r(40638),c=r(88308),d=r(63166),u=r(31606),p=r(65152),g=r(13377),y=r(99903),m=r(90882),x=r(8913),h=r(64721),b=r(12433),f=r(89494),S=r(76646),P=r(95309),v=r(11716),C=r(86070);const w=({position:e,divider:t,onCreateCallback:r=(()=>{}),spec:a})=>{const n=(0,f.W)(),{createPlaylist:l}=(0,S.A)(),s=(0,v.s)(),o=(0,i.useCallback)((()=>{n({intent:"create-playlist",type:"click"});const t=a.createButtonFactory().hitCreatePlaylist();t&&s.logInteraction(t),l(h.Ru.get("playlist.default_playlist_name"),e),r()}),[n,a,s,l,e,r]);return(0,C.jsx)(b.D,{role:"menuitem",divider:t,onClick:o,leadingIcon:(0,C.jsx)(x.u,{semanticColor:"textSubdued",size:"small"}),children:h.Ru.get("contextmenu.create-playlist")})},I=i.memo((function(e){return(0,C.jsx)(P.pZ,{value:"create-playlist",children:(0,C.jsx)(w,{...e})})}));var T=r(44670),R=r(90561);const A=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,R.o)(e??T.gv);return(0,C.jsx)(P.pZ,{value:"folder",children:(0,C.jsxs)(y.W,{children:[(0,C.jsx)(I,{position:r,onCreateCallback:t,spec:i}),(0,C.jsx)(m.j,{position:r,onCreateCallback:t,spec:i})]})})}));var D=r(67674),j=r(32350),L=r(47755),E=r(16249),O=r(93153),k=r(29602),N=r(85192),F=r(18162),B=r(8154),M=r(51244),U=r(86502),V=r(13979),_=r(2799),z=r(69069),H=r(9975),W=r(32165);const X=1248,K=800,Y=(0,W.g)(_.Z),G=(0,W.g)(z.fX),Z=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:a,ylxCollapsedStateNavbarWidth:n,ylxDefaultStateNavbarWidth:s,ylxExpandedStateNavbarWidth:o}=(0,M.y)(),{ylxSidebarState:c,setYlxSidebarState:d,canCollapse:u}=(0,z.$)(),p=(0,U.XB)(),g=(0,U._Y)(),{min:y,max:m,size:x,setSize:h}=(0,U.Zf)(),b=(0,H.H)(),f=(0,i.useRef)(null),S=(0,i.useRef)(null),P=(0,i.useRef)(null);(0,i.useLayoutEffect)((()=>{const i=b-e-3*F.KV-(p!==_.Z.Disabled?x+F.KV:0),v={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:a,ylxSidebarState:c,ylxSidebarStateRestoreTarget:f.current,rightSidebarWidth:x,rightSidebarMinWidth:y,rightSidebarMaxWidth:m,rightSidebarPanel:p,rightSidebarPanelRestoreTarget:S.current,storedCollapsedYLXWidth:n,storedDefaultYLXWidth:s,storedExpandedYLXWidth:o,clientWidth:b,mainContentWidth:i,canCollapse:u},C=P.current;if((0,l.j)(v,C))return;const w=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:a=0,leftSidebarMinWidth:n=0,leftSidebarMaxWidth:l=0,ylxSidebarState:s,ylxSidebarStateRestoreTarget:o,rightSidebarMinWidth:c=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:x=0,canCollapse:h=!0}=t,b={},f=u!==_.Z.Disabled,S=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,P=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,v=void 0===e.clientWidth?0:x-e.clientWidth,C=v<0,w=x>0,I=a<F.ev?F.ev-a:0;let T=C?-1*v:0;a>X?T=Math.max(0,T-(a-X)):I&&(T=I);const R=s===z.fX.EXPANDED&&e.ylxSidebarState!==z.fX.EXPANDED,A=s===z.fX.DEFAULT&&e.ylxSidebarState!==z.fX.DEFAULT;let D=r-n;S&&(D=R?r-B.ZU.EXPANDED_MIN:A?r-B.ZU.DEFAULT_MIN:0);let j=P?0:i-c;const L=T<=D+j;if(a<F.ev&&!L)f&&(S||C&&(s===z.fX.COLLAPSED||!h))?(b.rightSidebarPanel=_.Z.Disabled,b.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,T-=i,j=0):(s===z.fX.EXPANDED&&a+(r-B.ZU.DEFAULT_MIN)>F.ev?(b.ylxSidebarState=z.fX.DEFAULT,T-=r-y,D=y-B.ZU.DEFAULT_MIN):(b.ylxSidebarState=z.fX.COLLAPSED,T-=r-g,D=0),b.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===_.Z.Disabled&&p!==_.Z.Disabled&&Y(p)&&u!==e.rightSidebarPanelRestoreTarget&&a-i-F.KV>=F.ev)b.rightSidebarPanel=p,b.rightSidebarPanelRestoreTarget=null;else if(s===z.fX.DEFAULT&&o===z.fX.EXPANDED&&a-(m-r)>=F.ev)b.ylxSidebarState=z.fX.EXPANDED,b.ylxSidebarStateRestoreTarget=null;else if(s===z.fX.COLLAPSED&&o===z.fX.DEFAULT&&a-(y-r)>=F.ev)b.ylxSidebarState=z.fX.DEFAULT,b.ylxSidebarStateRestoreTarget=null;else if(w&&a>=K){let e=l-r,t=d-i;const a=Math.min(v,e+t);for(let n=0;n<a;n++)r<i&&r<l&&e>0?(r++,e--):i<d&&t>0&&(i++,t--)}s!==e.ylxSidebarState&&G(o)&&o===e.ylxSidebarStateRestoreTarget&&(b.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&Y(p)&&p===e.rightSidebarPanelRestoreTarget&&(b.rightSidebarPanelRestoreTarget=null);if(T>0&&T<=D+j)for(let e=0;e<T;e++)r>i&&r>n&&D>0?(r--,D--):i>c&&j>0&&(i--,j--);r&&r!==t.leftSidebarWidth&&(b.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(b.rightSidebarWidth=i);return b}(C,v);void 0!==w.leftSidebarWidth&&t(w.leftSidebarWidth),G(w.ylxSidebarState)&&d(w.ylxSidebarState),void 0!==w.ylxSidebarStateRestoreTarget&&(f.current=w.ylxSidebarStateRestoreTarget),void 0!==w.rightSidebarWidth&&0!==C?.rightSidebarWidth&&h(w.rightSidebarWidth),void 0!==w.rightSidebarPanel&&g((0,V.MQ)(w.rightSidebarPanel)),void 0!==w.rightSidebarPanelRestoreTarget&&(S.current=w.rightSidebarPanelRestoreTarget),P.current=v}),[e,r,a,t,c,x,y,m,h,p,n,s,o,d,g,b,u])}(),null);var q=r(78358);let J=function(e){return e.YLX_SORT_AND_VIEW_PICKER="ylx-sort-and-view-picker",e.YLX_CUSTOM_ORDERING="ylx-custom-ordering",e.REFINERS_PICKER="refiners-picker",e}({}),$=function(e){return e.URGENT="urgent",e.CONTEXTUAL="contextual",e.DEFAULT="default",e}({});class Q{itemsRecord={[$.URGENT]:new Set,[$.CONTEXTUAL]:new Set,[$.DEFAULT]:new Set};visibleItem=null;static PRIORITIES=[$.URGENT,$.CONTEXTUAL,$.DEFAULT];static NO_CHANGE={keyToShow:null,keyToHide:null};getNextItem(){let e=null;return Q.PRIORITIES.some((t=>{const r=this.itemsRecord[t];return e=Array.from(r).at(-1)??null,e})),e}updateVisibility(e,t,r){const i=this.visibleItem;"add"===r?this.itemsRecord[t].add(e):this.itemsRecord[t].delete(e);const a=this.getNextItem();return this.visibleItem=a,i===a?Q.NO_CHANGE:{keyToShow:a,keyToHide:i}}}var ee=r(79792);let te=function(e){return e.VISIBILITY_GRANTED="visibilityGranted",e.VISIBILITY_DENIED="visibilityDenied",e}({});class re extends ee.V{}const ie=(0,i.createContext)({notifyShowInterest:()=>{throw new Error("notifyShowInterest must be used within a VisibilityOrchestratorProvider")},notifyHideInterest:()=>{throw new Error("notifyHideInterest must be used within a VisibilityOrchestratorProvider")},events:new re}),ae=({children:e})=>{const t=(0,i.useMemo)((()=>new Q),[]),r=(0,i.useRef)(new re),a=(0,i.useCallback)(((e,t)=>{t&&r.current.emitSync(te.VISIBILITY_DENIED,{key:t}),e&&r.current.emitSync(te.VISIBILITY_GRANTED,{key:e})}),[]),n=(0,i.useCallback)(((e,r=$.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"add");a(i,n)}),[t,a]),l=(0,i.useCallback)(((e,r=$.DEFAULT)=>{const{keyToShow:i,keyToHide:n}=t.updateVisibility(e,r,"remove");a(i,n)}),[t,a]);return(0,C.jsx)(ie.Provider,{value:{events:r.current,notifyShowInterest:n,notifyHideInterest:l},children:e})};var ne=r(22222);r(82423);ee.V;r(89731);class le{events=new ee.V;addRefiners(){throw new Error("Method not implemented.")}removeRefiners(){throw new Error("Method not implemented.")}getEvents(){return this.events}updateSelectedRefinersOrder(e){throw new Error("Method not implemented.")}}const se=(0,i.createContext)(null);r(84576);var oe=r(78827),ce=(r(45673),r(79147));r(15249);const de=function({children:e}){const t=(0,i.useMemo)((()=>new le),[]);return(0,C.jsx)(se.Provider,{value:t,children:e})},ue=()=>null,pe=()=>null,ge=()=>null,ye=()=>null,me=()=>null;const xe={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},he=(0,i.createContext)(xe);class be{focusElement=()=>{};getFocusElement=()=>null;registerFocusElement=()=>()=>{}}const fe=({children:e})=>{const t=(0,i.useMemo)((()=>new be),[]);return(0,C.jsx)(he.Provider,{value:t,children:e})};var Se=r(76698);const Pe=()=>({cheetaraOnboardingIsActive:!1,setCheetaraOnboardingIsActive:()=>{},cheetaraOnboardingDismissed:!1,setCheetaraOnboardingDismissed:()=>{},handleCloseCheetaraOnboarding:()=>{},cheetaraTooltipVisible:!1,setCheetaraTooltipVisible:()=>{}});var ve=r(19412);r(2607);const Ce=()=>!1;var we=r(94322),Ie=r(6128),Te=r(72351),Re=r(65311),Ae=r(49058),De=r(64384);const je="rqGyIqd3Igk05BEB2ZC6",Le="WycFx_Gl2tUXbUJpZiD8",Ee=()=>{const[e,t]=(0,i.useState)(!1),r=(0,Re.V)(),a=(0,s.d4)(Ae.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const n=(0,s.d4)(Ae.mo);return r&&e?(0,C.jsx)(Te.t5,{language:h.Ru.getLocaleForSmartling(),market:a.toLowerCase(),children:(0,C.jsxs)("div",{className:je,"data-testid":"left-sidebar-legal-links",children:[(0,C.jsx)(Te.JM,{}),(0,C.jsx)("a",{draggable:!1,href:De.Bl,target:"_blank",rel:"noopener",className:Le,children:(0,C.jsx)(Ie.E,{variant:"marginal",children:h.Ru.get("cookies")})}),n&&(0,C.jsx)("a",{draggable:!1,href:De.Vd,target:"_blank",rel:"noopener",className:Le,children:(0,C.jsx)(Ie.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},Oe="YNnobzGm5w3XKBniKdW9",ke=(0,i.memo)((function({isAnonymous:e}){return(0,C.jsx)("div",{className:Oe,"data-testid":"left-sidebar-footer",children:e&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ee,{}),(0,C.jsx)(we.X,{})]})})}));var Ne=r(10718),Fe=r(40748),Be=r(36602),Me=r(43494),Ue=r(13390),Ve=r(99549),_e=r(1620);const ze="lvJXjYO7YXxGKHcgx5pe",He="yYGZUqSKJttCw_Z2JvPL",We="wkyebhrfwyJPCfDhQgbp",Xe=()=>{const e=(0,Ue.sy)(),t=(0,v.s)(),r=(0,s.wA)(),{spec:a}=(0,_e.r)(Be.V,{}),n=h.Ru.get("web-player.your-library-x.dsa-message",h.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{r(Ve.r8.actions.open()),t.logInteraction(a.learnMoreButtonFactory().hitUiReveal())}),[r,t,a]);return(0,C.jsx)("div",{className:ze,children:e?(0,C.jsx)(Me.Zp,{label:(0,C.jsx)(Ie.E,{children:n}),placement:"right",showDelay:0,children:(0,C.jsx)("div",{className:He,children:(0,C.jsx)(Ne.p,{"aria-label":n})})}):(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)("div",{children:(0,C.jsx)(Ne.p,{size:"small"})}),(0,C.jsx)(Ie.E,{as:"p",semanticColor:"textSubdued",children:h.Ru.get("web-player.your-library-x.dsa-message",(0,C.jsx)(Fe.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:We,children:(0,C.jsx)(Ie.E,{variant:"bodyMedium",children:h.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},Ke="AhNLpx0iVnlj4SuL_Gaw",Ye="JyZRugeRBHbUtS5ABOQ8",Ge=({className:e})=>(0,C.jsx)("section",{className:n()(Ke,e),children:(0,C.jsxs)("div",{className:Ye,children:[(0,C.jsx)(Ie.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:h.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,C.jsx)(Ie.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:h.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var Ze=r(39514),qe=r(70385);const Je={getTitle:()=>h.Ru.get("action-trigger.create-playlist"),getDescription:()=>h.Ru.get("action-trigger.login-playlist")},$e=({children:e,renderInline:t})=>(0,C.jsx)(Ze.y,{id:qe.x9,options:{...Je,renderInline:t},children:e});var Qe=r(61214),et=r(23893);const tt="CfruGiDGW_FH4l65GMpb",rt="fIgbQ9qpINdyy__tkaHi",it="wv308QWnPnkI8n0GdqYO",at=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:a,onClick:l,className:s}=e;return(0,C.jsxs)("section",{className:n()(tt,s),children:[(0,C.jsxs)("div",{className:rt,children:[(0,C.jsx)(Ie.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,C.jsx)(Ie.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,C.jsx)("div",{className:it,children:i&&(a||l)&&(0,C.jsx)(Qe.$,{className:it,as:l?"button":void 0,colorSet:"invertedLight",href:a,onClick:l,component:et.v,size:"small",children:i})})]})})),nt=({className:e})=>{const{createPlaylist:t}=(0,S.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)($e,{renderInline:!1,children:(0,C.jsx)(at,{onClick:r,linkTitle:h.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:h.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:h.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,C.jsx)(at,{linkTo:"/genre/podcasts-web",linkTitle:h.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:h.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:h.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},lt="NOXrKH_1anB9lsOlyv5g",st="FIARvjbv_YZKwz7yxNHw",ot="Fqrv8StT3DnEAfntIKCg",ct="JydI9ZzWnssPC899sOGP",dt=({query:e,className:t})=>(0,C.jsxs)("div",{className:n()(lt,t),"data-testid":"no-search-results-view",children:[(0,C.jsx)(Ie.E,{as:"h1",variant:"bodyMediumBold",className:st,children:h.Ru.get("web-player.your-library-x.empty-results-title-short",(0,C.jsx)("span",{className:ot,children:(0,C.jsx)("span",{className:ct,children:e})}))}),(0,C.jsx)(Ie.E,{as:"h2",variant:"bodySmall",children:h.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var ut=r(73762);const pt="vhOeYrTmSoea5vemsMpv",gt="pCKhe1uJhYBUC4YVmz9B",yt=({onClick:e})=>(0,C.jsxs)("div",{className:pt,children:[(0,C.jsx)("div",{className:"icon",children:(0,C.jsx)(ut.b,{size:"xlarge",semanticColor:"textBase"})}),(0,C.jsxs)("div",{className:gt,children:[(0,C.jsx)(Ie.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:h.Ru.get("web-player.your-library-x.error-title")}),(0,C.jsx)(Ie.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:h.Ru.get("web-player.your-library-x.error-body")})]}),(0,C.jsx)("div",{children:(0,C.jsx)(Qe.$,{onClick:e,colorSet:"invertedLight",size:"small",children:h.Ru.get("web-player.your-library-x.error-button")})})]}),mt=(0,i.createContext)(null);const xt=({children:e})=>{const t=function(){const[e,t]=(0,Se.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),a=(0,i.useCallback)(((r,i)=>{const a=e.indexOf(r);if(i){if(-1!==a)return;t([...e,r])}else{if(-1===a)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:a}}();return(0,C.jsx)(mt.Provider,{value:t,children:e})},ht="fYWNdY4zhj4OX_T2Xtg6",bt="BRX6aJUAuAsvHKD_fpbo",ft="ZZsPF3Sn4h7m0_5Clhk0",St="IZq_xBKdh88HLD4QY90X",Pt="PUipCs3_0Qott0Sru3pB",vt="XAOxFVWnd185_vZ5zPGu",Ct="YsCa3XbOXEm79LH0B7do",wt="eC25_w41L83mXDCqdm_A",It="VyDwqqtx0153zD8a3TED",Tt="rOgsguaurlHVlgCTY0P7",Rt="zS8ATyQNwnAiEoPrCcIo",At="Zwr4MoUVImDin82vBn4y",Dt="lb8li6m8Zei4tr0zNKxX",jt="aK6vld0FgHGxjz6IiHyS",Lt="Xw1OibA6EkrU4F47EMw9",Et="_EFIA9HjgZxxgTSZzQcg",Ot="JUPaw8kZF94Coth4G88s",kt="main-yourLibraryX-listItem",Nt="BfALkuQy0UjTI70U9QlQ",Ft="c1PJ2LHU0EnzyA0jDc1j",Bt=({isScrolled:e})=>(0,C.jsxs)("div",{className:n()(At,jt,{[Lt]:e}),children:[(0,C.jsx)(Ie.E,{variant:"marginalBold",semanticColor:"textSubdued",children:h.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,C.jsx)(Ie.E,{variant:"marginalBold",semanticColor:"textSubdued",children:h.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,C.jsx)(Ie.E,{variant:"marginalBold",semanticColor:"textSubdued",children:h.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]});var Mt=r(23530);const Ut=()=>null,Vt=()=>null;const _t=()=>({getFocusElement:null,registerFocusElement:null});var zt=r(96613),Ht=r(39733);const Wt="a2XwshgvydvJO9If_GzQ",Xt="aVLBGREPTnbTFhkSdUMV",Kt="ViXEX4SVVU_NA7zcS9kd",Yt="pQvrkwXAqZnbSqJiiQuo",Gt="mA1QNQx6oUXgQ8kMID2S",Zt={marginBlockEnd:0,willChange:"transform, opacity"},qt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=j.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,v.s)(),y=(0,Ht.f)(),m=p.selected,x=e?y.getFilterLabel(e):"",h=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,g,u]),b=(0,i.useCallback)((e=>{e.detail>1||r||h()}),[r,h]),{className:f,dropPosition:S,...P}=(0,L.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:s},onLongDragOver:h});return(0,C.jsx)(zt.v,{...p,"aria-label":p["aria-label"],...P,...S===j.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,f,{[Xt]:S===j.Nz.ON,[Gt]:r}),onClick:b,selectedColorSet:S===j.Nz.ON?"invertedDark":"invertedLight",secondary:m&&!t,style:Zt,ref:c,tabIndex:-1})};var Jt=r(75308);const $t={marginBlockEnd:0,willChange:"transform, opacity"},Qt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:a,toggleFilterId:l,allowedDropTargetMimeTypes:s=j.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,v.s)(),y=(0,Ht.f)(),m=p.selected,x=e?y.getFilterLabel(e):"",h=(0,i.useCallback)((()=>{!e||m&&t?(a(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:x,position:d}).hitFilter()))}),[e,x,m,t,a,l,d,g,u]),b=(0,i.useCallback)((e=>{e.detail>1||r||h()}),[r,h]),{className:f,dropPosition:S,...P}=(0,L.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:s},onLongDragOver:h});return(0,C.jsx)(Jt.m,{...p,"aria-label":p["aria-label"],...P,...S===j.Nz.ON?{selectedColorSet:"base"}:void 0,className:n()(o,f,{[Xt]:S===j.Nz.ON,[Gt]:r}),onClick:b,style:$t,ref:c,tabIndex:-1})},er=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.ARTISTS,D.fl.PLAYLISTS_V2,D.fl.SHOWS,D.fl.AUDIOBOOKS,D.fl.EPISODES,D.fl.FOLDERS],tr=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.EPISODES,D.fl.PLAYLISTS_V2,D.fl.FOLDERS],rr=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.EPISODES,D.fl.PLAYLISTS_V2,D.fl.FOLDERS];r(69191);const ir=()=>[];function ar(e){return{type:"contentType",id:e.id,name:e.name}}function nr(e){return e.id.startsWith("spotify:concept:")?{type:"tag",id:(t={tagUri:e.id,tagName:e.name,entityCount:0}).tagUri,name:t.tagName,count:t.entityCount}:ar(e);var t}var lr=r(27054);const sr=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:a,className:n,spec:l,inFolderView:s}){const o=!(t||e),{availableRefiners:c,activeRefiners:d,allContentTypeRefiners:u}=(({availableFilters:e,activeFilters:t,inFolderView:r})=>{const i=e?.map(ar),a=t?.map(nr)??[],n=ir(),l=Ce();return{availableRefiners:t?.length||!l||r?i:n,activeRefiners:a,allContentTypeRefiners:i}})({availableFilters:e,activeFilters:t,inFolderView:s}),{registerFocusElement:p}=_t(),y=o?u:[...d??[],...c??[]],m=(0,i.useRef)(null),x=(0,i.useCallback)((()=>{(0,lr.MS)(m.current,m.current?.nextElementSibling instanceof HTMLElement?m.current?.nextElementSibling:null),a()}),[a]),b=Ce();return y&&0!==y?.length?(0,C.jsxs)(Mt.FN,{className:n,ariaLabel:h.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,C.jsx)(Qt,{resetFilterIds:x,toggleFilterId:r,allowedDropTargetMimeTypes:er,"aria-label":h.Ru.get("web-player.your-library-x.clear_filters"),innerRef:m,spec:l}),y.map(((e,t)=>{const n=d?.includes(e),s=0===t,c=t>0&&d?.includes(y[0]),u=(0,C.jsx)(qt,{innerRef:void 0,filterId:e.id,isPrimaryFilter:s,isPlaceholder:o,resetFilterIds:a,toggleFilterId:r,selected:n,spec:l,index:t,children:e.name},e.id);return!b||c?u:(0,C.jsx)(g.h,{menu:(0,C.jsx)(i.Suspense,{fallback:!0,children:(0,C.jsx)(Vt,{refiner:e,resetFilterIds:a,isSelected:n})}),children:u},e.id)})),b&&!d?.length&&!s&&(0,C.jsx)(Ut,{})]}):null}));var or=r(75627);const cr="",dr=(0,i.createContext)({openedFolderUri:cr,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),ur=({children:e})=>{const{setFilter:t}=(0,i.useContext)(q.g),[r,a]=(0,Se.x)("opened-folder-uri",cr),n=(0,i.useRef)([r??cr]),l=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{a(e),t(cr)}),[a,t]),o=(0,i.useCallback)((e=>{n.current.push(e),l.current="PUSH",s(n.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{n.current.pop();const e=n.current.at(-1);return l.current="POP",s(e),e}),[s]),d=(0,i.useCallback)((()=>{n.current=[cr],s(cr)}),[s]);return(0,C.jsx)(dr.Provider,{value:{openedFolderUri:(0,or.fpb)(r)?r:cr,pushFolder:o,popFolder:c,resetFolder:d,change:l.current},children:e})};var pr=r(34002),gr=r(32807),yr=r(66686),mr=r(58681),xr=r(96455),hr=r(42514),br=r(42893),fr=r(90410),Sr=r(13563),Pr=r(28380),vr=r(24902),Cr=r(85690);const wr=(e,t)=>t?(e=>{switch(e){case"album":default:return h.Ru.get("web-player.your-library-x.type-album");case"ep":return h.Ru.get("ep");case"single":return h.Ru.get("single");case"compilation":return h.Ru.get("compilation")}})(t):(e=>{switch(e){case vr.c.ALBUM:return h.Ru.get("web-player.your-library-x.type-album");case vr.c.ARTIST:return h.Ru.get("web-player.your-library-x.type-artist");case vr.c.FOLDER:return h.Ru.get("web-player.your-library-x.type-folder");case vr.c.AUDIOBOOK:return h.Ru.get("web-player.your-library-x.type-audiobook");case vr.c.YOUR_EPISODES:case vr.c.LOCAL_FILES:case vr.c.LIKED_SONGS:case vr.c.PLAYLIST:return h.Ru.get("web-player.your-library-x.type-playlist");case vr.c.SHOW:return h.Ru.get("web-player.your-library-x.type-show");case vr.c.PRE_RELEASE_ALBUM:return h.Ru.get("web-player.your-library-x.type-prerelease-album");case vr.c.PRE_RELEASE_BOOK:return h.Ru.get("web-player.your-library-x.type-prerelease-audiobook");default:return(0,Cr.d)(e)}})(e),Ir=e=>e.type===vr.c.ALBUM&&"album"!==e.albumType,Tr=e=>{switch(e){case vr.c.YOUR_EPISODES:case vr.c.LIKED_SONGS:case vr.c.LOCAL_FILES:return vr.c.PLAYLIST;default:return e}},Rr=({shouldShowType:e,type:t,subtitle:r,specialType:i})=>(0,C.jsxs)(C.Fragment,{children:[e&&wr(t,i),!!r&&e&&" • ",r]});var Ar=r(59097);const Dr=({iconSize:e="small"})=>(0,C.jsx)("span",{className:Pt,children:(0,C.jsx)(Ar.C,{size:e,semanticColor:"textBrightAccent",className:St})}),jr=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>(0,C.jsx)(Me.Zp,{label:(0,C.jsxs)("div",{className:Rt,children:[(0,C.jsxs)("div",{children:[t,r]}),i&&(0,C.jsx)(Dr,{})]}),placement:"right",showDelay:0,children:e});var Lr=r(91825),Er=r(27287),Or=r(15578);const kr=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,C.jsx)("div",{className:Or.A.subtitle,children:(0,C.jsxs)(Lr.j,{className:Or.A.link,id:i,dir:"auto",children:[(0,C.jsx)("span",{className:Or.A.subtitleLeadingWrapper,children:e}),(0,C.jsx)("span",{className:Or.A.subtitleText,children:t})]})})},Nr=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,C.jsx)("div",{className:Or.A.subtitle,children:(0,C.jsxs)(Er.j,{lineClamp:1,className:Or.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,C.jsx)("span",{className:Or.A.subtitleLeadingWrapper,children:e}),t]})})};var Fr=r(1978),Br=r(65583),Mr=r(95529),Ur=r(39399),Vr=r(67526);const _r=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function zr(e,t){const[r,a]=(0,i.useState)(""),n=(0,i.useRef)(r);n.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return a(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),o=e.isComposing||229===e.keyCode,c=(d=e.key,_r.has(d)&&!t);var d;const u=r&&!n.current,p=t&&!n.current;if(i||s||o||c||u||p)return;(t&&n.current||r)&&(e.preventDefault(),e.stopPropagation()),a((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>a("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const Hr=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Wr=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:a=!0})=>{const[n,l]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:n,setTypeaheadResult:l})),[n,l]),o=zr(t,a),c=(0,i.useRef)(o);c.current=o;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{o&&a?d.current(o).then((e=>{o===c.current&&l({uid:e,str:o})})):l({uid:null,str:""})}),[a,o,l]),(0,C.jsx)(Hr.Provider,{value:s,children:e})};var Xr=r(4592);const Kr={state:{referrer:"your_library",preventMoveFocus:!0}};function Yr(e,t,r,a,n){const{filter:l}=(0,i.useContext)(q.g),{isActive:s}=(0,Vr.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(Hr);return t===e?r:null}(e),c=!!o,d=(0,Ur.W)({uri:e,type:"link"})?(0,Xr.hF)(t):t,u=(0,i.useRef)(null),p=(0,Fr.Zp)(),g=(0,i.useCallback)((e=>{e.preventDefault(),n?n():d&&p(d,Kr)}),[n,p,d]);(0,i.useLayoutEffect)((()=>{c&&u.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[c]);const y=a?`${a} • ${r}`:r;return{isActive:s,onClick:g,contents:l||o?(0,C.jsx)("span",{ref:u,children:(0,C.jsx)(hr.M,{autoEscape:!0,searchWords:[l.trim(),...o?.split(" ")??""],textToHighlight:y})}):y}}const Gr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,or.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,contents:c}=Yr(t,l,r,i,s),d=`listrow-title-${e}`;return(0,C.jsx)(g.h,{menu:a,children:(0,C.jsx)(Br.d,{id:d,lineClamp:1,className:n()(Or.A.link,Or.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:c})})},Zr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:a,to:l=(0,or.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,onClick:c,contents:d}=Yr(t,l,r,i,s);return(0,C.jsx)(g.h,{menu:a,children:(0,C.jsx)(Mr.Z,{lineClamp:1,className:n()(Or.A.link,Or.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:l,onClick:c,role:"gridcell",dir:"auto",children:d})})},qr=[D.fl.ALBUMS,D.fl.ARTISTS,D.fl.PLAYLISTS_V2,D.fl.SHOWS,D.fl.FOLDERS,D.fl.PSEUDO_PLAYLISTS],Jr=[D.fl.PLAYLISTS_V2,D.fl.FOLDERS];var $r=r(55847);const Qr=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,C.jsx)($r.T,{"aria-label":i,titleText:i,descriptionText:e?h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:h.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};var ei=r(11548);function ti({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const a=(0,Ht.f)(),{contains:n}=(0,ei.p)("ylpin"),[l,s]=(0,i.useState)(null),o=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[D.fl.PLAYLISTS_V2]:a=[],[D.fl.FOLDERS]:l=[]}=t,o=[...a,...l];if(!!o.length&&(await n(...o)).some(Boolean)){if(o.length>1)throw new Error("Reordering multiple pinned items at once is not supported");s({dropData:t,dropPosition:i})}else e(t,i)}),[r,n,e]),c=(0,v.s)();return{applyDropWithUnpinConfirmation:o,unpinConfirmationDialog:l?(0,C.jsx)(Qr,{isConfirmationForPlaylist:!l.dropData[D.fl.FOLDERS]?.length,onClose:()=>s(null),onConfirm:async()=>{const{[D.fl.PLAYLISTS_V2]:r=[],[D.fl.FOLDERS]:i=[]}=l.dropData;await a.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),s(null)}}):null}}function ri(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(k.O_);return{dropOriginIsYLX:e===T.gv,entityIsInFolder:t>0}}var ii=r(60809);function ai(){const e=(0,ii.g)(),{dropOriginIsYLX:t}=ri();return(0,i.useCallback)((async(r,i)=>{const a=await e.contains(r);if(1!==new Set(a).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(a[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}var ni=r(42074);function li({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const a=(0,ii.g)(),n=(0,Ht.f)(),l=(0,v.s)(),s=ai(),o=(0,i.useCallback)((async(i,o)=>{const{[D.fl.PLAYLISTS_V2]:c=[],[D.fl.FOLDERS]:[d]=[]}=i,u=o===j.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,or.tbX)(e)||(0,or.fpb)(e)){const t=si((await a.getContents()).items,e);-1===t?await a.add([e],{before:"start"}):t>0&&((0,or.tbX)(e)?await a.move({uri:e},{before:"start"}):await a.moveFolder({uri:e},{before:"start"}))}else if(!(0,or.Z0m)(e)){const[t]=await n.contains(e);t||await n.add({uris:[e]})}await n.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await a.moveFolder({uri:d},u):c.length&&await s(c,u);l.logInteraction(t.dragSort())}),[e,r,n,l,t,a,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=ti(r?{onApplyDrop:o,spec:t,isDropTargetPinned:r}:{onApplyDrop:o});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[D.fl.PLAYLISTS_V2]:r=[],[D.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function si(e,t,r=0){for(const i of e)if((0,ni.Af)(i)||(0,ni.sA)(i)){if((0,or.B2u)(i.uri,t))return r;if((0,ni.sA)(i)){const e=si(i.items,t,r+1);if(-1!==e)return e}}return-1}var oi=r(92057);const ci={state:{referrer:"your_library",preventMoveFocus:!0}};function di({uri:e,to:t=(0,or.o_h)(e)?.toURLPath(!0)||"",type:r,handleNavigate:a,dragLabel:n,isPinned:l,canReorder:s,allowedDropTargetDropOnMimeTypes:o=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,triggerPlay:g,isItemInGrid:y,playInsteadOfNavigating:m=!1,isPlaying:x,spec:h,folderDepth:b}){const f=(0,Ur.W)({uri:e,type:"link"})?(0,Xr.hF)(t):t,S=(0,Fr.Zp)(),P=(0,Fr.zy)(),C=(0,i.useCallback)((()=>{S(f,ci)}),[S,f]),w=(0,v.s)(),I=(0,i.useRef)(0),R=(0,i.useRef)(null),A=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!R.current?.contains(e)),[]),E=(0,i.useCallback)((t=>{if(!A(t)){if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),m){if(I.current>Date.now())return;return I.current=Date.now()+300,void(x||(p?.(),w.logInteraction(h.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}a?a():f&&S(f,{...ci,replace:f===P.pathname}),w.logInteraction(h.yourLibraryItemFactory().hitUiNavigate({destination:e}))}}),[A,m,a,f,w,h,e,p,x,S,P.pathname]),O=(0,i.useCallback)((t=>{m||A(t)||g&&(w.logInteraction(h.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),g?.())}),[m,A,g,w,h,e]),k=(0,i.useCallback)((()=>{w.logInteraction(h.yourLibraryItemFactory().secondaryHitUiReveal())}),[w,h]),{draggable:N,onDragStart:F}=(0,oi.P)({itemUris:[e],itemMimeTypes:[(0,D.j3)(r)],dragLabelText:n,sectionId:b??0,dropOriginUri:T.gv});let B=[];l?B=qr:s&&(B=Jr);const M={[j.Nz.ON]:o,[j.Nz.BEFORE]:B,[j.Nz.AFTER]:B},{handleDropBeforeOrAfterRootlistItem:U,unpinConfirmationDialog:V}=li({dropTargetUri:e,spec:h,isDropTargetPinned:l}),_=(0,i.useCallback)(((e,t)=>{t===j.Nz.ON?c?.(e,t):t!==j.Nz.BEFORE&&t!==j.Nz.AFTER||U(e,t)}),[c,U]),{dropPosition:z,className:H,...W}=(0,L.A)({uri:e,allowedMimeTypesByDropPosition:M,onDrop:_,onLongDragOver:d??C,reorderDirection:y?"horizontal":"vertical"}),X=(0,i.useCallback)((t=>{t.repeat||A(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&w.logInteraction(h.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[A,w,u,h,p,e]),K=(0,or.o_h)(P.pathname,{parseUnknown:!0})?.toURI();return{onClick:E,onDoubleClick:O,draggable:N&&!!n,onDragStart:F,onKeyDown:X,unpinConfirmationDialog:V,dropPosition:z,dropTargetClassName:H,logRightClick:k,isViewActive:!!K&&(0,or.B2u)(e,K),itemRef:R,...W}}var ui=r(39744);const pi=i.createContext(!1),gi=({children:e,isCompact:t})=>(0,C.jsx)(pi.Provider,{value:t,children:e}),yi=()=>(0,i.useContext)(pi),mi="wJTUKAyYI219kJtclJLa",xi="q0_cpEyu_8EC7he96qT_",hi="L8ET6xwMh_wMEqCpmunH",bi="D_1eJKOJ3wTCKO93GX06",fi="_7kcfiJ2UNEh3CDR9Wau",Si="N8wAJha8ApfxgOfqv4UM",Pi="iJMxV9zMXSfrjJPyB3Fw",vi=({uri:e,to:t=(0,or.o_h)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:a,name:l,namePrefix:s,subtitle:o,cover:c,type:d,specialType:u,downloadButton:p,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:x,onLongDragOver:h,menu:b,leading:f,openDeleteDialog:S,togglePlay:P,triggerPlay:v,isPinned:w,shouldShowType:I,playbackUri:T,isPlaying:R,isActive:A,playInsteadOfNavigating:D,spec:L,index:E,animateClassName:O="",animateState:k,preReleaseIcon:N,lockedIcon:F})=>{const{onClick:B,onDoubleClick:M,draggable:U,onDragStart:V,onKeyDown:_,dropPosition:z,dropTargetClassName:H,unpinConfirmationDialog:W,logRightClick:X,isViewActive:K,itemRef:Y,...G}=di({uri:e,to:t,handleNavigate:r,dragLabel:a,isPinned:w,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:x,openDeleteDialog:S,onLongDragOver:h,togglePlay:P,triggerPlay:v,isItemInGrid:!0,isPlaying:R,isActive:A,spec:L,playInsteadOfNavigating:D}),Z=(0,C.jsx)(Zr,{uri:e,title:l,titlePrefix:s,menu:b,handleNavigate:r,playbackUri:T}),q=(0,C.jsx)(Nr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ui.g,{pinned:w}),F,N,p]}),subtitle:(0,C.jsx)(Rr,{shouldShowType:I,type:d,subtitle:o,specialType:u}),uri:e}),J=(0,i.useRef)(null),$=yi();let Q=(0,C.jsx)(g.h,{menu:b,onShow:X,children:(0,C.jsx)(Pr.E,{uri:e,trigger:Pr.l.OnMouseDown,children:(0,C.jsx)(br.Z,{id:e,title:Z,subtitle:q,media:c,size:"sm",leading:f,className:n()(mi,{[O]:k}),variant:K?"tinted":void 0,onClick:B,onDoubleClick:M,padding:fr.CJ,...G})})});return $&&(Q=(0,C.jsx)(jr,{title:Z,subtitleSlot:q,uri:e,isPlaying:R,parentRef:J,children:(0,C.jsx)("div",{children:(0,C.jsx)(g.h,{menu:b,onShow:X,children:(0,C.jsx)(Pr.E,{uri:e,trigger:Pr.l.OnMouseDown,children:(0,C.jsx)(br.Z,{id:e,title:void 0,media:c,size:"sm",className:n()(mi,xi,{[O]:k}),variant:K?"tinted":void 0,onClick:B,onDoubleClick:M,padding:fr.vw,ref:J,...G})})})})})),(0,C.jsxs)(C.Fragment,{children:[W,(0,C.jsx)(Sr.W,{draggable:U,onDragStart:V,onKeyDown:_,className:n()(H,{[Wt]:z===j.Nz.ON,[Kt]:z===j.Nz.BEFORE,[Yt]:z===j.Nz.AFTER}),"aria-selected":A,innerRef:Y,"aria-posinset":E,children:Q})]})};var Ci=r(13990),wi=r(55530);const Ii=({name:e,uri:t,togglePlay:r,spec:a,isActive:l,isPlaying:s,size:o})=>{const c=(0,v.s)(),d=(0,i.useCallback)((()=>{l?s?c.logInteraction(a.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(a.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,s,c,a,r,t]);return(0,C.jsx)("div",{className:n()(fi,{[Pi]:s,[Si]:"small"===o}),role:"gridcell",children:(0,C.jsx)(wi.R,{isPlaying:s,onClick:d,ariaPlayLabel:h.Ru.get("playlist.a11y.play",e),ariaPauseLabel:h.Ru.get("playlist.a11y.pause",e),size:o})})};var Ti=r(25336);const Ri=({name:e,uri:t,togglePlay:r,spec:a,isActive:n,isPlaying:l,size:s})=>{const o=(0,v.s)(),c=(0,i.useCallback)((()=>{const e=(0,Ti.$I)({spec:a,logger:o,uri:t,isActive:n,isPlaying:l});r({loggingParams:e})}),[n,l,o,a,r,t]);return(0,C.jsx)(wi.R,{isPlaying:l,onClick:c,ariaPlayLabel:h.Ru.get("playlist.a11y.play",e),ariaPauseLabel:h.Ru.get("playlist.a11y.pause",e),size:s,version:wi.H.transparent})};var Ai=r(41861),Di=r(2535),ji=r(977),Li=r(81961),Ei=r(23340);const Oi=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:a,animateState:l,animateClassName:s="",isPlaying:o,togglePlay:c,spec:d,uri:u}){const p=(0,Ei._)(),{isCollapsed:g}=(0,Ue.$)(),y=c&&!g;return(0,C.jsxs)("div",{className:n()({[Or.A.imageContainer]:y}),children:[(0,C.jsx)(Ai.b,{fadeIn:!0,images:p(r,48),shape:i?Ai.u.CIRCLE:Ai.u.ROUNDED_CORNERS,size:Di.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:n()(Or.A.entityImage,{[s]:l}),color:a,loadingMode:"eager"}),y&&(0,C.jsx)("div",{className:Nt,children:(0,C.jsx)(Ri,{spec:d.yourLibraryItemFactory().playButtonFactory(),name:e,uri:u,togglePlay:c,isPlaying:o,isActive:!0,size:"medium"})})]})})),ki=(0,i.memo)((function({title:e,type:t,uri:r,images:a,isCircular:n,togglePlay:l,color:s,spec:o,isActive:c,isPlaying:d}){const u=yi(),p=(0,Ei._)(),[g,y]=(0,i.useState)("medium"),m=(0,i.useRef)(null);return(0,Li.w)({onResize:({width:e})=>{y(e<90?"small":"medium")},refOrElement:m}),(0,C.jsx)("div",{className:bi,ref:m,children:(0,C.jsx)(Ci.M,{images:p(a,250),FallbackComponent:e=>(0,C.jsx)(ji.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:hi,...e}),isCircular:n,color:s,loadingMode:"eager",children:l&&!u&&(0,C.jsx)(Ii,{name:e,uri:r,togglePlay:l,spec:o,isActive:c,isPlaying:d,size:g})})})}));var Ni=r(73171);const Fi="_ymJNIfklFmogab9uWY1",Bi=({folderDepth:e=0})=>(0,C.jsx)("li",{className:Fi,style:{"--ylx-folder-depth":e}}),Mi=e=>{const{RowVariantComponent:t,uri:r,to:a=(0,or.o_h)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:s,className:o,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,style:m,openDeleteDialog:x,togglePlay:h,triggerPlay:b,isPlaying:f,isActive:S,type:P,menu:v,name:w,namePrefix:I,subtitle:T,downloadButton:R,expandFolderButton:A,cover:D,alt:L,addedAt:E,lastPlayedAt:O,shouldShowType:k,playbackUri:N,playInsteadOfNavigating:F,spec:B,nrValidItems:M,index:U,lockedIcon:V,onKeyDown:_,preReleaseIcon:z,...H}=e,{onClick:W,onDoubleClick:X,onDragStart:K,onKeyDown:Y,dropPosition:G,dropTargetClassName:Z,draggable:q,unpinConfirmationDialog:J,logRightClick:$,isViewActive:Q,itemRef:ee,...te}=di({uri:r,to:a,type:P,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,openDeleteDialog:x,togglePlay:h,triggerPlay:b,isPlaying:f,isActive:S,playInsteadOfNavigating:F,spec:B,folderDepth:s}),re=(0,i.useCallback)((e=>{Y(e),_?.(e)}),[Y,_]);return(0,C.jsxs)(C.Fragment,{children:[J,G===j.Nz.BEFORE&&(0,C.jsx)(Bi,{folderDepth:s}),(0,C.jsx)(Ni.c,{style:{"--ylx-folder-depth":s,...m},draggable:q,onDragStart:K,onDoubleClick:X,className:n()(o,Z,kt,{[Wt]:G===j.Nz.ON}),...H,...te,onKeyDown:re,innerRef:ee,"aria-setsize":M,"aria-posinset":U+1,children:(0,C.jsx)(t,{...e,to:a,isActive:S,isViewActive:Q,onClick:W,logRightClick:$,playInsteadOfNavigating:F,parentRef:ee})}),G===j.Nz.AFTER&&(0,C.jsx)(Bi,{folderDepth:s})]})};var Ui=r(45129);const Vi=({locked:e})=>e?(0,C.jsx)(Ui.u,{semanticColor:"textSubdued",title:h.Ru.get("mwp.header.content.unavailable"),className:Or.A.icon,size:"xsmall"}):null;var _i=r(88417);function zi(e){const{uri:t,artists:r,isPremiumOnly:a}=e,{filter:n}=(0,i.useContext)(q.g),{isPlaying:l,isActive:o}=(0,Vr.l_)(t),c=(0,s.wA)(),d=(0,i.useCallback)((()=>{c((0,yr.aw)(t))}),[c,t]),{togglePlay:u,triggerPlay:p}=(0,_i.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:o,openDeleteDialog:d,togglePlay:a?void 0:u,triggerPlay:a?void 0:p,menu:(0,C.jsx)(mr.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(hr.M,{searchWords:[n.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,C.jsx)(xr.M,{uri:t,size:"xsmall",className:Or.A.icon,as:"span"})}}const Hi=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,albumType:u,addedAt:p,lastPlayedAt:g,color:y,isPremiumOnly:m}=e,{isPlaying:x,isActive:h,openDeleteDialog:b,togglePlay:f,triggerPlay:S,menu:P,subtitleText:v,downloadButton:w}=zi(e),I=(0,C.jsx)(Oi,{title:o,type:d,images:s,color:y,uri:l,isPlaying:x,spec:i,togglePlay:f}),T=(0,C.jsx)(Vi,{locked:m});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:l,cover:I,name:o,subtitle:v,downloadButton:w,alt:o,type:d,specialType:u,dragLabel:o,menu:P,togglePlay:f,triggerPlay:S,openDeleteDialog:b,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:x,isActive:h,shouldShowType:t,spec:i,nrValidItems:a,index:n,lockedIcon:T})},Wi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,albumType:c,color:d,isPremiumOnly:u}=e,{togglePlay:p,triggerPlay:g,menu:y,subtitleText:m,downloadButton:x,openDeleteDialog:h,isPlaying:b,isActive:f}=zi(e),S=(0,C.jsx)(ki,{title:l,type:o,images:n,uri:a,togglePlay:p,color:d,spec:r,isActive:f,isPlaying:b}),P=(0,C.jsx)(Vi,{locked:u});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:m,menu:y,dragLabel:l,cover:S,downloadButton:x,type:o,specialType:c,togglePlay:p,triggerPlay:g,isPinned:s,shouldShowType:t,openDeleteDialog:h,isPlaying:b,isActive:f,spec:r,index:i,lockedIcon:P})};var Xi=r(13728);function Ki(e){const{uri:t}=e,r=(0,s.wA)(),{togglePlay:a,triggerPlay:n}=(0,_i.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:l,isActive:o}=(0,Vr.l_)(t);return{togglePlay:a,triggerPlay:n,isPlaying:l,isActive:o,openDeleteDialog:(0,i.useCallback)((()=>{r((0,yr.aw)(t))}),[r,t]),menu:(0,C.jsx)(Xi.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Yi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{togglePlay:y,triggerPlay:m,isPlaying:x,isActive:h,openDeleteDialog:b,menu:f}=Ki(e),S=(0,C.jsx)(Oi,{title:o,type:c,images:s,isCircular:!0,color:g,uri:l,isPlaying:x,spec:i,togglePlay:y});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:l,cover:S,name:o,type:c,alt:o,dragLabel:o,menu:f,togglePlay:y,triggerPlay:m,openDeleteDialog:b,addedAt:d,lastPlayedAt:u,isPlaying:x,isActive:h,isPinned:p,shouldShowType:t,spec:i,nrValidItems:a,index:n})},Gi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Ki(e),x=(0,C.jsx)(ki,{title:l,type:s,images:n,uri:a,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:m,isPlaying:y});return(0,C.jsx)(vi,{uri:a,name:l,menu:p,dragLabel:l,cover:x,type:s,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,openDeleteDialog:g,isPlaying:y,isActive:m,spec:r,index:i})};var Zi=r(93336);function qi(e){const{uri:t,authorName:r}=e,{filter:a}=(0,i.useContext)(q.g),n=(0,s.wA)(),{isPlaying:l,isActive:o}=(0,Vr.l_)(t);return{isPlaying:l,isActive:o,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yr.aw)(t))}),[n,t]),menu:(0,C.jsx)(Zi.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,C.jsx)(hr.M,{searchWords:[a.trim()],textToHighlight:r}),downloadButton:(0,C.jsx)(xr.M,{uri:t,size:"xsmall",className:Or.A.icon,as:"span"})}}const Ji=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,menu:h,subtitleText:b,downloadButton:f}=qi(e),S=(0,C.jsx)(Oi,{title:o,type:c,images:s,color:g,uri:l,isPlaying:y,spec:i,togglePlay:void 0}),P=(0,C.jsx)(Vi,{locked:e.isLocked});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:l,cover:S,name:o,subtitle:b,alt:o,dragLabel:o,menu:h,openDeleteDialog:x,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:a,lockedIcon:P,index:n,downloadButton:f})},$i=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:g,isActive:y,downloadButton:m}=qi(e),x=(0,C.jsx)(ki,{title:l,type:s,images:n,uri:a,color:c,spec:r,isActive:y,isPlaying:g});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:x,isPinned:o,shouldShowType:t,type:s,openDeleteDialog:p,isPlaying:g,isActive:y,spec:r,index:i,downloadButton:m})};var Qi=r(92441),ea=r(36196);const ta=({uri:e,divider:t,onDeleteCallback:r})=>{const a=(0,f.W)(),n=(0,s.wA)(),l=(0,i.useCallback)((()=>{a({intent:"playlisting",type:"click"}),n((0,yr.OB)(e,r))}),[n,r,a,e]);return(0,C.jsx)(b.D,{role:"menuitem",divider:t,onClick:l,leadingIcon:(0,C.jsx)(ea.P,{semanticColor:"textSubdued",size:"small"}),children:h.Ru.get("contextmenu.delete")})},ra=i.memo((function(e){return(0,C.jsx)(P.pZ,{value:"delete-folder",children:(0,C.jsx)(ta,{...e})})}));var ia=r(73724),aa=r(76263),na=r(42223);const la=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:a,isActive:n}=(0,_i.P)({uri:e},{featureIdentifier:"folder"}),l=(0,v.s)(),s=(0,i.useCallback)((()=>{r(),t&&l&&(a?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):n?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[n,a,l,t,r,e]);return(0,C.jsx)(b.D,{role:"menuitem",onClick:s,leadingIcon:a?(0,C.jsx)(aa._,{semanticColor:"textSubdued",size:"small"}):(0,C.jsx)(na.A,{semanticColor:"textSubdued",size:"small"}),children:a?h.Ru.get("pause"):h.Ru.get("play")})},sa=i.memo((function(e){return(0,C.jsx)(P.pZ,{value:"create-folder",children:(0,C.jsx)(la,{...e})})}));var oa=r(56910);const ca=({uri:e,name:t,divider:r,spec:a,handleRename:n})=>{const l=(0,v.s)(),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{a&&l.logInteraction(a.editButtonFactory({uri:e}).hitUiReveal()),o((0,yr.O2)(t,n))}),[o,l,t,n,a,e]);return(0,C.jsx)(b.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,C.jsx)(oa.G,{semanticColor:"textSubdued",size:"small"}),children:h.Ru.get("contextmenu.rename")})},da=i.memo((function(e){return(0,C.jsx)(P.pZ,{value:"rename",children:(0,C.jsx)(ca,{...e})})}));var ua=r(25167),pa=r(31472);const ga=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=(()=>{}),onDeleteCallback:a,canPin:n=T.oT.NO,isPinned:l=!1,isPlayable:s=!0}){const{spec:o}=(0,R.o)(e.uri),c=(0,pa.Ek)()&&s;return(0,C.jsx)(P.pZ,{value:"folder",children:(0,C.jsxs)(y.W,{children:[(0,C.jsx)(da,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,C.jsx)(ra,{uri:e.uri,divider:"after",onDeleteCallback:a}),(n!==T.oT.NO||l)&&(0,C.jsx)(ia.k,{uri:e.uri,canPin:n,isPinned:l,type:vr.c.FOLDER,spec:o}),(0,C.jsx)(I,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(m.j,{position:{after:e},onCreateCallback:i,spec:o}),(0,C.jsx)(ua.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:o}),c&&(0,C.jsx)(sa,{uri:e.uri,spec:o})]})})}));function ya(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:a}=(0,S.A)(),n=(0,v.s)(),l=(0,ii.g)(),s=ai(),o=(0,i.useCallback)((r=>{if(!t)return;const{[D.fl.PLAYLISTS_V2]:i=[],[D.fl.FOLDERS]:a=[]}=r,o={after:{uri:t}};i.length&&(s(i,o),n.logInteraction(e.dragSort())),a.length&&(l.moveFolder({uri:a[0]},o),n.logInteraction(e.dragSort()))}),[s,n,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=ti({onApplyDrop:o});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[D.fl.TRACKS]:l=[],[D.fl.LOCAL_TRACKS]:s=[],[D.fl.ALBUMS]:o=[],[D.fl.EPISODES]:c=[],[D.fl.PLAYLISTS_V2]:u=[],[D.fl.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?d(i,j.Nz.ON):o.length?(r(o[0],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||s.length||c.length)&&(a([...l,...s,...c],g),n.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,n,e,a])}}var ma=r(80991),xa=r(79365),ha=r(87285),ba=r(80895),fa=r(43211),Sa=r(23258),Pa=r(22273);const va=({uri:e})=>{const[t,r]=(0,i.useState)(!1),a=(0,ma.x)(),n=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,ha.l)(xa.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===a.getDefaultCurationContextUri(t.data.uris[0])&&n()})),(0,fa.e)(ba.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&n()})),(0,Sa.b)(Pa.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,or.fpb)(e)&&n()})),{animateState:t,animateClassName:Or.A.pulse}};var Ca=r(3260),wa=r(10058);function Ia(e,t){const{uri:r,name:a,numberOfFolders:n,numberOfPlaylists:l,pinned:o}=e,{isPlaying:c,isActive:d}=(0,Vr.l_)(r),{pushFolder:u}=(0,i.useContext)(dr),p=(0,s.wA)(),{togglePlay:g,triggerPlay:y}=(0,_i.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),m=(0,s.d4)((e=>e.platform.isDesktop)),{handleDropOnFolder:x,unpinConfirmationDialog:b}=ya(t,r),{renameFolder:f}=(0,Ca.Z)(),S=x,P=[l>0||!n?h.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,n>0?h.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",n):null].filter(wa.P).join(h.Ru.getSeparator()),v=(0,i.useCallback)(((t="")=>{f(e,t)}),[e,f]),w=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,yr.OB)(r))}),[p,r]),togglePlay:m?g:void 0,triggerPlay:m?y:void 0,menu:(0,C.jsx)(ga,{reference:{uri:r},name:a,canPin:e.canPin,isPinned:o,onRename:v,isPlayable:!e.isEmpty}),subtitleText:P,onDropTargetDropOn:S,handleNavigate:w,dropOnFolderUnpinConfirmationDialog:b,isPlaying:c,isActive:d}}const Ta=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:a,index:l})=>{const{uri:s,folderDepth:o,name:c,type:d,isFlattened:u,pinned:p,canReorder:g}=e,{openDeleteDialog:y,togglePlay:m,triggerPlay:x,menu:b,subtitleText:f,onDropTargetDropOn:S,handleNavigate:P,dropOnFolderUnpinConfirmationDialog:w,isPlaying:I,isActive:T}=Ia(e,r),[R,A]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(mt);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(s),D=(0,v.s)(),j=(0,i.useCallback)((()=>{A(!0),D.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[D,A,r]),L=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),E=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),A(!R),R?D.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):D.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[A,R,D,r]),O=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?A(!1):"ArrowRight"===e.key&&A(!0)}),[A]),k=!u&&(0,C.jsx)(Fe.H,{"data-skip-in-keyboard-nav":!0,"aria-label":R?h.Ru.get("web-player.your-library-x.collapse-folder"):h.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:Qi.y,size:"small",condensedAll:!0,onClick:E,onDoubleClick:L,tabIndex:-1,className:n()(Pt,vt,{[Ot]:!R})}),{animateState:N,animateClassName:F}=va({uri:s}),B=(0,C.jsx)(Oi,{title:c,type:d,animateState:N,animateClassName:F,uri:s,isPlaying:I,spec:r,togglePlay:m});return(0,C.jsxs)(C.Fragment,{children:[w,(0,C.jsx)(Mi,{onKeyDown:O,RowVariantComponent:t,uri:s,to:`/folder/${(0,or.o_h)(s)?.id??""}`,handleNavigate:P,folderDepth:o,cover:B,name:c,subtitle:f,alt:c,dragLabel:c,menu:b,canReorder:g,allowedDropTargetDropOnMimeTypes:rr,onDropTargetDropOn:S,onLongDragOver:j,togglePlay:m,triggerPlay:x,openDeleteDialog:y,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:I,isActive:T,expandFolderButton:k,spec:r,nrValidItems:a,index:l})]})},Ra=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:a,type:n,pinned:l,canReorder:s}=e,{togglePlay:o,triggerPlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,handleNavigate:g,openDeleteDialog:y,isPlaying:m,isActive:x}=Ia(e,t),{animateState:h,animateClassName:b}=va({uri:i}),f=(0,C.jsx)(ki,{title:a,type:n,uri:i,togglePlay:o,spec:t,isActive:x,isPlaying:m});return(0,C.jsx)(vi,{uri:i,to:`/folder/${(0,or.o_h)(i)?.id??""}`,handleNavigate:g,cover:f,name:a,subtitle:u,menu:d,dragLabel:a,canReorder:s,allowedDropTargetDropOnMimeTypes:rr,onLongDragOver:g,onDropTargetDropOn:p,togglePlay:o,triggerPlay:c,isPinned:l,shouldShowType:!1,type:n,openDeleteDialog:y,isPlaying:m,isActive:x,spec:t,index:r,animateState:h,animateClassName:b})};var Aa=r(28530);const Da=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:a}=(0,R.o)(e);return(0,C.jsx)(P.pZ,{value:"generic",children:(0,C.jsxs)(y.W,{children:[i?(0,C.jsx)(Aa.d,{spec:a,uri:i}):null,t!==T.oT.NO&&(0,C.jsx)(ia.k,{uri:e,canPin:t,isPinned:r,type:vr.c.PLAYLIST,spec:a})]})})}));var ja=r(95052);const La=[D.fl.TRACKS,D.fl.LOCAL_TRACKS];function Ea(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:a}=(0,s.d4)(ja.Ht),n=(0,or.fHB)(a?.id).toURI(),l=n,o=n,{togglePlay:c,triggerPlay:d}=(0,_i.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),u=(0,Ht.f)(),{isPlaying:p,isActive:g}=(0,Vr.l_)(l),y=(0,i.useCallback)((e=>{const{[D.fl.TRACKS]:t=[],[D.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&u?.add({uris:i})}),[u]);return{isPlaying:p,isActive:g,togglePlay:c,triggerPlay:d,menu:(0,C.jsx)(Da,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:o}),downloadButton:(0,C.jsx)(xr.M,{uri:o,size:"xsmall",className:Or.A.icon,as:"span"}),subtitleText:(0,C.jsx)(C.Fragment,{children:h.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:y,playbackUri:l,uri:r,...va({uri:r})}}const Oa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{images:l,name:s,type:o,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:g,isActive:y,togglePlay:m,triggerPlay:x,menu:h,subtitleText:b,onDropTargetDropOn:f,playbackUri:S,uri:P,downloadButton:v,animateState:w,animateClassName:I}=Ea(e),T=(0,C.jsx)(Oi,{title:s,type:o,images:l,color:p,animateState:w,animateClassName:I,uri:P,isPlaying:g,spec:i,togglePlay:m});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:P,cover:T,name:s,subtitle:b,alt:s,dragLabel:s,menu:h,allowedDropTargetDropOnMimeTypes:La,onDropTargetDropOn:f,togglePlay:m,triggerPlay:x,addedAt:d,lastPlayedAt:u,isPlaying:g,isActive:y,isPinned:c,shouldShowType:t,type:o,playbackUri:S,downloadButton:v,spec:i,nrValidItems:a,index:n})},ka=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:a,name:n,type:l,pinned:s,color:o}=e,{togglePlay:c,triggerPlay:d,menu:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,downloadButton:x,isPlaying:h,isActive:b,animateState:f,animateClassName:S}=Ea(e),P=(0,C.jsx)(ki,{title:n,type:l,images:a,uri:y,togglePlay:c,color:o,spec:r,isActive:b,isPlaying:h});return(0,C.jsx)(vi,{uri:m,name:n,subtitle:p,menu:u,dragLabel:n,allowedDropTargetDropOnMimeTypes:La,onDropTargetDropOn:g,cover:P,togglePlay:c,triggerPlay:d,isPinned:s,shouldShowType:t,type:l,playbackUri:y,downloadButton:x,isPlaying:h,isActive:b,spec:r,index:i,animateState:f,animateClassName:S})};var Na=r(50482),Fa=r(14993),Ba=r(94648),Ma=r(66015);function Ua(e){const{numberOfFiles:t}=e,r=Ma.bV,i=(0,Ba.Iu)().uri,{isPlaying:a,isActive:n}=(0,Vr.l_)(r);return{playbackUri:r,uri:i,isPlaying:a,isActive:n,menu:(0,C.jsx)(Da,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,C.jsx)(Na.F,{size:"xsmall",className:Or.A.icon,semanticColor:"textBrightAccent"}),subtitleText:h.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const Va=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{name:l,addedAt:s,lastPlayedAt:o,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:g,menu:y,subtitleText:m,downloadButton:x,isActive:h}=Ua(e),b=(0,C.jsx)("div",{className:Ct,children:(0,C.jsx)(Fa.e,{iconSize:24,title:l})});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:p,name:l,subtitle:m,alt:l,dragLabel:l,menu:y,addedAt:s,lastPlayedAt:o,isPinned:d,isPlaying:g,isActive:h,shouldShowType:t,playbackUri:u,downloadButton:x,cover:b,type:c,spec:i,nrValidItems:a,index:n})},_a=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:a,images:n,type:l,pinned:s}=e,{playbackUri:o,uri:c,menu:d,downloadButton:u,subtitleText:p,isPlaying:g,isActive:y}=Ua(e),m=(0,C.jsx)("div",{className:bi,children:(0,C.jsx)(Ci.M,{images:n,FallbackComponent:e=>(0,C.jsx)(Fa.e,{size:"xxlarge",className:hi,...e})})});return(0,C.jsx)(vi,{uri:c,name:a,subtitle:p,menu:d,cover:m,type:l,playbackUri:o,downloadButton:u,isPinned:s,shouldShowType:t,isPlaying:g,isActive:y,spec:r,index:i})};var za=r(60858);const Ha=({index:e,type:t})=>{const r=yi();return(0,C.jsx)(za.T,{columnIndex:0,children:(0,C.jsx)(br.Z,{className:n()(mi,{[xi]:r}),media:(0,C.jsx)(Ci.M,{images:[],FallbackComponent:()=>(0,C.jsx)(ji.s,{type:t,size:"xxlarge",className:hi,semanticColor:"textSubdued"}),isCircular:t===vr.c.ARTIST}),variant:"naked",id:e,title:"",padding:r?fr.vw:fr.CJ})})};var Wa=r(14576),Xa=r(35848),Ka=r(26414),Ya=r(99532),Ga=r(68284),Za=r(6780),qa=r(24536),Ja=r(37832),$a=r(5820),Qa=r(9778),en=r(38244),tn=r(12652),rn=r(27415),an=r(90755),nn=r(63107),ln=r(30414),sn=r(45210),on=r(61944);const cn=i.memo((function({reference:e,isPublished:t,canPin:r=T.oT.NO,isPinned:i=!1,useDialogForUnfollow:a=!1,isInLibrary:n}){const{uri:l}=e,s=(0,sn.J)(l),o=!!s?.permissions?.isPrivate,c=(0,on.v)(l)??s?.isPublished??t,{spec:d}=(0,R.o)(l),u=s?.hasSpotifyAudiobooks;return s&&(0,C.jsx)(P.pZ,{value:"playlist",children:(0,C.jsxs)(y.W,{children:[!u&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(Ka.K,{spec:d,uris:[l]}),(0,C.jsx)(ln._,{uri:l,spec:d})]}),!o&&(0,C.jsx)(tn._,{spec:d,divider:s.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),s.isOwnedBySelf&&(0,C.jsx)(Za.T,{spec:d,uri:l,name:s.name,description:s.description,image:s.images[0]}),!s.isOwnedBySelf&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(rn.P,{spec:d,uri:l}),(0,C.jsx)(Xa.ET,{uri:l,useDialog:a,initialState:n})]}),s.isOwnedBySelf&&(0,C.jsx)(Ga.u,{spec:d,uri:l}),!u&&(0,C.jsx)(Aa.d,{spec:d,uri:l}),(0,C.jsx)(I,{position:{after:e},divider:"before",spec:d}),(0,C.jsx)(m.j,{position:{after:e},spec:d}),s.permissions?.canAdministratePermissions&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(en.U,{spec:d,divider:"before",uri:l,isPrivate:o}),!u&&(0,C.jsx)(Ja.n,{uri:l,spec:d})]}),s.permissions?.canCancelMembership&&(0,C.jsx)($a._,{spec:d,divider:"before",uri:l}),(0,C.jsx)(qa.w,{spec:d,uri:l}),(0,C.jsx)(ua.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,C.jsx)(an.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==T.oT.NO||i)&&(0,C.jsx)(ia.k,{uri:l,canPin:r,isPinned:i,type:vr.c.PLAYLIST,spec:d}),(s.isOwnedBySelf||!o)&&(0,C.jsxs)(nn.h,{divider:"before",children:[(0,C.jsx)(Ya.m,{spec:d,uri:l,displayText:h.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:o}),(0,C.jsx)(Qa.x,{spec:d,uri:l,type:vr.c.PLAYLIST})]})]})})})),dn=i.memo((function({reference:e,canPin:t=T.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:a}=(0,R.o)(i);return(0,C.jsx)(P.pZ,{value:"playlist",children:(0,C.jsxs)(y.W,{children:[(0,C.jsx)(I,{position:{after:e},divider:"before",spec:a}),(0,C.jsx)(m.j,{position:{after:e},spec:a}),t!==T.oT.NO&&(0,C.jsx)(ia.k,{uri:i,canPin:t,isPinned:r,type:vr.c.PLAYLIST,spec:a})]})})}));var un=r(43915);function pn(e,t){const{uri:r,isLoading:a,owner:n,pinned:l}=e,o=(0,un.m)(),{filter:c}=(0,i.useContext)(q.g),d=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.EPISODES],u=[D.fl.AUDIOBOOKS];(0,i.useEffect)((()=>{a&&o.resync(r)}),[o,r,a]);const{togglePlay:p,triggerPlay:g}=(0,_i.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:m,isActive:x}=(0,Vr.l_)(r),b=(0,s.wA)(),f=(0,v.s)();let S,P=[];const w=(0,i.useCallback)((async e=>{const{[D.fl.TRACKS]:i=[],[D.fl.LOCAL_TRACKS]:a=[],[D.fl.ALBUMS]:n=[],[D.fl.EPISODES]:l=[],[D.fl.AUDIOBOOKS]:s=[]}=e,o=[...i,...a,...n,...l,...s];b((0,Wa.io)(r,o)),f.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:o.at(0)??"",playlist:r}))}),[b,f,t,r]);e.canAddTo&&(P=e.isEmpty?[...u,...d]:e.isBooklist?u:d,S=w);const I=(0,i.useCallback)((()=>{b((0,yr.O)(r))}),[b,r]),T=(0,gr.c0)(r),R=a&&!e.name;let A;A=T?(0,C.jsx)(dn,{reference:e,canPin:e.canPin,isPinned:l}):R?(0,C.jsx)(y.W,{children:(0,C.jsx)(Xa.ET,{uri:r,initialState:!0})}):(0,C.jsx)(cn,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const j=(0,C.jsx)(xr.M,{uri:r,size:"xsmall",className:Or.A.icon,as:"span"}),L=(0,gr.c0)(r)?(0,C.jsx)(C.Fragment,{children:h.Ru.get("ylx.clicktoplay")}):(n.uri,(0,C.jsx)(hr.M,{searchWords:[c.trim()],textToHighlight:n.name})),E=!!(0,gr.c0)(r)||!e.isBooklist&&!e.isEmpty;return{openDeleteDialog:I,togglePlay:E?p:void 0,triggerPlay:E?g:void 0,isPlaying:m,isActive:x,menu:A,downloadButton:j,subtitleText:L,allowedDropTargetDropOnMimeTypes:P,onDropTargetDropOn:S,...va({uri:r})}}const gn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,folderDepth:o,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:g,color:y,canReorder:m,namePrefix:x}=e,{openDeleteDialog:h,togglePlay:b,triggerPlay:f,isPlaying:S,isActive:P,menu:v,downloadButton:w,subtitleText:I,allowedDropTargetDropOnMimeTypes:T,onDropTargetDropOn:R,animateState:A,animateClassName:D}=pn(e,i),j=(0,C.jsx)(Oi,{title:c,type:d,images:s,color:y,animateState:A,animateClassName:D,uri:l,isPlaying:S,togglePlay:b,spec:i});return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Mi,{RowVariantComponent:r,uri:l,folderDepth:o,cover:j,name:c,namePrefix:x,subtitle:I,alt:c,dragLabel:c,menu:v,canReorder:m,allowedDropTargetDropOnMimeTypes:T,onDropTargetDropOn:R,togglePlay:b,triggerPlay:f,openDeleteDialog:h,addedAt:p,lastPlayedAt:g,isPlaying:S,isActive:P,isPinned:u,shouldShowType:t,type:d,downloadButton:w,spec:i,playInsteadOfNavigating:(0,gr.c0)(l),nrValidItems:a,index:n})})},yn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c,canReorder:d,namePrefix:u}=e,{togglePlay:p,triggerPlay:g,menu:y,downloadButton:m,subtitleText:x,onDropTargetDropOn:h,allowedDropTargetDropOnMimeTypes:b,openDeleteDialog:f,isPlaying:S,isActive:P,animateState:v,animateClassName:w}=pn(e,r),I=(0,C.jsx)(ki,{title:l,type:s,images:n,uri:a,togglePlay:p,color:c,spec:r,isActive:P,isPlaying:S});return(0,C.jsx)(vi,{uri:a,name:l,namePrefix:u,subtitle:x,menu:y,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:b,onDropTargetDropOn:h,cover:I,togglePlay:p,triggerPlay:g,isPinned:o,shouldShowType:t,type:s,downloadButton:m,openDeleteDialog:f,isPlaying:S,isActive:P,spec:r,playInsteadOfNavigating:(0,gr.c0)(a),index:i,animateState:v,animateClassName:w})};var mn=r(58850),xn=r(25489),hn=r(19516),bn=r(57158);const fn=i.memo((function({uri:e,canPin:t=T.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:a}=(0,R.o)(e);return(0,C.jsx)(P.pZ,{value:"audiobook",children:(0,C.jsxs)(y.W,{children:[i&&(0,C.jsx)(bn.p,{uri:e,removeLabel:h.Ru.get("contextmenu.remove-from-library")}),t!==T.oT.NO&&(0,C.jsx)(ia.k,{uri:e,canPin:t,isPinned:r,type:vr.c.PRE_RELEASE_BOOK,spec:a}),(0,C.jsx)(Ya.m,{uri:e,spec:a,displayText:h.Ru.get("context-menu.copy-book-link")}),(0,C.jsx)(hn.q,{spec:a,divider:"before",uri:e})]})})}));function Sn(e){const{uri:t,canPin:r,pinned:a,type:n}=e,{filter:l}=(0,i.useContext)(q.g),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{o((0,yr.aw)(t,!0))}),[o,t]);let d,u="";if(n===vr.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,C.jsx)(xn.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:a,canRemove:!0})}else u=e.authorName,d=(0,C.jsx)(fn,{uri:t,canPin:r,isPinned:a,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,C.jsx)(hr.M,{searchWords:[l.trim()],textToHighlight:u})}}const Pn=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{openDeleteDialog:y,menu:m,subtitleText:x}=Sn(e),h=(0,C.jsx)(Oi,{title:o,type:d,images:s,color:g,uri:l,isPlaying:!1,spec:i,togglePlay:void 0});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:l,cover:h,name:o,subtitle:x,alt:o,type:d,dragLabel:o,menu:m,openDeleteDialog:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:a,index:n,preReleaseIcon:(0,C.jsx)(mn.t,{size:"xsmall",className:Or.A.icon})})},vn=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:a,images:n,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=Sn(e),g=(0,C.jsx)(ki,{title:l,type:o,images:n,uri:a,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:u,menu:d,dragLabel:l,cover:g,type:o,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,C.jsx)(mn.t,{size:"xsmall",className:Or.A.icon})})};var Cn=r(1467);function wn(e){const{uri:t,publisher:r}=e,{filter:a}=(0,i.useContext)(q.g),n=(0,s.wA)(),{togglePlay:l,triggerPlay:o}=(0,_i.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:c,isActive:d}=(0,Vr.l_)(t);return{isPlaying:c,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{n((0,yr.aw)(t))}),[n,t]),togglePlay:l,triggerPlay:o,menu:(0,C.jsx)(Cn.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,C.jsx)(xr.M,{uri:t,size:"xsmall",className:Or.A.icon,as:"span"}),subtitleText:(0,C.jsx)(hr.M,{autoEscape:!0,searchWords:[a.trim()],textToHighlight:r})}}const In=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:x,togglePlay:h,triggerPlay:b,menu:f,downloadButton:S,subtitleText:P}=wn(e),v=(0,C.jsx)(Oi,{title:o,type:c,images:s,color:g,uri:l,isPlaying:y,spec:i,togglePlay:h});return(0,C.jsx)(Mi,{RowVariantComponent:r,uri:l,cover:v,name:o,subtitle:P,alt:o,dragLabel:o,menu:f,togglePlay:h,triggerPlay:b,openDeleteDialog:x,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:m,isPinned:p,shouldShowType:t,type:c,downloadButton:S,spec:i,nrValidItems:a,index:n})},Tn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:a,images:n,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,downloadButton:g,subtitleText:y,openDeleteDialog:m,isPlaying:x,isActive:h}=wn(e),b=(0,C.jsx)(ki,{title:l,type:s,images:n,uri:a,togglePlay:d,color:c,spec:r,isActive:h,isPlaying:x});return(0,C.jsx)(vi,{uri:a,name:l,subtitle:y,menu:p,dragLabel:l,cover:b,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,type:s,downloadButton:g,openDeleteDialog:m,isPlaying:x,isActive:h,spec:r,index:i})},Rn=[D.fl.EPISODES];function An(e){const{numberOfDownloadedEpisodes:t,uri:r}=e,a=(0,d.NC)(ve.ucV,{loadingValue:!1}),{user:n}=(0,s.d4)(ja.Ht),l=(0,or.fHB)(n?.id,"your-episodes").toURI(),o=a?r:l,c=T.Xn,{togglePlay:u,triggerPlay:p}=(0,_i.P)({uri:o},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:g,isActive:y}=(0,Vr.l_)(o),m=(0,Ht.f)(),x=(0,i.useCallback)((e=>{const{[D.fl.EPISODES]:t=[]}=e;t?.length&&m?.add({uris:t})}),[m]);return{isPlaying:g,isActive:y,togglePlay:u,triggerPlay:p,menu:(0,C.jsx)(Da,{uri:c,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,C.jsx)(Na.F,{size:"xsmall",className:Or.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:h.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:x,playbackUri:o,uri:c,...va({uri:c})}}const Dn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:a})=>{const{images:n,name:l,type:s,pinned:o,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:g,togglePlay:y,triggerPlay:m,menu:x,downloadButton:h,subtitleText:b,onDropTargetDropOn:f,playbackUri:S,uri:P,animateState:v,animateClassName:w}=An(e),I=(0,C.jsx)(Oi,{title:l,type:s,images:n,color:u,animateState:v,animateClassName:w,uri:P,isPlaying:p,spec:r,togglePlay:y});return(0,C.jsx)(Mi,{RowVariantComponent:t,uri:P,cover:I,name:l,subtitle:b,alt:l,dragLabel:l,menu:x,allowedDropTargetDropOnMimeTypes:Rn,onDropTargetDropOn:f,togglePlay:y,triggerPlay:m,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:g,isPinned:o,shouldShowType:!1,type:s,downloadButton:h,playbackUri:S,spec:r,nrValidItems:i,index:a})},jn=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:a,type:n,pinned:l,color:s}=e,{togglePlay:o,triggerPlay:c,menu:d,downloadButton:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,isPlaying:x,isActive:h,animateState:b,animateClassName:f}=An(e),S=(0,C.jsx)(ki,{title:a,type:n,images:i,uri:m,togglePlay:o,color:s,spec:t,isActive:h,isPlaying:x});return(0,C.jsx)(vi,{uri:m,name:a,subtitle:p,menu:d,dragLabel:a,allowedDropTargetDropOnMimeTypes:Rn,onDropTargetDropOn:g,cover:S,togglePlay:o,triggerPlay:c,playbackUri:y,downloadButton:u,isPinned:l,shouldShowType:!1,type:n,isPlaying:x,isActive:h,spec:t,index:r,animateState:b,animateClassName:f})};function Ln(){const[e,t]=(0,Se.x)("ylx-grid-scale",1);return{gridScale:e,setGridScale:t}}var En=r(50142),On=r(83158),kn=r(64091);const Nn=({span:e,onInView:t,marginBottom:r,marginTop:a})=>{const n=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return n.current&&e.observe(n.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,C.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:r,marginTop:a},ref:n,"data-type":"sentinel"},"topSentinel")},Fn=({renderItems:e,nrItems:t,estimatedItemMaxHeight:r,scrollNodeRef:a,nrRowsOverscan:n=5,initalNrRows:l=5,onGridResize:s})=>{const[o,c]=(0,i.useState)({firstRowToRender:0,nrRows:l+n}),d=(0,i.useRef)(0),u=(0,i.useRef)(null),p=(0,i.useRef)(r),g=(0,i.useCallback)((()=>{const e=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');p.current=e?e.getBoundingClientRect().height:p.current}),[]),y=(0,i.useCallback)((()=>{const e=a.current;if(!e)return;g();const t=Math.floor((e.scrollTop-d.current)/p.current),r=Math.max(t-n,0),i=Math.ceil(e.offsetHeight/p.current)+2*n;r===o.firstRowToRender&&i===o.nrRows||c({firstRowToRender:r,nrRows:i})}),[n,o,a,g]),m=(0,i.useCallback)((({columnCount:r})=>{if(r<=0)return[null];s&&s(r,p.current);const i=Math.ceil(t/r),a=o.firstRowToRender*r,l=o.firstRowToRender+o.nrRows-1,c=Math.min(t-1,(l+1)*r-1),d=p.current*(n-2);return[(0,C.jsx)(Nn,{span:o.firstRowToRender,onInView:y,marginBottom:`-${d}px`},`topSentinel-${o.firstRowToRender}`),e(a,c,r),(0,C.jsx)(Nn,{span:i-l,onInView:y,marginTop:`-${d}px`},"bottomSentinel-"+(i-l))]}),[t,n,s,y,e,o]);return(0,i.useEffect)((()=>{const e=u.current,t=a.current;e&&t&&(d.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[a]),(0,C.jsx)(kn.E,{useUniformRowHeight:!0,ref:u,render:m,onLayoutChange:g})},Bn=(0,W.g)(vr.c),Mn=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const a={shouldShowType:!(0,gr.c0)(e.uri)&&(Tr(e.type)!==t||Ir(e)),spec:r,index:i},n=(0,d.NC)(ve.lDH);switch(e.type){case vr.c.FOLDER:return(0,C.jsx)(Ra,{libraryItem:e,...a});case vr.c.ALBUM:return(0,C.jsx)(Wi,{libraryItem:e,...a});case vr.c.ARTIST:return(0,C.jsx)(Gi,{libraryItem:e,...a});case vr.c.AUDIOBOOK:return(0,C.jsx)($i,{libraryItem:e,...a});case vr.c.SHOW:return(0,C.jsx)(Tn,{libraryItem:e,...a});case vr.c.PLAYLIST:return(0,C.jsx)(yn,{libraryItem:e,...a});case vr.c.LIKED_SONGS:return(0,C.jsx)(ka,{libraryItem:e,...a});case vr.c.YOUR_EPISODES:return(0,C.jsx)(jn,{libraryItem:e,...a});case vr.c.LOCAL_FILES:return(0,C.jsx)(_a,{libraryItem:e,...a});case vr.c.PRE_RELEASE_ALBUM:return n?(0,C.jsx)(vn,{libraryItem:e,...a}):null;case vr.c.PRE_RELEASE_BOOK:return(0,C.jsx)(vn,{libraryItem:e,...a});default:(0,Cr.d)(e)}})),Un=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const{gridScale:l}=Ln(),s=(0,On.s1)(On.yV.YLX,l),o=(0,i.useRef)({}),c=function(){const{gridScale:e}=Ln();return e<.8}(),d=(0,i.useCallback)((e=>(0,C.jsx)(Ha,{index:e,type:Bn(r)?r:void 0},e)),[r]),u=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const a=t+i;return e?(0,C.jsx)(Mn,{item:e,spec:n,primaryFilter:r,index:a},`${e.uri}-${a}`):d(`${a}`)}))),[e,r,d,n]),p=(0,i.useCallback)(((e,t)=>{o.current={numColumns:e,rowHeight:t}}),[]);return(0,C.jsx)(En.x,{config:s,children:(0,C.jsx)(gi,{isCompact:c,children:(0,C.jsx)(pr.R,{firstInteractiveIsWrapper:!0,"aria-label":h.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(a/(o.current.numColumns??1)),"aria-colcount":o.current.numColumns,children:(0,C.jsx)(Fn,{renderItems:u,nrItems:a,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:p})})})})};var Vn=r(22717),_n=r(6575);const zn="main-yourLibraryX-header",Hn="main-yourLibraryX-collapseButtonWrapper",Wn="main-yourLibraryX-headerContent",Xn="iYP0xuQiJCgi7gx1jUPJ",Kn="main-yourLibraryX-collapseButton",Yn="main-yourLibraryX-button",Gn="af749NDLYTDK_8LinKWD",Zn="nGWhztVvLY1BInXjcWYa",qn="oZT8iKL42zhLAm_zE5F5",Jn="MdDY8fQ_j94mQZy7ZVXf",$n="uNReR011bI8ML42Pgveg",Qn=e=>{switch(e){case Ue.fX.EXPANDED:return"expanded";case Ue.fX.COLLAPSED:return"collapsed";case Ue.fX.DEFAULT:return"default";default:throw(0,Cr.k)(e)}},el=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:a,ylxSidebarState:l,setYlxSidebarState:s,lastUncollapsedYlxSidebarState:o}=(0,Ue.$)(),c=(0,v.s)(),d=(0,i.useCallback)((()=>{const e=l===Ue.fX.COLLAPSED?o:Ue.fX.COLLAPSED;s(e),c.logInteraction(r.hitToggleState({stateBeforeToggle:Qn(l),stateAfterToggle:Qn(e)}))}),[l,o,s,c,r]),u=a?Vn.M:_n.A;return(0,C.jsx)(Me.Zp,{label:a?h.Ru.get("web-player.your-library-x.expand-your-library"):h.Ru.get("web-player.your-library-x.collapse-your-library"),placement:a?"right":void 0,children:(0,C.jsx)(Fe.H,{"aria-label":a?h.Ru.get("web-player.your-library-x.expand-your-library"):h.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:d,className:n()(Hn,Yn,t),condensed:!0,iconLeading:e||a?void 0:u,iconOnly:e||a?u:void 0,children:!e&&!a&&h.Ru.get("web-player.your-library-x.your-library")})})};var tl=r(53249),rl=r(10108),il=r(94933);const al=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,S.A)(),{createFolder:i}=(0,Ca.Z)(),a=(0,v.s)(),n=(0,Re.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,C.jsxs)(y.W,{children:[(0,C.jsx)(b.D,{onClick:()=>{r(void 0,l),a.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,C.jsx)(x.u,{size:"small"}),children:h.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!n&&(0,C.jsx)(b.D,{onClick:()=>{i(h.Ru.get("web-player.your-library-x.default_folder_name"),l),a.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,C.jsx)(il.h,{size:"small"}),children:h.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},nl=({className:e="",folderUri:t,tooltipPlacement:r,spec:a})=>{const l=h.Ru.get("web-player.your-library-x.create.button-label"),s=(0,v.s)(),{createPlaylistFromAlbum:o,createPlaylistFromTracks:c,createPlaylistFromPlaylist:d}=(0,S.A)(),{className:u,dropPosition:p,...g}=(0,L.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:[D.fl.TRACKS,D.fl.EPISODES,D.fl.ALBUMS,D.fl.PLAYLISTS_V2,D.fl.AUDIOBOOKS]},onDrop:(0,i.useCallback)((e=>{const{[D.fl.TRACKS]:r=[],[D.fl.LOCAL_TRACKS]:i=[],[D.fl.EPISODES]:a=[],[D.fl.AUDIOBOOKS]:n=[],[D.fl.ALBUMS]:l=[],[D.fl.PLAYLISTS_V2]:s=[]}=e,u=t?{after:{uri:t}}:{before:"start"},p=[...r,...i,...a];n.length>0?c(n,u):p.length?c(p,u):l.length>0?o(l[0],u):s.length>0&&d(s[0],u)}),[o,d,c,t])});return(0,C.jsx)(rl.t,{renderInline:!0,menu:(0,C.jsx)(al,{folderUri:t,spec:a.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,i,o)=>(0,C.jsx)(Me.Zp,{label:l,placement:r,children:(0,C.jsx)(Fe.H,{ref:o,iconOnly:tl.u,className:n()(e,u,{[Xt]:p===j.Nz.ON}),"aria-label":l,onClick:e=>{i(e),s.logInteraction(a.hitUiReveal())},size:"small",...g})})})};var ll=r(43234),sl=r(84121);const ol=({dropTargetClassName:e,spec:t})=>{const{ylxSidebarState:r,setYlxSidebarState:i}=(0,Ue.$)(),a=r===Ue.fX.DEFAULT,l=(0,v.s)();return(0,C.jsx)(Me.Zp,{label:a?h.Ru.get("web-player.your-library-x.show-more"):h.Ru.get("web-player.your-library-x.show-less"),children:(0,C.jsx)(Fe.H,{className:n()(Yn,Zn,e),iconOnly:a?ll.h:sl.G,"aria-label":a?h.Ru.get("web-player.your-library-x.enlarge-your-library"):h.Ru.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{i(a?Ue.fX.EXPANDED:Ue.fX.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:a?"default":"expanded",stateAfterToggle:a?"expanded":"default"}))},size:"small"})})};var cl=r(87123);const dl=({handleNavigateBack:e,parentFolderUri:t,spec:r})=>{const{handleDropBeforeOrAfterRootlistItem:i}=li({dropTargetUri:t,spec:r}),{dropPosition:a,className:l,...s}=(0,L.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:er},onDrop:async e=>{i(e,j.Nz.BEFORE)},onLongDragOver:e});return(0,C.jsx)(Me.Zp,{label:h.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,C.jsx)(Fe.H,{className:n()(Yn,Gn,l,{[Xt]:a===j.Nz.ON}),"aria-label":h.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:cl.g,size:"small",...s})})};var ul=r(62666),pl=r(44979);const gl=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,C.jsx)(pl.b,{menu:e,children:(0,C.jsx)("span",{children:(0,C.jsx)(Me.Zp,{label:h.Ru.get("more.label.context",t),children:(0,C.jsx)(Fe.H,{className:n()(Yn,Zn,r),iconOnly:ul.x,"aria-haspopup":"menu","aria-label":h.Ru.get("more.label.context",t),size:"small"})})})}),yl=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:a,spec:l,className:o},c){const{isActive:d}=(0,Vr.l_)(e??"not-a-folder"),u=(0,s.wA)(),p=(0,v.s)(),y=(0,i.useCallback)((()=>{u((0,yr.O2)(t,a)),p.logInteraction(l.hitRenameFolder({uri:e}))}),[u,t,e,p,a,l]);return(0,C.jsx)(Me.Zp,{label:t,showDelay:Me.uF,children:(0,C.jsx)("div",{className:n()(Jn,o),children:(0,C.jsx)(g.h,{menu:r,children:(0,C.jsx)(Fe.H,{"aria-label":t,onClick:y,size:"small",condensed:!0,className:n()(Yn),ref:c,children:(0,C.jsx)(Ie.E,{variant:"bodyMediumBold",semanticColor:d?"textBrightAccent":void 0,className:$n,children:t})})})})})}));var ml=r(49382),xl=r(22157),hl=r(96165);const bl="fJrnaZd0QWm65978IgD2",fl="yCpl0fAaEYj7E8F_Oabw",Sl=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:a}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=xl.I.UPDATE_TOTAL_PROGRESS,a=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,hl.b)(r,a),e}();return e?(0,C.jsxs)("div",{className:bl,children:[(0,C.jsxs)("div",{className:fl,children:[(0,C.jsx)(Ie.E,{variant:"bodySmallBold",semanticColor:"textBase",children:h.Ru.get("web-player.your-library-x.download-progress-title")}),(0,C.jsx)(Ie.E,{variant:"bodySmallBold",semanticColor:"textBase",children:h.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,a)})]}),(0,C.jsx)(ml.z,{value:t})]}):null};const Pl=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:a,spec:l,openedFolderIsPlayable:s})=>{const{isCollapsed:o,ylxSidebarState:d,canExpand:u}=(0,Ue.$)(),{renameFolder:p}=(0,Ca.Z)(),{popFolder:g}=(0,i.useContext)(dr),y=(0,i.useCallback)(((e="")=>{r&&p({uri:r},e)}),[r,p]),m=(0,i.useCallback)((()=>{g()}),[g]),x=r?(0,C.jsx)(ga,{reference:{uri:r},name:a,onRename:y,onDeleteCallback:m,isPlayable:s}):null,{dropOriginIsYLX:h}=ri(),b=!o&&r&&void 0!==a,f=(0,i.useRef)(null),S=(0,i.useRef)(null),P=(0,i.useRef)(null);!function(e,t,r,...a){const n=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,a=r>i;e.current.style.display=a?"none":"block"}else e.current.style.display="block"}),[a]);(0,i.useLayoutEffect)(n,[n]),(0,Li.w)({refOrElement:r,observeOnly:"width",onResize:n})}(P,(0,i.useMemo)((()=>({get current(){return S.current?.firstElementChild instanceof HTMLElement?S.current?.firstElementChild:null}})),[]),f,a,b);const v=!o||t&&o;return(0,C.jsxs)("header",{className:n()(zn,{[qn]:o}),ref:f,children:[!o&&(0,C.jsx)(Sl,{}),(0,C.jsxs)("div",{className:n()(Wn,{[Xn]:o}),children:[(0,C.jsxs)("div",{className:n()(Kn,{[Xn]:o}),children:[(0,C.jsx)(el,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory({identifier:""})}),r&&(0,C.jsx)(dl,{handleNavigateBack:m,parentFolderUri:r,spec:l.folderBackButtonFactory()}),b&&(0,C.jsx)(yl,{folderUri:r,folderName:a,folderMenu:x,onRename:y,spec:l.folderTitleFactory(),className:h?e:void 0,ref:S},r)]}),v&&(0,C.jsx)("span",{ref:P,children:(0,C.jsx)(nl,{className:n()(Yn,Zn),folderUri:r,tooltipPlacement:o?"right":void 0,spec:l.createMenuButtonFactory()})}),r&&!o&&(0,C.jsx)(gl,{folderName:a,folderMenu:x,dropTargetClassName:e}),(d===Ue.fX.DEFAULT&&u||d===Ue.fX.EXPANDED)&&(0,C.jsx)(ol,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory({identifier:""})})]})]})};var vl=r(89916),Cl=r(96930),wl=r(95763);const Il=({date:e})=>(0,C.jsx)(Ie.E,{variant:"bodySmall",semanticColor:"textSubdued",className:Dt,children:e&&h.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),Tl=e=>{const t=e.handleNavigate,r=(0,C.jsx)(Gr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,C.jsx)(Dr,{})),a=(0,C.jsx)(kr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ui.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Rr,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType})}),uri:e.uri}),n=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:n,children:(0,C.jsx)(Pr.E,{uri:e.uri,trigger:Pr.l.OnMouseDown,children:(0,C.jsx)(Cl.v,{className:ht,media:e.cover,title:r,subtitle:a,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:fr.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})})},Rl=e=>{const t=e.handleNavigate,r=(0,C.jsx)(Gr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,C.jsx)(kr,{leading:(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(ui.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,C.jsx)(Rr,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType}),uri:e.uri}),a=e.logRightClick;return(0,C.jsx)(jr,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,C.jsxs)("div",{children:[(0,C.jsx)(g.h,{menu:e.menu,onShow:a,children:(0,C.jsx)(Pr.E,{uri:e.uri,trigger:Pr.l.OnMouseDown,children:(0,C.jsx)(Cl.v,{className:n()(ht,ft),media:e.cover,id:e.uri,padding:fr.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,C.jsxs)("span",{className:Ft,children:[r," ",i]})]})})},Al=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:r,children:(0,C.jsxs)("div",{className:At,ref:t,children:[(0,C.jsx)(Tl,{...e,parentRef:t}),(0,C.jsx)(Il,{date:e.addedAt}),(0,C.jsx)(Il,{date:e.lastPlayedAt})]})})},Dl=e=>{const t=e.handleNavigate,r=(0,C.jsxs)("div",{className:Et,children:[(0,C.jsx)(Gr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(wl.v,{children:"•"}),(0,C.jsx)(wl.v,{lineClamp:1,children:wr(e.type,e.specialType)})]}),(!e.shouldShowType&&e.type===vr.c.ALBUM||(0,gr.c0)(e.uri))&&(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(wl.v,{children:"•"}),(0,C.jsx)(kr,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,C.jsx)(ui.g,{pinned:e.isPinned}),a=e.expandFolderButton??(e.isPlaying?(0,C.jsx)(Dr,{iconSize:"xsmall"}):(0,C.jsxs)(C.Fragment,{children:[e.downloadButton&&(0,C.jsx)("div",{className:Pt,children:e.downloadButton}),e.preReleaseIcon&&(0,C.jsx)("div",{className:Pt,children:e.preReleaseIcon}),e.lockedIcon&&(0,C.jsx)("div",{className:Pt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:l,children:(0,C.jsx)(Pr.E,{uri:e.uri,trigger:Pr.l.OnMouseDown,children:(0,C.jsx)(Cl.v,{className:n()(ht,bt),title:r,leading:e.isPinned?i:void 0,trailing:a,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${fr.vw} ${fr.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},jl=e=>{const t=e.logRightClick;return(0,C.jsx)(g.h,{menu:e.menu,onShow:t,children:(0,C.jsxs)("div",{className:At,children:[(0,C.jsx)(Dl,{...e}),(0,C.jsx)(Il,{date:e.addedAt}),(0,C.jsx)(Il,{date:e.lastPlayedAt})]})})},Ll=({height:e,isCompact:t,primaryFilter:r})=>(0,C.jsx)(Ni.c,{className:n()({[wt]:!t,[Tt]:t,[It]:r===vr.c.ARTIST}),style:{height:e}});let El=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const Ol=()=>{const[e,t]=(0,Se.x)("library-row-mode",El.DEFAULT),r=(0,Ue.vW)();return{libraryRowMode:e,setLibraryRowMode:t,rowHeight:e===El.DEFAULT||r===Ue.fX.COLLAPSED?64:32}};var kl=r(42581);const Nl=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:a,index:n,ylxIsCompact:l}){const s={shouldShowType:!(0,gr.c0)(e.uri)&&(Tr(e.type)!==t||Ir(e)&&!l),RowVariantComponent:r,spec:i,nrValidItems:a,index:n},o=(0,d.NC)(ve.lDH);switch(e.type){case vr.c.FOLDER:return(0,C.jsx)(Ta,{libraryItem:e,...s});case vr.c.ALBUM:return(0,C.jsx)(Hi,{libraryItem:e,...s});case vr.c.ARTIST:return(0,C.jsx)(Yi,{libraryItem:e,...s});case vr.c.AUDIOBOOK:return(0,C.jsx)(Ji,{libraryItem:e,...s});case vr.c.SHOW:return(0,C.jsx)(In,{libraryItem:e,...s});case vr.c.PLAYLIST:return(0,C.jsx)(gn,{libraryItem:e,...s});case vr.c.LIKED_SONGS:return(0,C.jsx)(Oa,{libraryItem:e,...s});case vr.c.YOUR_EPISODES:return(0,C.jsx)(Dn,{libraryItem:e,...s});case vr.c.LOCAL_FILES:return(0,C.jsx)(Va,{libraryItem:e,...s});case vr.c.PRE_RELEASE_ALBUM:return o?(0,C.jsx)(Pn,{libraryItem:e,...s}):null;case vr.c.PRE_RELEASE_BOOK:return(0,C.jsx)(Pn,{libraryItem:e,...s});default:(0,Cr.d)(e)}})),Fl=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:a,spec:n})=>{const l=(0,Ue.vW)(),{rowHeight:s,libraryRowMode:o}=Ol(),c=o===El.COMPACT,d=((e,t)=>{switch(e){case Ue.fX.COLLAPSED:return Rl;case Ue.fX.DEFAULT:return t?Dl:Tl;case Ue.fX.EXPANDED:return t?jl:Al;default:(0,Cr.d)(e)}})(l,c),u=(0,i.useCallback)(((e,t)=>(0,C.jsx)(Ll,{height:e,isCompact:c,primaryFilter:r},t)),[c,r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const l=t+i;return e?(0,C.jsx)(Nl,{item:e,spec:n,RowVariantComponent:d,primaryFilter:r,nrValidItems:a,index:l,ylxIsCompact:c},`${e.uri}-${l}`):u(`${s}px`,`${l}`)}))),[e,n,d,r,a,c,u,s]);return(0,C.jsx)(vl.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":h.Ru.get("web-player.your-library-x.your-library"),children:(0,C.jsx)(kl.L,{renderRows:p,nrRows:a,rowHeight:s,scrollNodeRef:t,renderPlaceholder:u})})};var Bl=r(21743),Ml=r(61762),Ul=r(84124),Vl=r(3638),_l=r(1205),zl=r(95255);const Hl=(e,t)=>{const{notifyShowInterest:r,notifyHideInterest:a,events:n}=(0,i.useContext)(ie);return{events:n,notifyShowInterest:(0,i.useCallback)((()=>{r(e,t)}),[e,r,t]),notifyHideInterest:(0,i.useCallback)((()=>{a(e,t)}),[e,a,t])}};var Wl=r(14903);function Xl({children:e,content:t,itemKey:r,priority:a,offset:n,placement:l,isInterestedInBeingShown:s,onVisibilityDenied:o,onVisibilityGranted:c}){const{isVisible:d}=function(e,t,r){const a=t.isInterestedInBeingShown,n=()=>{},l=(0,Wl.A)(t.onVisibilityGranted??n),s=(0,Wl.A)(t.onVisibilityDenied??n),[o,c]=(0,i.useState)(!1),{notifyShowInterest:d,notifyHideInterest:u,events:p}=Hl(e,r);return(0,i.useEffect)((()=>{const t=p.addListener(te.VISIBILITY_GRANTED,(t=>{t.data.key===e&&(l(),c(!0))})),r=p.addListener(te.VISIBILITY_DENIED,(t=>{t.data.key===e&&(s(),c(!1))}));return()=>{t(),r()}}),[p,e,l,s]),(0,i.useEffect)((()=>{a?d():u()}),[u,d,a]),(0,i.useEffect)((()=>u),[u]),{isVisible:o}}(r,{isInterestedInBeingShown:s,onVisibilityDenied:o,onVisibilityGranted:c},a);return(0,C.jsx)(zl.E,{content:t,isVisible:d,offset:n,placement:l,children:e})}var Kl=r(1127),Yl=r(56994),Gl=r(37104),Zl=r(58274);const ql=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),a=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===Zl.O.UP){const r=a?.[a.length-1],n=e.previousElementSibling,l=i?.previousElementSibling?.previousElementSibling;if(t instanceof HTMLUListElement||!l){if(n&&n instanceof HTMLUListElement)return n;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:a?.[0]}}},Jl="UsP6uSRooAI9fdTmoQ7C",$l="ktFXPl3NAYBjLv6hsC6Y",Ql="hjCFCSfuAdwhiVs2Rfs7",es=[{itemsViewState:Gl.X.LIST,compactModeState:El.COMPACT},{itemsViewState:Gl.X.LIST,compactModeState:El.DEFAULT},{itemsViewState:Gl.X.GRID,compactModeState:El.DEFAULT}],ts=(e,t,r)=>Math.round((e+t)*r)/r,rs=e=>e.itemsViewState===Gl.X.GRID?h.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===El.COMPACT?h.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):h.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),is=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:a,sortOptions:n,spec:l,id:s})=>{const o=(0,v.s)(),c=(0,i.useCallback)((e=>e.itemsViewState===Gl.X.GRID?(0,C.jsx)(Ml.D,{size:"small"}):e.compactModeState===El.COMPACT?(0,C.jsx)(Ul.d,{size:"small"}):(0,C.jsx)(Vl.N,{size:"small"})),[]),{gridScale:d,setGridScale:u}=Ln(),p=e=>{const t=ts(e,.5,100);u(t),o.logInteraction(l.gridDensitySliderFactory().dragSetSliderPosition({position:t}))},g=(0,i.useCallback)((e=>{u(e),o.logInteraction(l.gridDensitySliderFactory().hitSetSliderPosition({position:e}))}),[o,u,l]),m=e=>e?.parentElement?.querySelector("ul"),x=(0,i.useRef)(null);return(0,C.jsxs)("div",{id:s,className:Jl,ref:x,children:[(0,C.jsxs)(y.W,{"aria-label":h.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:ql,getInitialFocusElement:m,children:[(0,C.jsx)(Kl.y,{children:h.Ru.get("web-player.your-library-x.sort_by")}),n.map((({key:t,value:i},a)=>(0,C.jsx)(b.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,a),divider:a===n.length-1?"after":void 0,autoClose:!1,children:i},t)))]}),(0,C.jsxs)(y.W,{"aria-label":h.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:ql,getInitialFocusElement:m,children:[(0,C.jsx)(Kl.y,{children:h.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),es.map((e=>{const r=rs(e),i=e.itemsViewState===t.itemsViewState&&e.compactModeState===t.compactModeState;return(0,C.jsx)(b.D,{role:"menuitemradio","aria-checked":i,onClick:()=>a(e),leadingIcon:c(e),autoClose:!1,children:r},r)})),Gl.X.GRID===t.itemsViewState&&(0,C.jsx)("li",{role:"presentation",children:(0,C.jsx)("div",{role:"menuitem",className:Ql,children:(0,C.jsx)(Yl.z2,{labelText:h.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:ts(d,-.5,100),max:1,step:.1,onDragStart:p,onDragMove:p,onDragEnd:p,onStepBackward:()=>g(ts(d,-.1,10)),onStepForward:()=>g(ts(d,.1,10)),forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})]})},as=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,showReorderingOnboarding:a,headerSpec:n,scrollNodeRef:l})=>{const s=(0,i.useMemo)((()=>n.sortbyViewasMenuButtonFactory()),[n]),o=(0,v.s)(),c=(0,Ht.f)(),d=e.find((e=>e.id===t))??e?.at(0),u={key:d?.id??"",value:d?.name??""},p=(0,i.useCallback)(((e,t)=>{r(e);const i=c.getSortOrderLabel(e);o.logInteraction(s.sortOptionFactory({identifier:i,position:t}).hitSort())}),[c,o,r,s]),{itemsView:g,setItemsView:y}=(0,Gl.t)(),{libraryRowMode:m,setLibraryRowMode:x}=Ol(),{inView:b,ref:f}=(0,Bl.Wx)({initialInView:!0,root:l.current,threshold:.75}),{show:S,onHide:P}=((e,t=!0)=>{const[r,a]=(0,Se.x)("onboarding-dismissed:ylx-playlist-ordering",!1),[n,l]=(0,Se.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[s,o]=(0,i.useState)(!1),{dropOriginIsYLX:c}=ri(),{draggingIsInProgress:d}=(0,i.useContext)(k.O_);(0,i.useEffect)((()=>{d&&c&&o(!0)}),[d,c]);const u=(0,i.useCallback)((()=>{a(!0),o(!1),l(n+1)}),[n,l,a]);return{show:e&&n<3&&(!r||s)&&(t||s),onHide:u}})(a,b),w=(0,i.useMemo)((()=>g===Gl.X.GRID?{itemsViewState:Gl.X.GRID,compactModeState:El.DEFAULT}:m===El.COMPACT?{itemsViewState:Gl.X.LIST,compactModeState:El.COMPACT}:{itemsViewState:Gl.X.LIST,compactModeState:El.DEFAULT}),[g,m]),I=(0,i.useCallback)((e=>{let t=s.viewAsOptionFactory({identifier:"grid",position:3}).hitUiElementToggle();e.itemsViewState===Gl.X.GRID?y(Gl.X.GRID):e.compactModeState===El.COMPACT?(t=s.viewAsOptionFactory({identifier:"compact",position:1}).hitUiElementToggle(),y(Gl.X.LIST),x(El.COMPACT)):(t=s.viewAsOptionFactory({identifier:"list",position:2}).hitUiElementToggle(),y(Gl.X.LIST),x(El.DEFAULT)),o.logInteraction(t)}),[o,y,x,s]),T=(0,i.useCallback)((()=>{o.logInteraction(s.hitUiReveal())}),[o,s]);return(0,C.jsx)(C.Fragment,{children:(0,C.jsx)(Xl,{isInterestedInBeingShown:S,itemKey:J.YLX_CUSTOM_ORDERING,priority:$.CONTEXTUAL,placement:"right",content:(0,C.jsx)(_l.z,{onClose:P,children:(0,C.jsx)(Ie.E,{as:"p",dangerouslySetInnerHTML:{__html:h.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text")}})}),children:(0,C.jsx)(pl.b,{menu:(0,C.jsx)(is,{selectedSort:u,selectedView:{itemsViewState:w.itemsViewState??Gl.X.LIST,compactModeState:w.compactModeState??El.DEFAULT},sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),onSortSelect:p,onViewSelect:I,spec:s,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,C.jsx)(Fe.H,{"aria-label":h.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",u.value,rs(w)),onClick:T,size:"small",iconTrailing:(R=w,R.itemsViewState===Gl.X.GRID?Ml.D:R.compactModeState===El.COMPACT?Ul.d:Vl.N),ref:f,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,C.jsx)(Ie.E,{variant:"bodySmall",className:$l,"data-sortbox-label":!0,children:u.value})})})})});var R};var ns=r(16607),ls=r(76822),ss=r(63319);const os=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r})=>{const a=(0,Ht.f)(),n=(0,v.s)(),l=function(e){switch(e){case vr.c.PRE_RELEASE_ALBUM:case vr.c.ALBUM:return h.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case vr.c.ARTIST:return h.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case vr.c.PLAYLIST:return h.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case vr.c.SHOW:return h.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case vr.c.PRE_RELEASE_BOOK:case vr.c.AUDIOBOOK:return h.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return h.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case void 0:return h.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,Cr.k)(e)}}(t),s=(0,i.useCallback)((()=>(n.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[n,r]),o=(0,i.useCallback)((()=>(n.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[n,r]);return(0,C.jsx)(ns.S,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:a?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:s,onClear:o,useExpandCallback:e=>{(0,ss.f)(ls.g.FOCUS_YLX_TEXT_FILTER,e)}})};var cs=r(83989);var ds=r(78546);var us=r(21590);function ps(){const[e,t]=(0,i.useState)(null);if((0,ha.l)(xa.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case xa.uL.TOO_MANY_PINS:return(0,C.jsx)(us.x,{animated:!0,headingMessage:h.Ru.get("web-player.your-library-x.pin-error.title"),message:h.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:h.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case xa.uL.NO_PIN_IN_FOLDER:return(0,C.jsx)(us.x,{animated:!0,headingMessage:h.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:h.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:h.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,Cr.k)(e),null}}var gs=r(38435),ys=r(28833);var ms=r(43972),xs=r(942),hs=r(70670),bs=r(23571);const fs=(e,t,r,a,n)=>{const l=(0,bs.x)(),s=(0,i.useRef)(r),o=(0,i.useRef)(),c=(0,i.useRef)();o.current=a,c.current=n,(0,i.useEffect)((()=>{const r={ident:e,isPrefix:t,onMessage:e=>s.current(e),onSubscribe:async e=>await(o.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}}),[e,t,l])};var Ss=r(37232);const Ps={[xa.Ir.ALBUMS]:vr.c.ALBUM,[xa.Ir.ARTISTS]:vr.c.ARTIST,[xa.Ir.BOOKS]:vr.c.AUDIOBOOK,[xa.Ir.EPISODES]:vr.c.EPISODE,[xa.Ir.SHOWS]:vr.c.SHOW,[xa.Ir.TRACKS]:vr.c.TRACK};function vs(e,t,r){const a=(0,i.useCallback)((({data:{list:t}})=>{Cs(e,Ps[t])&&r()}),[e,r]);(0,ha.l)(xa.UV.UPDATE,a),(0,ha.l)(xa.UV.UPDATE_PIN,r);const n=(0,i.useCallback)((()=>{Cs(e,vr.c.PLAYLIST)&&r()}),[e,r]);(0,Sa.L)(n),function(e){fs("hm://collection/ylpin/",!0,e)}(r),function(e){const t=(0,hs.A)(),r=t.getEvents();(0,i.useEffect)((()=>r.addListener(xs.T.UPDATE,e)),[t,r,e])}(r),function(e){const t=(0,ms.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(oe.ar.ADDED,r),t.addListener(oe.ar.REMOVED,r),()=>{t.removeListener(oe.ar.ADDED,r),t.removeListener(oe.ar.REMOVED,r)}}),[e,t])}(r),function(e,t){const r=(0,Ss.F)();(0,i.useEffect)((()=>{!r||e!==ne.oR.RECENTLY_PLAYED_OR_ADDED.toString()&&"Recents"!==e||t()}),[t,r,e])}(t,r)}function Cs(e,t){switch(e){case vr.c.ALBUM:case vr.c.ARTIST:case vr.c.AUDIOBOOK:case vr.c.SHOW:return e===t;case vr.c.PLAYLIST:switch(t){case vr.c.TRACK:case vr.c.PLAYLIST:case vr.c.EPISODE:return!0;default:return!1}default:return!0}}var ws=r(52853),Is=r(17329),Ts=r(6056),Rs=r(17702);const As="Vf3ww2_My5QuwUnbpzhu";var Ds=r(21484);const js=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(Hr);return e?(0,C.jsx)(Ds.qb,{className:As,children:e}):null};var Ls=r(33058);const Es="main-yourLibraryX-libraryContainer",Os="main-yourLibraryX-libraryFilter",ks="iwhVJuPipY1lrQIjaA1k",Ns="main-yourLibraryX-libraryItemContainer",Fs="main-yourLibraryX-libraryRootlist",Bs="sikBfynL1Y6I25nVpbAg",Ms="KwShd3RdVrsX6dGLJNxT",Us="qOtD4rsRpIMhQLCjJ4K3",Vs="oEDH8yMQOKQNoX7LWjwt",_s="RHRitk6QC3rvuG24RAdj",zs="main-yourLibraryX-filterArea",Hs={items:[],totalLength:0},Ws=()=>{const{filter:e}=(0,i.useContext)(q.g),[t,r]=(0,i.useState)(null),{refinersPickedByUserRef:a,selectedRefinerIds:s,resetRefinerIds:y,resetAndToggleRootRefiner:m,toggleRefinerId:x}=function(e){const{openedFolderUri:t=cr,change:r,resetFolder:a}=(0,i.useContext)(dr),n=(0,i.useRef)(t),[l,s]=(0,Se.x)("ylx-active-filter-ids",{[t]:[]}),o=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const a=new Set(e);a.has(r)?a.delete(r):a.add(r),o.current=i,s({...l,[t]:Array.from(a)})}),[e,s,t]),u=(0,i.useCallback)((()=>s({...l,[t]:[]})),[t,l,s]),p=(0,i.useCallback)((e=>{t&&a(),s({...l,[cr]:e?[e]:[]})}),[t,a,l,s]);return(0,i.useLayoutEffect)((()=>{t!==n.current&&t!==cr&&"PUSH"===r&&s({...l,[t]:l[n.current]}),n.current=t}),[r,t,l,s]),{refinersPickedByUserRef:o,selectedRefinerIds:l[t],resetRefinerIds:u,resetAndToggleRootRefiner:p,toggleRefinerId:d}}(t?.selectedFilters?.map((e=>e.id))??[]),h=s?.[0],{selectedSortOrderId:b,setSelectedSortOrderId:f}=function(e){const t=(0,Ht.f)().getContentsPrimaryFilterId(vr.c.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(dr),[a,n]=(0,Se.x)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:a[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{n({...a,[l]:e})}),[l,a,n])}}(h),S=(0,i.useRef)(null),P=(0,i.useRef)(null),w=(0,i.useRef)(null),{expandedFolders:I}=function(){const e=(0,i.useContext)(mt);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:R,resetFolder:E}=(0,i.useContext)(dr),F=(0,ws.p)(),B=(0,ce.P)(),M=(0,Ht.f)(),U=(0,ii.g)(),V=Ce(),_=ai(),[z,H]=(0,i.useState)(!1),{isCollapsed:W,isExpanded:X,setYlxSidebarState:K}=(0,Ue.$)();(e=>{const t=(0,Ht.f)(),{isCollapsed:r,setYlxSidebarState:a,lastUncollapsedYlxSidebarState:n}=(0,Ue.$)(),l=(0,ys.W)(),s=(0,i.useCallback)((()=>{const e=r?n:Ue.fX.COLLAPSED;a(e)}),[r,n,a]),o=(0,i.useCallback)((()=>{e(null),r&&a(n)}),[r,n,e,a]),c=(0,i.useCallback)((i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&a(n)}),[r,n,t,e,a]),d=c(vr.c.PLAYLIST),u=c(vr.c.SHOW),p=c(vr.c.ARTIST),g=c(vr.c.ALBUM),y=c(vr.c.AUDIOBOOK);(0,gs.Nx)(l?ls.g.TOGGLE_NPV_SIDEBAR:ls.g.TOGGLE_YLX_SIDEBAR,s),(0,gs.Nx)(ls.g.GO_TO_LIBRARY,o),(0,gs.Nx)(ls.g.GO_TO_PLAYLISTS,d),(0,gs.Nx)(ls.g.GO_TO_PODCASTS,u),(0,gs.Nx)(ls.g.GO_TO_ARTISTS,p),(0,gs.Nx)(ls.g.GO_TO_ALBUMS,g),(0,gs.Nx)(ls.g.GO_TO_AUDIOBOOKS,y)})(m);const{isGridView:Y}=(0,Gl.t)(),{libraryRowMode:G}=Ol(),J=G===El.COMPACT,{spec:$,UBIFragment:Q}=(0,_e.r)(u.j,{data:{identifier:"yourlibraryx"}});let ee;ee=W?"collapsed":Y?X?"expanded_grid":"default_grid":J?X?"expanded_compact":"default_compact":X?"expanded_list":"default_list";const te=(0,i.useMemo)((()=>$.sidebarFactory({uri:R??cr,identifier:ee})),[$,R,ee]),re=(0,Ls.t)(te),ie=(0,i.useMemo)((()=>te.headerFactory()),[te]),ae=(0,i.useMemo)((()=>ie.filtersFactory()),[ie]),ne=(0,i.useMemo)((()=>ie.searchBarFactory()),[ie]),le=(0,i.useMemo)((()=>te.listFactory()),[te]),se=(0,v.s)();!function(e=[],t=[],r){const a=(0,cs.n)(),n=(0,Ht.f)().getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const s=(0,i.useRef)(t);s.current=t;const o=(0,i.useRef)(r);o.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!n)return;const e=s.current.includes(n),t=l.current.includes(n),r=s.current.length>1,i=!a&&!r&&!e&&t,c=a&&e&&d.current;(i||c)&&(i&&(d.current=!0),o.current(n,!1))}),[n,a]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{n&&(t.includes(n)&&!u.current.includes(n)&&d.current||(d.current=!1),u.current=t)}),[n,t])}(t?.availableFilters?.map((e=>e.id)),t?.selectedFilters?.map((e=>e.id)),x);const{handleDropOnFolder:oe,unpinConfirmationDialog:de}=ya(le,R),{dropOriginIsYLX:pe,entityIsInFolder:xe}=ri(),{setDraggingIsInProgress:he}=(0,i.useContext)(k.O_);(0,N.g)(S);const be=R?tr:er,fe=xe&&!t?.reorderAllowed?[D.fl.PLAYLISTS_V2,D.fl.FOLDERS]:[],{dropPosition:we,className:Ie,...Te}=(0,L.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:pe?fe:be},onDrop:(0,i.useCallback)((async e=>{if(R)oe(e);else{const{[D.fl.TRACKS]:t=[],[D.fl.LOCAL_TRACKS]:r=[],[D.fl.ALBUMS]:i,[D.fl.ARTISTS]:a,[D.fl.EPISODES]:n,[D.fl.SHOWS]:l,[D.fl.PLAYLISTS_V2]:s=[],[D.fl.FOLDERS]:o,[D.fl.AUDIOBOOKS]:c}=e,d=[...t,...r];d.length&&(M?.add({uris:d}),se.logInteraction(le.dragCreatePlaylist())),i?.length&&(M?.add({uris:i}),se.logInteraction(le.dragLike({itemToBeLiked:i.at(0)??""}))),a?.length&&(M?.add({uris:a}),se.logInteraction(le.dragLike({itemToBeLiked:a.at(0)??""}))),n?.length&&(M?.add({uris:n}),se.logInteraction(le.dragLike({itemToBeLiked:n.at(0)??""}))),l?.length&&(M?.add({uris:l}),se.logInteraction(le.dragLike({itemToBeLiked:l.at(0)??""}))),c?.length&&(M?.add({uris:c}),se.logInteraction(le.dragLike({itemToBeLiked:c.at(0)??""}))),s.length&&(_(s,{before:"start"}),pe?se.logInteraction(le.dragSort()):se.logInteraction(le.dragLike({itemToBeLiked:s.at(0)??""}))),o?.length&&(U.moveFolder({uri:o[0]},{before:"start"}),se.logInteraction(le.dragSort()))}}),[R,oe,M,se,le,_,pe,U]),onLongDragOver:(0,i.useCallback)((()=>{W&&K(Ue.fX.DEFAULT)}),[W,K])}),Re=(0,d.NC)(ve.lDH),Ae=(0,i.useMemo)((()=>({filters:s,sortOrder:b,textFilter:e,includeLocalFiles:B,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:Re,expandedFolders:W||Y?[]:I,filtersPickedByUser:a.current,folderUri:R})),[s,b,e,B,Re,W,Y,I,a,R]),De=(0,i.useCallback)((async(e,t)=>{try{const i=await M.getContents({offset:e,limit:t,...Ae}),{offset:a,limit:n,items:s,...o}=i;return H(!1),{fetchedId:Ae.folderUri,onCacheSuccess:()=>{r((e=>(0,l.j)(o,e)?e:o))},...i}}catch(e){return e instanceof T.c_?(y(),Hs):e instanceof T.IU?(f(void 0),Hs):e instanceof T.db?(E(),Hs):((0,Rs.UD)(e),H(!0),Hs)}}),[Ae,M,y,E,f]),je=!1===t?.hasUnfilteredItems,Le=t?.hasTextFilter&&0===t.totalLength&&""!==e,{setFilter:Ee}=(0,i.useContext)(q.g);(0,i.useEffect)((()=>{Le&&W&&Ee("")}),[Le,W,Ee]);const Oe=0===t?.totalLength&&t.selectedFilters.length>0&&!t.passedFolderUri&&!t.hasTextFilter;(0,c.Ij)((()=>{const e=t?.selectedFilters.at(-1);Oe&&e&&x(e.id,!1)}),[Oe,t?.selectedFilters]);const ke=M?.getCapabilities().canFetchAllItems,{fetchedId:Ne,getItems:Fe,nrValidItems:Be,invalidateCache:Me}=(0,Ts.E)({nrItems:50,fetch:De,limit:50,cacheAllOnInvalidation:ke,cacheAllLimit:5e4}),Ve=(0,o.YQ)(Me,200,{leading:!0,trailing:!0,maxWait:1e3});vs(t?.primaryFilter,b,Ve);const ze=!R&&!Ne||R===Ne;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,a=r.current[t];i.scrollTop=a??0;const n=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",n),()=>{i?.removeEventListener("scroll",n)}}),[e,t])})(S,Ne);const He=(0,i.useCallback)((()=>{Me(),H(!1)}),[Me]),We=(0,Is.y)(S),Ke=!!t?.openedFolderName,Ye=(0,d.NC)(ve._p8,{loadingValue:!1})&&ke,Ze=function(e,t,r){const{isGridView:a}=(0,Gl.t)(),{rowHeight:n}=Ol();return(0,i.useCallback)((async i=>{let l=n,s=1;if(a){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(s=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const o=r(0,5e4,{cachedOnly:!0}),c=o.find((e=>e?.name&&(0,ds.u)(i,e.name))),d=c?o.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:a,offsetHeight:n}=e,l=t&&e?t.getBoundingClientRect().top+a-e.getBoundingClientRect().top:0;if(l+r<a||l+r+i>a+n){const t=r-n/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/s)*l,l),c?.uri??null}),[e,t,n,r,a])}(w,S,Fe),qe=z?(0,C.jsx)(yt,{onClick:He}):null;let Je;(0,i.useEffect)((()=>{z&&W&&K(Ue.fX.DEFAULT)}),[z,W,K]),je&&!W&&(Je=Ke?(0,C.jsx)(Ge,{className:Ie}):(0,C.jsx)(nt,{className:Ie}));const $e=Le?(0,C.jsx)(dt,{query:e,className:Ie}):null,Qe=!W&&!Je&&(0,C.jsxs)("div",{className:n()(Os,Ie,ks),children:[(0,C.jsx)(os,{clearOnEscapeInElementRef:P,primaryFilter:t?.primaryFilter,spec:ne},R),(0,C.jsx)(as,{sortOrders:t?.availableSortOrders??[],activeSortOrderId:t?.selectedSortOrder?.id,setActiveSortOrderId:f,showReorderingOnboarding:t?.primaryFilter===vr.c.PLAYLIST&&!t?.reorderAllowed,headerSpec:ie,scrollNodeRef:S})]}),et=z&&!t,tt=X&&!Y&&!qe&&!Je,rt=(t?.selectedFilters??[]).length>0,it=V&&!rt&&!R&&!je,{cheetaraOnboardingIsActive:at,setCheetaraOnboardingIsActive:lt,cheetaraOnboardingDismissed:st,setCheetaraOnboardingDismissed:ot,handleCloseCheetaraOnboarding:ct}=Pe(),ut=!W&&V&&!z&&!st&&!t?.passedFolderUri&&!!t?.availableFilters?.length&&!t?.selectedFilters?.length;return(0,C.jsx)(Wr,{containerRef:P,findMatchingTypeaheadUid:Ze,isEnabled:Ye,children:(0,C.jsxs)(Q,{spec:$,children:[(0,C.jsx)(Z,{}),at&&(0,C.jsx)(ye,{onClose:ct}),(0,C.jsx)(g.h,{menu:(0,C.jsx)(A,{folderUri:R}),children:(0,C.jsxs)("div",{className:n()(Es,{[Wt]:we===j.Nz.ON,[Bs]:W,[Vs]:at}),style:{"--placeholder-image":`url(${(0,p.b)("images/ylx-row-placeholder.png")})`,"--placeholder-artist-image":`url(${(0,p.b)("images/ylx-artist-row-placeholder.png")})`,"--placeholder-compact-image":`url(${(0,p.b)("images/ylx-compact-row-placeholder.png")})`},ref:e=>{P.current=e,re(e)},...Te,tabIndex:-1,onDragStart:()=>he(!0),onDragEnd:()=>he(!1),children:[de,(0,C.jsxs)("div",{className:n()({[_s]:We}),children:[(0,C.jsx)(Pl,{parentDropTargetClassName:Ie,isLibraryCompletelyEmpty:je,folderUri:t?.passedFolderUri,folderName:t?.openedFolderName,spec:ie.titleRowFactory(),openedFolderIsPlayable:t?.openedFolderIsPlayable}),!F&&(0,C.jsx)(Q,{spec:ie,children:(0,C.jsx)(Xe,{})}),!W&&!et&&(0,C.jsxs)("div",{className:zs,children:[it&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(me,{})}),(0,C.jsx)(sr,{selectedFilters:t?.selectedFilters,availableFilters:t?.availableFilters,toggleFilterId:x,resetFilterIds:y,className:n()({[Us]:!ze}),scrollNodeRef:S,spec:ae,inFolderView:!!t?.passedFolderUri},Ne),X&&Qe]}),ut&&X&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(ge,{ylxIsExpanded:X,setCheetaraOnboardingIsActive:lt,onHide:()=>ot(!0)})}),tt&&(0,C.jsx)(Bt,{isScrolled:We})]}),(0,C.jsx)(O.a,{className:Ns,onInstanceCreated:e=>{S.current=e.elements().viewport},children:(0,C.jsxs)("div",{className:n()(Fs,{[Us]:!z&&!ze,[Bs]:W,[Ms]:tt}),children:[ut&&!X&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(ge,{ylxIsExpanded:X,setCheetaraOnboardingIsActive:lt,onHide:()=>ot(!0)})}),!X&&Qe,!W&&t?.tagPlaylist&&(0,C.jsx)(i.Suspense,{fallback:null,children:(0,C.jsx)(ue,{playlist:t.tagPlaylist})}),qe||Je||$e,(0,C.jsx)("div",{ref:w,children:Y?(0,C.jsx)(Un,{getItems:Fe,scrollNodeRef:S,primaryFilter:t?.primaryFilter,nrValidItems:Be,spec:le}):(0,C.jsx)(Fl,{getItems:Fe,scrollNodeRef:S,primaryFilter:t?.primaryFilter,nrValidItems:Be,spec:le})})]})}),ps(),(0,C.jsx)(js,{})]})})]})})},Xs=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session)),t=(0,s.d4)((e=>e.ui.editRefinersModal)),r=Ce();return(0,C.jsx)(E.s,{onError:e=>{(0,Rs.Jy)(e,"YourLibraryX")},children:(0,C.jsx)(q.s,{uri:T.gv,children:(0,C.jsx)(xt,{children:(0,C.jsxs)(ur,{children:[(0,C.jsx)(de,{children:(0,C.jsx)(fe,{children:(0,C.jsxs)(ae,{children:[(0,C.jsx)(Ws,{}),r&&t.isOpen&&(0,C.jsx)(pe,{})]})})}),(0,C.jsx)(ke,{isAnonymous:e})]})})})})}},79147:(e,t,r)=>{r.d(t,{P:()=>a});var i=r(15998);function a(){return(0,i.y)()[0]}},15998:(e,t,r)=>{r.d(t,{y:()=>n});var i=r(30758),a=r(70670);function n(){const e=(0,a.A)(),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}},23571:(e,t,r)=>{r.d(t,{x:()=>n});var i=r(46278),a=r(25214);function n(){return(0,a.N)(i.b)}}}]);
//# sourceMappingURL=xpui-routes-your-library-x.js.map