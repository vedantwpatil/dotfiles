"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[983],{15684:(e,s,n)=>{n.d(s,{l:()=>u});var t=n(97500),a=n.n(t);const r="x-toggle-wrapper",i="x-toggle-indicator",l="JCFCfOY_6UEZZSOO2xrl",o="x-toggle-indicatorWrapper",c="x-toggle-input";var d=n(86070);const u=({value:e,disabled:s,onSelected:n,id:t,className:u,condensed:h=!1,inputRef:m})=>(0,d.jsxs)("label",{className:a()(r,u),children:[(0,d.jsx)("input",{id:t,className:c,type:"checkbox",disabled:s,checked:e,onChange:e=>{const s=e.target.checked;n(s)},ref:m}),(0,d.jsx)("span",{className:a()(o,{[l]:h}),children:(0,d.jsx)("span",{className:a()(i,{[l]:h})})})]})},68678:(e,s,n)=>{n.d(s,{DebugWindowContents:()=>rr});var t=n(30758),a=n(97500),r=n.n(a),i=n(47546),l=n(18765),o=n(4180),c=n(86523),d=(n(21834),n(21484)),u=n(68053),h=n(82208),m=n(91974),p=n(96613),x=n(64867),g=n(61214),j=n(6128),v=n(30421),f=n(4655),y=n(68841),b=n(66036);const N=(0,y.h)();window.abba={get:async function(e,s){const n=new f.EW((0,b.X)()),t=(await n.getValues(f.kM.fromPartial({}))).pairs;let a={},r="";if(t.abbaOverrides?r=t.abbaOverrides:t.abbaoverrides&&(r=t.abbaoverrides),r)try{a=JSON.parse(r)}catch(e){console.error(`error parsing value=${r}, error=${e}`)}if(Object.prototype.hasOwnProperty.call(a,e))return console.warn(`Abba: Override for ${e} : ${a[e]}`),void setTimeout((()=>s(null,a[e])),0);N.post("sp://abba/v1/flags",{flags:[e]}).then((n=>{const{flags:t=[]}=n,a=t[0]&&t[0].featureName===e&&t[0].cell;s(null,a||null)})).catch((e=>{s(e)}))},getAll:function(e){console.warn("Abba:getAll should only be used by TA tests for logging purposes."),N.get("sp://abba/v1/all_flags").then((s=>{const{flags:n=[]}=s,t=n.reduce(((e,s)=>(e[s.featureName]=s.cell,e)),{});e(null,JSON.stringify(t,null,2))})).catch((s=>{e(s)}))},getRequestedFlagNames:function(e){N.get("sp://abba/v1/requested_flag_names").then((s=>{e(null,JSON.stringify(s.sort(),null,2))})).catch((s=>{e(s)}))}};var w=n(77842);const C=function(){const[e,s]=(0,t.useState)();return{adMocks:e,getAdMocks:(0,t.useCallback)((async()=>w.DB.getMocksList().then((e=>{s(e.body.test_cases)}))),[])}},S="rh7v8PDNC0ke2OkkyRhk",k="Kh0jtEAjRK83Z5A_IZRx";var E=n(86070);const I=()=>{const e=e=>60*e,[s,n]=(0,t.useState)(e(20)),[a,r]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[o,c]=(0,t.useState)(""),[f,y]=(0,t.useState)((new Date).toISOString()),[b,N]=(0,t.useState)({message:"",status:"success"}),[I,A]=(0,t.useState)(!1),{adMocks:O,getAdMocks:R}=C(),P=({message:e,isError:s})=>{N({message:e,status:s?"error":"success"}),A(!0),setTimeout((()=>A(!1)),5e3)},T=(0,t.useCallback)((e=>{w.DB.clearSlot(e).then((()=>{P({message:`${e} cleared`,isError:!1})}))}),[]),D=(0,t.useCallback)((e=>{w.DB.debug(`increaseStreamTime(${e} : Seconds)`),n(e),w.DB.increaseStreamTime(e).then((()=>{P({message:`${e} seconds of stream time added`,isError:!1})})).catch((e=>{P({message:`Error increasing stream time: ${e}`,isError:!0})}))}),[]);return(0,t.useEffect)((()=>{R().then((()=>{P({message:"Ad mocks fetched",isError:!1})})).catch((()=>{P({message:"Ad mocks fetch failed",isError:!0})}))}),[R]),(0,E.jsxs)("div",{className:S,children:[(0,E.jsx)(d.qb,{colorSet:"error"===b.status?"negative":"brightAccent",showSnackbar:I,children:b.message}),(0,E.jsx)(u.Z,{as:"h1",variant:"forte",paddingBottom:"24px",children:"Ad Debug Tools"}),(0,E.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Increase Stream Time"}),(0,E.jsx)(h.g,{label:"Quick add stream time",children:(0,E.jsx)("div",{className:k,children:(0,E.jsxs)(m.I,{mode:"action",layout:"single-line","aria-label":"Stream time presets",children:[(0,E.jsx)(p.v,{variant:"contrasting",onClick:()=>D(e(1)),children:"Add 1 min"}),(0,E.jsx)(p.v,{variant:"contrasting",onClick:()=>D(e(20)),children:"Add 20 mins"}),(0,E.jsx)(p.v,{variant:"contrasting",onClick:()=>D(e(40)),children:"Add 40 mins"}),(0,E.jsx)(p.v,{variant:"contrasting",onClick:()=>D(e(60)),children:"Add 1 hour"})]})})}),(0,E.jsxs)(h.g,{label:"Custom stream time in seconds",children:[(0,E.jsx)("div",{className:k,children:(0,E.jsx)(x.Z,{onChange:e=>n(e.currentTarget.value),placeholder:"seconds",value:s,type:"number",min:0})}),(0,E.jsx)("div",{className:k,children:(0,E.jsxs)(g.$,{size:"small",onClick:()=>D(s),children:["Add ",s," seconds (~ ",(_=s,Math.round(Number(_)/60))," minutes)"]})})]}),(0,E.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Fetch ad from Ad Mocker"}),(0,E.jsxs)(h.g,{label:"Enqueue ad json directly into pod",children:[(0,E.jsxs)("div",{className:k,children:[(0,E.jsx)(j.E,{as:"label",htmlFor:"adMockerSessionId",variant:"bodyMedium",children:"Session ID"}),(0,E.jsx)(x.Z,{name:"adMockerSessionId",type:"text",value:f,onChange:e=>y(String(e.currentTarget.value))})]}),(0,E.jsx)("div",{className:k,children:(0,E.jsxs)(v.F,{value:o,onChange:e=>{c(e.currentTarget.value)},children:[(0,E.jsx)("option",{disabled:!0,value:"",children:"Choose a mock"}),O?.map((e=>(0,E.jsxs)("option",{value:e.name,children:[e.name," (",e.group,")"]},e.name)))]})}),(0,E.jsx)(g.$,{size:"small",onClick:()=>{w.DB.fetchAdAndEnqueue(o,f).then((()=>{P({message:`${o} inserted`,isError:!1})})).catch((e=>{P({message:`Error inserting ${o}: ${e}`,isError:!0})}))},children:"Insert ad directly"})]}),(0,E.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Override Country"}),(0,E.jsxs)(h.g,{label:"Calls testingClient.requestOverride with country key",children:[(0,E.jsx)("div",{className:k,children:(0,E.jsxs)(v.F,{value:i,onChange:e=>{l(e.currentTarget.value)},children:[(0,E.jsx)("option",{disabled:!0,value:"",children:"Choose a country"}),(0,E.jsx)("option",{value:"AU",children:"Australia"}),(0,E.jsx)("option",{value:"BR",children:"Brasil"}),(0,E.jsx)("option",{value:"JP",children:"Japan"}),(0,E.jsx)("option",{value:"SE",children:"Sweden"}),(0,E.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,E.jsx)("option",{value:"US",children:"USA"}),(0,E.jsx)("option",{value:"NZ",children:"New Zealand"}),(0,E.jsx)("option",{value:"",children:"Clear"})]})}),(0,E.jsx)(g.$,{size:"small",onClick:()=>{w.DB.overrideCountry(i).then((e=>{0===e.status?P({message:`${i} override successful`,isError:!1}):P({message:`Error overriding country: ${e.status}`,isError:!0})}))},children:"OVERRIDE COUNTRY"})]}),(0,E.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Clear Slot"}),(0,E.jsxs)(h.g,{label:"Calls slotsClient.clearAllAds for the selected slot",children:[(0,E.jsx)("div",{className:k,children:(0,E.jsxs)(v.F,{value:a,onChange:e=>{r(e.currentTarget.value)},children:[(0,E.jsx)("option",{disabled:!0,value:"",children:"Choose a slot"}),(0,E.jsx)("option",{value:"leaderboard",children:"leaderboard"}),(0,E.jsx)("option",{value:"sponsored-playlist",children:"sponsored playlist"}),(0,E.jsx)("option",{value:"billboard",children:"billboard"}),(0,E.jsx)("option",{value:"hpto",children:"hpto"}),(0,E.jsx)("option",{value:"stream",children:"stream"})]})}),(0,E.jsx)(g.$,{size:"small",onClick:()=>{""!==a?T(a):P({message:"Please select a slot",isError:!0})},children:"CLEAR SLOT"})]}),(0,E.jsx)(u.Z,{as:"h2",variant:"alto",paddingBottom:"8px",children:"Trigger Stream Slot"}),(0,E.jsx)(h.g,{label:"Calls slotsClient.createSlot, adds 20 mins, puts targeting in focus",children:(0,E.jsx)(g.$,{size:"small",onClick:()=>{w.DB.queueVideoAd().then((e=>{const s=e[0];s.error?P({message:`Error queuing video ad: ${s?.error}`,isError:!0}):P({message:"Video queued in stream slot",isError:!1})}))},children:"Queue Video Ad"})})]});var _};var A=n(20570),O=n(75896),R=n(42223),P=n(38325),T=n(42286),D=n(27796),_=n(37948),M=n(7284),L=n(62389);const U={tableContainer:"TgLcw_ZdaHvESkPEgYLQ",collapsed:"zNGegc8KwsTw3SQKHf_u",tableTitle:"qMSX_Pybr996fZcayagh",tableToggle:"YS6d6BNlR28mEtkxH07w",table:"vDxH9w6xk7bHMabZsuhj",tableHead:"sEU19oMM1YAICdZY23E5",rowHeader:"Cw3H6ooohrEJbRFy9cdg",rowName:"W0HCTspPvFScLWQ9QyJq",rowValue:"WM3ogL7MpxKR0Ym_n9qw",rowActions:"DQhZfpOIasfYMfhSltgB",propertyDescription:"iTrSMSnZF2Sr2pAGcj21",rowAction:"gQCLM4Et4LueQCIi2zW9",rowControl:"f9VIhAIG3YgquVQZqHZ5"},F=({title:e,titleExtra:s,rows:n,cols:a,canCollapse:i=!1,isCollapsedInitially:l=!1,renderHead:o=!1,renderRow:c})=>{const[d,u]=(0,t.useState)(!!i&&l);return(0,E.jsxs)(T.K,{className:r()(U.tableContainer,{[U.collapsed]:d}),children:[e?(0,E.jsxs)("div",{className:U.tableTitle,onClick:()=>{i&&u(!d)},children:[i?(0,E.jsx)("button",{className:U.tableToggle,children:d?(0,E.jsx)(D.V,{size:"small"}):(0,E.jsx)(_.r,{size:"small"})}):null,(0,E.jsx)("h3",{children:e}),s]}):null,(0,E.jsxs)(M.X,{className:U.table,children:[(0,E.jsx)("colgroup",{children:a.map(((e,s)=>(0,E.jsx)("col",{width:e.width,className:e.className},s)))}),o?(0,E.jsx)("thead",{children:(0,E.jsx)("tr",{children:a.map(((e,s)=>(0,E.jsx)(L.M,{className:U.tableHead,children:e.name},s)))})}):null,(0,E.jsx)("tbody",{children:Array.isArray(n)?n.map((e=>c?c(e,a):null)):n})]})]})};var B=n(97505);function V(){const e=(0,B.ox)();return(0,t.useMemo)((()=>e?new e.Function("value","if (value) { navigator.clipboard.writeText(value) }"):()=>{}),[e])}var H=n(32751),J=n(24902);const z="YMcjds_NcAi4cEbmH8CQ",$="gh0JfRJ_O4dLCEdAjNVw",Z="Txtj4xKE3LxMG2u23BIV",Y="qJy0FbUBMTQ6CejUVLKy",q="C58BICAHtIsDaVKzFpyb",W="SdB9m1NLh7FZ1mMfQsAR",K="SxRUmP6Y0IRW1aJijfU5",G="BWvIH314t4_hcIDb2onA",Q="ayzSMCWwex0kqdHjRr3Y",X=[{language:"en",uri:"spotify:audio:50PZU7JmDySDzojKzTapDx"},{language:"fr-CA",uri:"spotify:audio:0j61Bw8ZF9wfyW65Cpugt9"}],ee=new Intl.DisplayNames(["en"],{type:"language"}),se=({language:e,uri:s})=>{const n=(0,H.z)(),t=V();return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:e}),(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:ee.of(e)}),(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:s}),(0,E.jsxs)(O.n,{className:U.rowActions,children:[(0,E.jsx)("button",{className:U.rowAction,onClick:()=>{n.play({uri:"spotify:internal:fileplayback",pages:[{items:[{type:J.c.UNKNOWN,uri:s,uid:s,provider:"context",metadata:{title:"Spotify",image_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-300.jpg",image_small_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-64.jpg",image_large_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-640.jpg",image_xlarge_url:"https://spotify-tap.spotifycdn.com/npv/quickstart-pivot-artwork-640.jpg","actions.advancing_past_track":"stop"}}]}],restrictions:{disallowPausingReasons:["narration"],disallowResumingReasons:["narration"],disallowSeekingReasons:["narration"],disallowSkippingPreviousReasons:["narration"],disallowSkippingNextReasons:["narration"],disallowTogglingRepeatContextReasons:["narration"],disallowTogglingRepeatTrackReasons:["narration"],disallowTogglingShuffleReasons:["narration"],disallowAddToQueueReasons:["narration"],disallowSetQueueReasons:["narration"],disallowSettingPlaybackSpeedReasons:["narration"]}},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"},{skipTo:{index:0}})},children:(0,E.jsx)(R.A,{size:"small"})}),(0,E.jsx)("button",{className:U.rowAction,onClick:()=>{t(s)},children:(0,E.jsx)(P._,{size:"small"})})]})]})},ne=()=>(0,E.jsx)(F,{title:"Consumption Cap Audio Disclaimer",rows:X,cols:[],renderRow:e=>(0,E.jsx)(se,{...e},e.uri),canCollapse:!0}),te=()=>(0,E.jsx)("div",{className:z,children:(0,E.jsx)(ne,{})});var ae=n(19983);const re="UX08Irxg3ssZhLQNj40b",ie=()=>{const e=V(),s=(0,ae.Y)(),n=s.token?.accessToken??"Not authorized",t=new Date(s.token?.accessTokenExpirationTimestampMs??0);return(0,E.jsx)("div",{className:re,children:(0,E.jsx)(F,{title:"Authorization",rows:[{name:"Token",value:n},{name:"Expires At",value:t.toLocaleString()},{name:"Retry Attempt",value:s.retryAttempt?.toString()??"N/A"},{name:"Retry At",value:s.retryAt?.toLocaleString()??"N/A"}],cols:[{width:"30%"},{},{width:"16px"}],renderRow:({name:s,value:n})=>(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:s}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:n}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>e(n),children:(0,E.jsx)(P._,{size:"small"})})})]})})})};var le=n(38254);const oe="A83S2dzV013Y19VLxbRT",ce=({name:e,value:s})=>{const n=V();return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:e}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:s}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>n(s),children:(0,E.jsx)(P._,{size:"small"})})})]})},de=({device:e})=>(0,E.jsx)(F,{title:e.name,rows:[{name:"Device",value:e?.name},{name:"Identifier",value:e.id},{name:"Type",value:e.type},{name:"Group",value:e.isGroup.toString()},{name:"Local",value:e.isLocal.toString()},{name:"Active",value:e.isActive.toString()},{name:"Connecting",value:e.isConnecting.toString()},{name:"Disabled",value:e.isDisabled.toString()},{name:"Volume",value:e.volume.toString()},{name:"HiFi",value:e.losslessSupport.deviceSupported.toString()}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,E.jsx)(ce,{...e}),canCollapse:!0,isCollapsedInitially:!0}),ue=()=>{const{connectionStatus:e,devices:s}=(0,le.v)((e=>({connectionStatus:e.connectionStatus,devices:e.devices})));return(0,E.jsxs)("div",{className:oe,children:[(0,E.jsx)(F,{title:"Connect",rows:(0,E.jsx)(ce,{name:"Status",value:e}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),s.map((e=>(0,E.jsx)(de,{device:e},e.id)))]})};var he=n(29004),me=n(88921),pe=n(12136),xe=n(32916),ge=n(89796),je=n(77997),ve=n(5117),fe=n(5260),ye=n(66144),be=n(260),Ne=n(89523),we=n(99576),Ce=n(14761),Se=n(74365),ke=n(87589),Ee=n(41089);const Ie=({view:e,className:s})=>{const n=(0,t.useCallback)((s=>{(0,Ne.TS)(e,s.nativeEvent,"search-panel")&&s.preventDefault()}),[e]),a=(0,t.useCallback)((s=>{e.dispatch({effects:fe.Ri.of(new fe.L0({search:s}))})}),[e]),r=(0,t.useCallback)((()=>{(0,fe.jO)(e)}),[e]),i=(0,t.useRef)(null);return(0,t.useEffect)((()=>{e.dispatch({effects:fe.Ri.of(new fe.L0({search:""}))}),i.current?.select()}),[e]),(0,E.jsx)("div",{className:s,children:(0,E.jsx)(Se.E,{iconLeading:(0,E.jsx)(ke.C,{}),iconTrailing:(0,E.jsx)(Ee.M,{onClick:()=>r()}),children:(0,E.jsx)(x.Z,{ref:i,onKeyDown:e=>n(e),onChange:e=>a(e.currentTarget.value)})})})};var Ae=n(17078);function Oe(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function Re(e,s,n=[]){let t=0;for(const a of Object.getOwnPropertyNames(e))s(e,a,n)?t++:Oe(e[a])&&(t+=Re(e[a],s,[a,...n]));return t}function Pe(e,s){return void 0===e[s]&&(e[s]={},!0)}function Te(e,s){return!(!Array.isArray(e[s])||0!==e[s].length)&&(e[s]=[{}],!0)}function De(e,s){return!(!Array.isArray(e[s])||1!==e[s].length||!Oe(e[s][0])||0!==Object.getOwnPropertyNames(e[s][0]).length)&&(e[s]=[],!0)}function _e(e,s){return!(!Oe(e[s])||0!==Object.getOwnPropertyNames(e[s]).length)&&(e[s]=void 0,!0)}function Me(e,s,n){return!(!n.some((e=>/policy/i.test(e)))||!1!==e[s])&&(delete e[s],!0)}function Le(e,s,n={}){let t=0;do{t=Re(s=e.fromPartial(s),Pe),t+=Re(s,Te)}while(t>0);return Re(s,_e),Re(s,De),!0===n.cleanPolicies&&Re(s,Me),s}const Ue=["spotify:artist:5INjqkS1o8h1imAzPqGZBb","spotify:album:79dL7FLiJFOO0EoehUHQBv","spotify:track:6K4t31amVTZDgR3sKmwUJJ","spotify:show:1OLcQdw2PFDPG1jo3s0wbp","spotify:episode:0VpyIy8Srg5IKQdRAbDDH1"],Fe=Object.values(Ae.UH).filter((e=>"string"==typeof e)).map((e=>({name:e,value:(0,Ae.SP)(e)})));function Be(e,s){let n=0;const t=[];if(s.type.is("["))s.parent();else if(s.type.is("Property")){if(!s.firstChild())return[];t.unshift(e.sliceDoc(s.from+1,s.to-1)),s.parent()}for(;s.parent()&&!s.type.is("JsonText");){if(s.type.is("Array"))t.unshift("[]");else if(s.type.is("Property")){if(!s.firstChild())break;t.unshift(e.sliceDoc(s.from+1,s.to-1)),s.parent()}if(++n>1e4)break}return t}function Ve(e,s){for(const n of s)if("[]"===n){if(!Array.isArray(e)||0===e.length)return null;e=e[0]}else Object.hasOwn(e,n)&&(e=e[n]);return e}function He(e={}){return(0,pe.yU)({activateOnTyping:!1,override:[s=>{const n=(0,je.mv)(s.state).cursorAt(s.pos,-1);if(n.type.is("{")||n.type.is("Object")){const t=Be(s.state,n),a=function(e,s){return Object.getOwnPropertyNames(Ve(e,s))}(e,t);return{from:s.pos,options:a.map((e=>({type:"text",label:e,apply:`"${e}"`})))}}if(n.type.is("[")||n.type.is("Array")){const t=Be(s.state,n),a=Ve(e,t);return Array.isArray(a)&&Oe(a[0])?{from:s.pos,options:[{type:"text",label:"{ ... }",apply:JSON.stringify(a[0]),boost:1},{type:"text",label:"{}",boost:0}]}:/extension/i.test(t[t.length-1])?{from:s.pos,options:Fe.map((({name:e,value:s})=>({type:"constant",label:e,apply:`${s}`})))}:{from:s.pos,options:Ue.map((e=>({type:"text",label:`"${e}"`})))}}if(n.type.is("Property")){const t=Be(s.state,n),a=function(e,s){const n=Ve(e,s);return void 0===n?"null":Array.isArray(n)?"array":typeof n}(e,t),r=[];if("boolean"===a)r.push({type:"keyword",label:"true",boost:1}),r.push({type:"keyword",label:"false",boost:0});else if("null"===a)r.push({type:"keyword",label:"null",boost:1}),r.push({label:"{}",apply:"{}",boost:0});else if("string"===a){r.push({label:'""'});for(const e of Ue)r.push({label:`"${e}"`})}else if("number"===a)if(/extension/i.test(t[t.length-1]))for(const{name:e,value:s}of Fe)r.push({type:"constant",label:e,apply:`${s}`});else r.push({label:"0",apply:"0"}),r.push({label:"10",apply:"10"}),r.push({label:"100",apply:"100"});else"object"===a?r.push({label:"{}",apply:"{}"}):"array"===a&&r.push({label:"[]",apply:"[]"});return{from:s.pos,options:r}}return null}]})}const Je=[be.bM,(0,je.y9)(be.kS),(0,Ne.$K)(),(0,Ne.dz)(),(0,Ne.Wu)(),(0,Ne.VH)(),ye.$t.allowMultipleSelections.of(!0),Ne.w4.of([...xe.pw,...xe.cL,...pe.OO,...fe.Eo,xe.Yc]),(0,fe.$P)({top:!0,createPanel:e=>{const s=e.dom.ownerDocument.createElement("div");return(0,we.H)(s).render((0,E.jsx)(Ce.ID,{target:e.dom.ownerDocument.head,children:(0,E.jsx)(Ie,{view:e})})),{dom:s,top:!0}}}),(0,je.Lv)(),(0,ge.Pq)()],ze=[...Je,(0,xe.b6)(),(0,ve.bu)((0,ge.cp)()),(0,je.WD)(),(0,je.SG)(),(0,pe.wm)()],$e=[...Je,ye.$t.readOnly.of(!0)],Ze=new ye.xx,Ye=({readOnly:e=!1,onChange:s,onDiagnostics:n,editorRef:a,className:r})=>{const i=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const t=new Ne.Lz({parent:i.current,extensions:[...e?$e:ze,Ze.of(He({})),Ne.Lz.updateListener.of((e=>{e.docChanged&&s?.(e.state.doc.toString());for(const s of e.transactions)for(const e of s.effects)e.is(ve._k)&&n?.(e.value)}))]});return void 0!==a&&(a.current=t),()=>{t.destroy()}}),[e,s,n,a]),(0,E.jsx)("div",{className:r,ref:i})};function qe({readOnly:e,className:s,onChange:n,onDiagnostics:a}){const r=(0,t.useRef)(),i=(0,t.useRef)(n),l=(0,t.useRef)(a);i.current=n,l.current=a;const o=(0,t.useCallback)((()=>{const e=r.current;return void 0!==e?e.state.doc.toString():null}),[]),c=(0,t.useCallback)((e=>{const s=r.current;void 0!==s&&s.dispatch({changes:{from:0,to:s.state.doc.length,insert:e}})}),[]),d=(0,t.useCallback)((e=>{const s=r.current;void 0!==s&&s.dispatch({effects:Ze.reconfigure(He(e))})}),[]),u=(0,t.useCallback)((e=>{i?.current?.(e)}),[]),h=(0,t.useCallback)((e=>{l?.current?.(e)}),[]);return{Editor:(0,E.jsx)(Ye,{editorRef:r,readOnly:e,className:s,onChange:u,onDiagnostics:h}),getContent:o,setContent:c,setReference:d}}var We=n(35294),Ke=n(5247),Ge=n(56804),Qe=n(29006),Xe=n(20491),es=n(24136),ss=n(23305),ns=n(2226),ts=n(44561),as=n(67353),rs=n(76162),is=n(39030),ls=n(4209),os=n(27357),cs=n(51402),ds=n(29034),us=n(24640),hs=n(25641),ms=n(54564),ps=n(31771),xs=n(94901),gs=n(9849),js=n(34844),vs=n(22222),fs=n(21975),ys=n(20391),bs=n(54962),Ns=n(75349),ws=n(67722),Cs=n(44502),Ss=n(3105),ks=n(1230),Es=n(54586),Is=n(53183),As=n(25211),Os=n(65526),Rs=n(84998),Ps=n(79164),Ts=n(22658),Ds=n(45211),_s=n(82423);const Ms=[We.B,Ke.ve,Ge.Pc,Qe.BM,as.CJ,as.NB,as.uC,as.RI,as.UF,as.FY,as.B3,as.Dt,as.s,as.Xk,as.Yl,Xe.r,es.pt,ss.MI,ns.J1,ts.di,rs.BO,is.Pm,ls.Ww,os._w,cs.rM,cs.A5,cs.qM,ds.hN,us.NI,hs.lb,ms.xo,ps.IU,f.EW,xs.oW,gs.Gy,js.LN,vs.HG,_s._4,fs.Ag,ys._,bs.y9,Ns.A,ws.J4,Cs.xV,Ss.hA,ks.f_,Es.Ms,Is.NH,As.$A,Ae.sp,Os.GD,Rs.to1,Rs.hm7,Rs.hb0,Rs.Bl$,Rs.ZxE,Ts.aA,Ds.FZ,Ps.zW];function Ls(e){return JSON.parse(e,((e,s)=>null===s?void 0:s))}function Us(e){return JSON.stringify(e,((e,s)=>void 0===s?null:"bigint"==typeof s?s.toString():s),2)}function Fs(){const{serviceMap:e,serviceNames:s}=(0,t.useMemo)((()=>{const e=function(e){return Ms.sort(((e,s)=>e.SERVICE_ID.localeCompare(s.SERVICE_ID))).reduce(((s,n)=>(s[n.SERVICE_ID]={methods:n.METHODS,client:new n(e)},s)),{})}((0,b.X)());return{serviceMap:e,serviceNames:Object.keys(e)}}),[]),[n,a]=(0,t.useState)(s[0]),r=e[n].methods,i=e[n].client,l=Object.keys(r),[o,c]=(0,t.useState)(l[0]),d=r[o].requestType,u=r[o].isStreaming,h=i[o],m=(0,t.useCallback)(((s,n)=>{const t=s??Object.keys(e)[0],r=e[t].methods,i=n??Object.keys(r)[0];a(t),c(i)}),[e,a,c]),p=(0,t.useMemo)((()=>Us(Le(d,{},{cleanPolicies:!0}))),[d]),x=(0,t.useMemo)((()=>Le(d,{})),[d]),g=(0,t.useCallback)((e=>{try{return Us(Le(d,Ls(e),{cleanPolicies:!0}))}catch(s){return e}}),[d]),j=(0,t.useCallback)((async(e,s)=>{const n=d.fromPartial(Ls(e));if(u)return h.call(i,n,(e=>{s(Us(e))}));const t=await h.call(i,n);return s(Us(t)),null}),[i,u,d,h]);return{services:s,methods:l,service:n,method:o,client:i,message:d,call:j,jsonReference:x,jsonString:p,prettify:g,update:m}}const Bs="k0haAXLr7hf1SVRhhDf_",Vs="JzYBuC4I28TFE0vRsOB2",Hs="Jifrv_M5FQ_4004rxNlX",Js="ai8gaZdopia8aUEGYxks",zs="sSRpW8Sztpp8r_xEe6yQ",$s="xoLDWOSxKz7zqi5PkIS1",Zs="GuzyU8s8JXVn4PKEcz1o",Ys=()=>{const{services:e,methods:s,service:n,method:a,call:r,jsonReference:i,jsonString:l,prettify:o,update:c}=Fs(),d=(0,t.useRef)(null),[u,h]=(0,t.useState)(!1),[m,p]=(0,t.useState)([]),x=m.length>0,{Editor:g,setContent:v,getContent:f,setReference:y}=qe({className:Zs,onDiagnostics:e=>p(e)}),{Editor:b,setContent:N}=qe({className:Zs,readOnly:!0}),w=(0,t.useCallback)((()=>{null!==d.current&&(d.current.cancel(),d.current=null,h(!1))}),[h]),C=(0,t.useCallback)((async()=>{w();const e=await r(f()??"{}",(e=>{N(e)}));null!==e&&(d.current=e,h(!0))}),[r,w,f,N]),S=(0,t.useCallback)((async()=>{const e=o(f()??"{}");v(e)}),[o,f,v]);(0,t.useEffect)((()=>{y(i),v(l),N(""),w()}),[y,i,v,l,N,w]);const k=[{label:"Core",options:e.filter((e=>-1===e.indexOf("desktop"))).map((e=>({label:e,value:e})))},{label:"Desktop",options:e.filter((e=>-1!==e.indexOf("desktop"))).map((e=>({label:e,value:e})))}],I=s.map((e=>({label:e,value:e})));return(0,E.jsxs)("div",{className:Bs,children:[(0,E.jsxs)("div",{className:Vs,children:[(0,E.jsx)(j.E,{as:"p",variant:"bodyMedium",children:"Endpoint"}),(0,E.jsx)(me.Ay,{value:{label:n,value:n},options:k,onChange:e=>{c(e?.value??void 0)},styles:{menuList:s=>({...s,minHeight:`min(60vh, ${50*e.length}px)`})}}),(0,E.jsx)(me.Ay,{value:{label:a,value:a},options:I,onChange:e=>c(n,e?.value??void 0),styles:{menuList:e=>({...e,minHeight:`min(60vh, ${50*s.length}px)`})}})]}),(0,E.jsxs)("div",{className:Hs,children:[(0,E.jsxs)("div",{className:zs,children:[(0,E.jsx)(j.E,{as:"p",variant:"bodyMedium",children:"Request"}),(0,E.jsx)(he.n,{className:$s,size:"small",disabled:x,onClick:S,children:"Prettify"}),(0,E.jsx)(he.n,{className:$s,size:"small",disabled:x,onClick:u?w:C,children:u?"Cancel":"Send"})]}),g]}),(0,E.jsxs)("div",{className:Js,children:[(0,E.jsx)("div",{className:zs,children:(0,E.jsx)(j.E,{as:"p",variant:"bodyMedium",children:"Response"})}),b]})]})};var qs=n(16077);const Ws={ranges:[{name:"Basic Latin (ASCII)",start:"U+0000",end:"U+007F"},{name:"Latin-1 Supplement",start:"U+0080",end:"U+00FF"},{name:"Latin Extended-A",start:"U+0100",end:"U+017F"},{name:"Latin Extended-B",start:"U+0180",end:"U+024F"},{name:"Greek and Coptic",start:"U+0370",end:"U+03FF"},{name:"Cyrillic",start:"U+0400",end:"U+04FF"},{name:"Armenian",start:"U+0530",end:"U+058F"},{name:"Hebrew",start:"U+0590",end:"U+05FF"},{name:"Arabic",start:"U+0600",end:"U+06FF"},{name:"Devanagari",start:"U+0900",end:"U+097F"},{name:"General Punctuation",start:"U+2000",end:"U+206F"}]},Ks={},Gs=()=>{const e=(0,t.useRef)(null),s=(0,t.useRef)(null),n=(0,t.useRef)(null),a=(0,t.useRef)(null),r=(0,t.useCallback)((()=>{const e=n.current?.getBoundingClientRect().width,s=(0,qs.L)(n.current.textContent,20,400);a.current.textContent=`Real width: ${e}px, Estimated width: ${s}px`}),[]),i=(0,t.useCallback)((()=>{Ws.ranges.forEach((s=>{const n=parseInt(s.start.slice(2),16),t=parseInt(s.end.slice(2),16);for(let s=n;s<=t;s++){const n=String.fromCharCode(s),t=document.createElement("span");t.style.display="inline",t.style.fontSize="20px",t.style.fontWeight="400",t.textContent=n,e.current?.appendChild(t);const a=t.getBoundingClientRect().width,r=Math.floor(a/20*100);Ks[s]=r}})),s.current.textContent=JSON.stringify(Ks)}),[]);return(0,t.useEffect)((()=>{r()}),[r]),(0,E.jsxs)("div",{children:[(0,E.jsxs)("div",{children:[(0,E.jsx)("h2",{children:"Change the text below if the map is working correctly"}),(0,E.jsx)("div",{children:(0,E.jsx)("span",{contentEditable:!0,style:{fontSize:"20px",fontWeight:400,background:"#fff",border:"1px solid blue",margin:"16px 0",padding:"0px"},ref:n,onInput:r,children:"Lorem ipsum dolor sit amet."})}),(0,E.jsx)("pre",{ref:a})]}),(0,E.jsx)("hr",{}),(0,E.jsx)("h2",{children:"JSON font map output"}),(0,E.jsx)("div",{children:(0,E.jsx)("textarea",{style:{width:"100%",height:"200px"},ref:s})}),(0,E.jsx)("hr",{}),(0,E.jsx)("h2",{children:"Rendering Area"}),(0,E.jsx)("div",{children:(0,E.jsx)("button",{onClick:i,children:"Render chars"})}),(0,E.jsx)("div",{style:{width:"100%",maxWidth:"100%",border:"1px solid red"},ref:e})]})};var Qs=n(99912),Xs=n(17867),en=n(71536),sn=n(40748),nn=n(43889),tn=n(24900),an=n(80273),rn=n(92134),ln=n(64507),on=n(75627),cn=n(43494),dn=n(72744),un=n(977),hn=n(76698),mn=n(79450),pn=n(25214),xn=n(38551);var gn=n(32620);const jn="bJCivn96KnicF9OorMtA",vn="J4_D9yyu_KzwPD8HrEP8",fn="zSOvuirnU0EE_dZISOQG",yn="SQ59ocfu1aRXjYTP_E7I",bn="YlTDiTj7_ooJnrkjWaGI",Nn="v1ZF45YEwslZyIViHQr_",wn="PgqFMbfDZ0HaAaMKz2hg",Cn="L9rS2WwxiEjv6HLfbx0B",Sn="f4sDBZZ5uI0KiTmmnuGL",kn=()=>{const e=(0,pn.N)(xn.Z),{enqueueSnackbar:s}=(0,dn.d)(),n=V(),{Editor:a,setContent:r,getContent:i}=qe({readOnly:!0}),l=Object.values(mn.UH).filter((e=>"number"==typeof e)).map((e=>({value:e,label:mn.UH[e]}))),o=(0,t.useMemo)((()=>Object.fromEntries(l.map((e=>[e.value,e])))),[l]),[c,d]=(0,t.useState)(""),[u,m]=(0,hn.x)("mex-debug-extensions",[]),[x,v]=(0,hn.x)("mex-debug-extension-kinds-by-entity-uri-to-request",{}),[f,y]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(!f)return void r("");const{requestedExtensionKindsByEntityUri:e,extensionsByEntityUri:s}=f,n=Object.entries(e).map((([e,n])=>({entityUri:e,...Object.fromEntries(n.map((n=>[mn.UH[n],s[e]?.[n]])))})));r(JSON.stringify(n,null,2))}),[f,r]);const b=(0,t.useMemo)((()=>Array.from(new Set(Object.values(x).flat().filter((e=>!(0,mn.V$)(e)))))),[x]);return(0,E.jsxs)("div",{className:jn,children:[(0,E.jsx)(j.E,{as:"h2",variant:"titleMedium",semanticColor:"textBase",children:"Metadata extensions"}),(0,E.jsxs)("div",{className:vn,children:[(0,E.jsx)("form",{onSubmit:e=>{e.preventDefault(),e.stopPropagation();const n=c.split(/\n/).filter((e=>null!==(0,on.o_h)(e,{parseUnknown:!0})));if(!n.length)return void s(`Invalid entity URIs: "${c}"`);if(!u.length)return void s("Please select some metadata extensions before adding");const t=u.map((e=>e.value)),a=(0,gn.h)(x);for(const e of n)a[e]??=[],a[e]=Array.from(new Set([...a[e],...t]));v(a)},children:(0,E.jsxs)(Qs.a,{className:fn,variant:"tinted",tabIndex:-1,children:[(0,E.jsx)(j.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Add entities"}),(0,E.jsxs)(h.g,{label:"Entity URI(s)",labelFor:"entity-uri",children:[(0,E.jsx)(Xs.h,{id:"entity-uri",type:"text",placeholder:"Entity URI(s) to fetch extensions for",value:c,className:yn,autoFocus:!0,onChange:e=>{const s=e.currentTarget.value.trimStart().split(/([\s,]+)/).map(((e,s)=>s%2?"\n":(0,on.o_h)(e,{parseUnknown:!0})?.toURI()??e)).join("");d(s)},required:!0}),(0,E.jsx)(en.N,{children:"Entity URI(s) to request metadata extensions for."})]}),(0,E.jsxs)(h.g,{label:"Metadata extension(s)",labelFor:"metadata-extensions",children:[(0,E.jsx)(me.Ay,{value:u,id:"metadata-extensions",placeholder:"Metadata extension(s) to fetch",isMulti:!0,name:"Metadata extensions",options:l,onChange:e=>{m([...e])}}),(0,E.jsx)(en.N,{children:"Metadata extension(s) to request for the specified entity uri(s)."})]}),(0,E.jsx)(he.n,{className:Nn,type:"submit",disabled:!c||!u.length,children:"Add"})]})}),(0,E.jsxs)(Qs.a,{className:bn,variant:"tinted",tabIndex:-1,children:[(0,E.jsx)(j.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Added entities"}),Object.keys(x).length?(0,E.jsxs)(M.X,{children:[(0,E.jsxs)("colgroup",{children:[(0,E.jsx)("col",{width:"375px"}),(0,E.jsx)("col",{}),(0,E.jsx)("col",{width:"48px"})]}),(0,E.jsx)("thead",{children:(0,E.jsxs)(A.H,{children:[(0,E.jsx)(L.M,{children:"Entity"}),(0,E.jsx)(L.M,{children:"Extensions to request"}),(0,E.jsx)(L.M,{})]})}),(0,E.jsx)("tbody",{children:Object.entries(x).map((([e,t])=>(0,E.jsxs)(A.H,{children:[(0,E.jsx)(O.n,{condensed:!0,children:(0,E.jsx)(p.v,{iconLeading:()=>(0,E.jsx)(un.s,{size:"small",type:(0,on.o_h)(e)?.type}),onClick:()=>{n(e),s("URI copied to clipboard")},style:{marginBlockEnd:0},children:e})}),(0,E.jsx)(O.n,{condensed:!0,children:(0,E.jsx)(me.Ay,{value:t.map((e=>o[e])),placeholder:"Metadata extension(s) to fetch",isMulti:!0,isClearable:!1,name:"Metadata extensions",options:l,onChange:s=>{const n=(0,gn.h)(x);n[e]=s.map((e=>e.value)),v(n)}})}),(0,E.jsx)(O.n,{condensed:!0,children:(0,E.jsx)(cn.Zp,{label:"Remove entity",children:(0,E.jsx)(sn.H,{className:Nn,iconOnly:Ee.M,label:"Remove",onClick:()=>{const{[e]:s,...n}=x;v(n)}})})})]},e)))})]}):(0,E.jsxs)(nn.p,{icon:tn.Z,variant:"contextual",children:[(0,E.jsx)(an.R,{children:"No entities added"}),(0,E.jsx)(rn.S,{children:"Add entities to request metadata extensions for and they'll be listed here."})]})]})]}),(0,E.jsxs)("div",{className:wn,tabIndex:-1,children:[(0,E.jsx)(g.$,{className:Nn,onClick:async()=>{const s=x,n=new Map,t=new Map;for(const[e,s]of Object.entries(x)){const a=s.slice().sort().toString();n.has(a)||n.set(a,s);const r=n.get(a);t.set(r,(t.get(r)??[]).concat(e))}const a=await Promise.all(Array.from(t.entries()).map((([s,n])=>e.fetch(n,s)))).then((e=>Object.fromEntries(e.flat().map((({uri:e,extensions:s})=>[e,s])))));y({requestedExtensionKindsByEntityUri:s,extensionsByEntityUri:a})},children:"Fetch extensions"}),(0,E.jsx)(he.n,{className:Nn,onClick:async()=>{const n=new Map;for(const[e,s]of Object.entries(x))for(const t of s)n.has(t)||n.set(t,[]),n.get(t)?.push(e);await Promise.all(Array.from(n.entries()).map((([s,n])=>e.expire(n,s)))),s("Extensions expired!")},children:"Expire extensions"})]}),f&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ln.d,{}),(0,E.jsxs)("div",{className:Sn,tabIndex:-1,children:[(0,E.jsxs)("div",{className:Cn,children:[(0,E.jsx)(j.E,{variant:"titleMedium",as:"h2",semanticColor:"textBase",children:"Response"}),(0,E.jsxs)("div",{children:[(0,E.jsx)(cn.Zp,{label:"Copy response to clipboard",children:(0,E.jsx)(sn.H,{className:Nn,iconOnly:P._,onClick:()=>{n(i()??void 0),s("Response copied to clipboard")}})}),(0,E.jsx)(cn.Zp,{label:"Clear response",children:(0,E.jsx)(sn.H,{className:Nn,iconOnly:Ee.M,onClick:()=>{y(null)}})})]})]}),b.length?(0,E.jsxs)(Qs.a,{variant:"contrasting",colorSet:"warning",children:[(0,E.jsx)(j.E,{variant:"titleSmall",paddingBottom:"tighter-2",as:"h3",children:"Warning: requested extensions lacking decoders:"}),(0,E.jsx)("div",{children:b.map((e=>(0,E.jsx)(p.v,{children:mn.UH[e]},e)))}),(0,E.jsx)(j.E,{variant:"bodyMedium",paddingBottom:"tighter-2",children:"You might want to add proto files and generate a decoders for these in the MetadataExtensionsAPI."})]}):null,a]})]})]})};var En=n(57615),In=n(5444),An=n(95976),On=n(54261),Rn=n(97589),Pn=n(70111),Tn=n(44936),Dn=n(15684),_n=n(90319);var Mn=n(54189),Ln=n(39255);var Un=n(84014),Fn=n(49502);const Bn=({size:e,ranges:s})=>{if(0===s.length)return(0,E.jsx)("div",{className:Z,children:(0,E.jsx)("div",{className:Y})});const n=`linear-gradient(90deg, ${s.map((s=>{const n=100*s.fromByte/e,t=100*s.toByte/e;return`transparent ${n}%, ${En.pfM} ${n}%, ${En.pfM} ${t}%, transparent ${t}%`})).join(", ")})`;return(0,E.jsx)("div",{className:Z,children:(0,E.jsx)("div",{className:Y,style:{background:n}})})},Vn=({item:e,file:s})=>{const n=(0,H.z)(),t=V(),a=(function(e){let s,n,t=0;if(0===e.length)return t;for(s=0;s<e.length;s++)n=e.charCodeAt(s),t=(t<<5)-t+n,t|=0;return t}(`${s.format}${s.bitrate}${s.formatEnum}`)+180)%360;return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:(0,E.jsxs)("div",{className:q,style:{background:`linear-gradient(180deg, hsl(${a}, 60%, 30%), hsl(${a}, 40%, 70%))`},children:[(0,E.jsx)("span",{className:W,children:s.format}),(0,E.jsx)("span",{className:K,children:Hn(s)})]})}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,children:(0,E.jsxs)("div",{className:$,children:[s.fileId,(0,E.jsx)(Bn,{size:s.byteSize,ranges:s.byteRanges})]})}),(0,E.jsxs)(O.n,{className:U.rowActions,children:[(0,E.jsx)("button",{className:U.rowAction,onClick:()=>{n.play({uri:"spotify:internal:fileplayback",pages:[{items:[{...e,provider:"context",metadata:{"media.manifest":JSON.stringify({id:s.fileId,bitrate:s.bitrate,format:s.formatEnum,encryption:"aes"})}}]}]},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,E.jsx)(R.A,{size:"small"})}),(0,E.jsx)("button",{className:U.rowAction,onClick:()=>{t(s.fileId)},children:(0,E.jsx)(P._,{size:"small"})})]})]})};function Hn(e){switch(e.formatEnum){case 16:return"16-bit";case 22:return"24-bit";default:return Jn(e.bitrate,1e3,"k")}}function Jn(e=void 0,s=1,n=""){if(void 0!==e&&-1!==e)return"string"==typeof e&&(e=Number.parseInt(e,10)),`${(Number(e)/s).toLocaleString("en",{maximumFractionDigits:10})}${n}`}function zn(e=void 0){return!0===e?"Yes":"No"}function $n(e=void 0){if(void 0!==e)return(0,Fn.f)(Number(e))}const Zn=({name:e,value:s})=>{const n=V();return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:e}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:s}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>n(s),children:(0,E.jsx)(P._,{size:"small"})})})]})},Yn=({terminalType:e,transportType:s,isDefaultDevice:n})=>{const t=n?"essentialPositive":"essentialBase",a=[];switch(e){case fs.FI.TERMINAL_TYPE_SPEAKERS:a.push((0,E.jsx)(In.r,{semanticColor:t,size:"small"}));break;case fs.FI.TERMINAL_TYPE_HEADPHONES:a.push((0,E.jsx)(An.r,{semanticColor:t,size:"small"}));break;case fs.FI.TERMINAL_TYPE_DISPLAY_DEVICE:a.push((0,E.jsx)(On.I,{semanticColor:t,size:"small"}))}switch(s){case fs.Yg.TRANSPORT_TYPE_BUILT_IN:case fs.Yg.TRANSPORT_TYPE_VIRTUAL:break;case fs.Yg.TRANSPORT_TYPE_USB:a.push((0,E.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",style:{position:"relative",top:"3px",width:16,height:16,fill:(0,Rn.oj)(t)},children:(0,E.jsx)("path",{d:"m7.792.312-1.533 2.3A.25.25 0 0 0 6.467 3H7.5v7.319a2.5 2.5 0 0 0-.515-.298L5.909 9.56A1.5 1.5 0 0 1 5 8.18v-.266a1.5 1.5 0 1 0-1 0v.266a2.5 2.5 0 0 0 1.515 2.298l1.076.461a1.5 1.5 0 0 1 .888 1.129 2.001 2.001 0 1 0 1.021-.006v-.902a1.5 1.5 0 0 1 .756-1.303l1.484-.848A2.5 2.5 0 0 0 11.995 7h.755a.25.25 0 0 0 .25-.25v-2.5a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.5c0 .138.112.25.25.25h.741a1.5 1.5 0 0 1-.747 1.142L8.76 8.99a2.584 2.584 0 0 0-.26.17V3h1.033a.25.25 0 0 0 .208-.389L8.208.312a.25.25 0 0 0-.416 0Z"})}));break;case fs.Yg.TRANSPORT_TYPE_BLUETOOTH:a.push((0,E.jsx)(Pn.C,{semanticColor:t,size:"small"}));break;case fs.Yg.TRANSPORT_TYPE_DISPLAY_DEVICE:a.push((0,E.jsx)(On.I,{semanticColor:t,size:"small"}))}return 0===a.length&&a.push((0,E.jsx)(Tn.N,{semanticColor:t,size:"small"})),(0,E.jsx)(E.Fragment,{children:a})},qn=({name:e,id:s,isDefaultDevice:n,terminalType:t,terminalTypeRaw:a,transportType:r,transportTypeRaw:i})=>{const l=V();return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsxs)(O.n,{className:U.rowName,highlight:!0,children:[(0,E.jsx)(Yn,{terminalType:t,transportType:r,isDefaultDevice:n})," ",e]}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,children:s}),(0,E.jsx)(O.n,{className:U.rowValue,children:a}),(0,E.jsx)(O.n,{className:U.rowValue,children:i}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>l(s),children:(0,E.jsx)(P._,{size:"small"})})})]})},Wn=()=>{const e=(0,Un.o)((e=>e?.item??null)),s=function(){const[e,s]=(0,t.useState)(null),n=(0,_n.p)();return(0,t.useEffect)((()=>{let e=!0;return n.getPlaybackInfo().then((n=>{e&&s(n)})),()=>{e=!1}}),[n]),(0,Ln.F)(Mn._.INFO,(({data:e})=>{s(e)})),e}(),n=function(e=null,s=null){const[n,a]=(0,t.useState)(null),r=(0,_n.p)();return(0,t.useEffect)((()=>{let n=!0,t=null;if(null===e)a(null);else{const i=async()=>{const s=await r.getFiles(e);n&&a(s)};i(),null!==s&&(t=window.setInterval(i,s))}return()=>{n=!1,null!==t&&window.clearInterval(t)}}),[r,e,s]),n}(e?.uri,500),a=(0,H.z)(),[r,i]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const e=(0,b.X)(),s=new fs.Ag(e).getAudioOutputDevices({},(e=>{i(e.devices.sort(((e,s)=>e.isDefaultDevice?-1:s.isDefaultDevice?1:e.name.localeCompare(s.name))))}));return()=>{s.cancel()}}),[]),null===e?(0,E.jsx)("div",{className:z,children:"Nothing is currently playing."}):(0,E.jsxs)("div",{className:z,children:[(0,E.jsxs)("div",{className:G,children:[(0,E.jsx)(j.E,{variant:"bodySmallBold",children:"Forced shuffle"}),(0,E.jsx)(Dn.l,{id:"forced-shuffe",value:a.getForcedShuffle(),onSelected:e=>{a.setForcedShuffle(e)}})]}),(0,E.jsx)("div",{children:(0,E.jsx)("button",{className:Q,onClick:()=>{a.play({uri:"invalid_context_uri"},{referrerIdentifier:"PlayerStub_UnknownReferrer",featureIdentifier:"debug"})},children:(0,E.jsx)("span",{children:"Clear context"})})}),(0,E.jsx)(F,{title:"Devices",rows:r,cols:[{name:"Name",width:"30%"},{name:"ID"},{name:"Terminal"},{name:"Transport"},{name:"Actions",width:"16px"}],renderRow:e=>(0,E.jsx)(qn,{...e}),canCollapse:!0}),(0,E.jsx)(F,{title:"Details",rows:[{name:"url"===s?.fileType?"URL":"File ID",value:s?.fileId},{name:"Type",value:s?.fileType},{name:"Codec",value:s?.codecName},{name:"Bitrate",value:Jn(s?.fileBitrate,1e3,"k")},{name:"Strategy",value:s?.strategy},{name:"Target Bitrate",value:Jn(s?.targetBitrate,1e3,"k")},{name:"Advisted Bitrate",value:Jn(s?.advisedBitrate,1e3,"k")},{name:"Target File Available",value:zn(s?.targetFileAvailable)},{name:"Duration (hh:mm)",value:$n(s?.lengthMs)},{name:"Duration (ms)",value:Jn(s?.lengthMs,1," ms")},{name:"Speed",value:Jn(s?.playbackSpeed)},{name:"Gain Adjustment",value:Jn(s?.gainAdjustment)},{name:"Loudness",value:s?.hasLoudness?Jn(s?.loudness):void 0}],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:e=>(0,E.jsx)(Zn,{...e}),canCollapse:!0}),(0,E.jsx)(F,{title:"Files",rows:n??[],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:s=>(0,E.jsx)(Vn,{item:e,file:s},s.fileId),canCollapse:!0,isCollapsedInitially:!0})]})},Kn="wNixUJkDt8ib6LarXls_",Gn=()=>{const e=(0,Un.o)((e=>e)),s=JSON.stringify(e,null,2),{Editor:n,setContent:a}=qe({readOnly:!0});return(0,t.useEffect)((()=>{a(s)}),[s,a]),(0,E.jsx)("div",{className:Kn,children:n})};var Qn=n(1978),Xn=n(45210);const et="cD9jN2lI075m3UkqXSlQ",st=({playlistUri:e})=>{const s=(0,Xn.J)(e,{decorateFormatListData:!0}),{Editor:n,setContent:a}=qe({readOnly:!0});return(0,t.useEffect)((()=>{const e=JSON.stringify(s,null,2);a(e)}),[s,a]),n},nt=()=>{const e=(0,Qn.zy)(),s=(0,on.o_h)(e.pathname),n=(0,on.nuB)(s);return(0,E.jsx)("div",{className:et,children:n?(0,E.jsx)(st,{playlistUri:s.toURI()}):(0,E.jsx)(j.E,{variant:"bodyMedium",children:"Navigate to a playlist to see metadata here."})})};var tt=n(55232);const at=()=>{const{data:e}=(0,tt.k)(),s=Object.keys(e).sort().reduce(((s,n)=>(s[n]=e[n],s)),{}),n=JSON.stringify(s,null,2),{Editor:a,setContent:r}=qe({readOnly:!0});return(0,t.useEffect)((()=>{r(n)}),[n,r]),(0,E.jsx)("div",{className:et,children:a})};var rt=n(61185),it=n(81643),lt=n(57997),ot=n(84637),ct=n(23571);function dt(e,s){const n=(0,ct.x)();(0,t.useEffect)((()=>n.getEvents().addListener(e,s)),[e,s,n])}var ut=n(43086);const ht="Gc_xi0GmVaC4DyViocdz",mt="uliJIthMaP5kUx2IpElY",pt="h0NXdJlkjupX8nTYlhhc",xt=({name:e,value:s})=>{const n=V();return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:e}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:s}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>n(s),children:(0,E.jsx)(P._,{size:"small"})})})]})},gt=()=>{const e=(()=>{const e=(0,ct.x)(),[s,n]=(0,t.useState)(e.getSubscriptions()),a=(0,t.useCallback)((()=>{n(e.getSubscriptions())}),[e,n]);return dt(ot.K.SUBSCRIBE,a),dt(ot.K.CANCEL,a),dt(ot.K.REFRESH,a),s})(),s=V(),n=Object.entries((a=e=>`${e.ident}${e.isPrefix?"*":""}`,e.reduce(((e,s)=>{const n=a(s);return(e[n]=e[n]||[]).push(s),e}),{})));var a;return(0,E.jsx)(F,{title:"Subscriptions",rows:n,cols:[{name:"Ident"},{name:"Actions",width:"16px"}],renderRow:([e,n])=>(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsxs)(O.n,{className:U.rowValue,truncate:!0,children:[e," (",n.length,")"]}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>s(e),children:(0,E.jsx)(P._,{size:"small"})})})]},e),canCollapse:!0})};function jt(e){if(e.ident.endsWith("/json"))return!0;if(0===e.payloads.length)return!1;const s=(0,ut.dI)(e.payloads[0]);return s.length>0&&"{"===s[0]}const vt=({message:e})=>{const[s,n]=(0,t.useState)(!1),{Editor:a,setContent:r}=qe({readOnly:!0});return(0,t.useEffect)((()=>{if(0!==e.payloads.length)if(jt(e)){const s=JSON.parse((0,ut.dI)(e.payloads[0]));r(JSON.stringify(s,void 0,2))}else{const s=(0,ut.U5)(e.payloads[0]);r(JSON.stringify(s,void 0,2))}}),[e,r]),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,children:new Date(e.timestamp).toLocaleString()}),(0,E.jsx)(O.n,{className:U.rowName,children:e.ident}),(0,E.jsxs)(O.n,{className:U.rowName,children:[(0,E.jsx)("button",{className:U.rowAction,onClick:()=>n(!s),children:(0,E.jsx)(rt.W,{size:"small"})}),(0,E.jsx)(lt.M,{isOpen:s,className:pt,onRequestClose:()=>n(!1),shouldCloseOnEsc:!0,shouldCloseOnBackdropClick:!0,animated:!0,children:a})]})]})},ft=()=>{const e=(0,ct.x)(),[s,n]=(0,t.useState)(0),[a,r]=(0,t.useState)(!0);dt(ot.K.MESSAGE,(()=>{n(s+1)}));const i=a?e.getMessages().filter(jt):e.getMessages();return(0,E.jsx)(F,{title:"Messages",titleExtra:(0,E.jsxs)("div",{className:mt,children:[(0,E.jsx)(it.c,{id:"json-only",size:"small",checked:a,onChange:()=>r(!a)}),(0,E.jsx)(j.E,{as:"label",htmlFor:"json-only",variant:"marginal",children:"JSON only"})]}),rows:i,cols:[{name:"Time",width:"200px"},{name:"Ident"},{name:"Payload",width:"16px"}],renderRow:(e,s)=>(0,E.jsx)(vt,{message:e},`${s}-${e.ident}-${e.timestamp}`),canCollapse:!0})},yt=()=>{const e=(()=>{const e=(0,ct.x)(),[s,n]=(0,t.useState)(null);(0,t.useEffect)((()=>{e.getConnectionId().then((e=>n(e)))}),[e,n]);const a=(0,t.useCallback)((e=>n(e.data.connectionId)),[n]);return dt(ot.K.CONNECTION,a),s})();return(0,E.jsxs)("div",{className:ht,children:[(0,E.jsx)(F,{title:"PubSub",rows:(0,E.jsx)(xt,{name:"Connection ID",value:e??"-"}),cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}]}),(0,E.jsx)(gt,{}),(0,E.jsx)(ft,{})]})};var bt=n(40638),Nt=n(66696),wt=n(49720),Ct=n(16607),St=n(42514),kt=n(78358),Et=n(15758),It=n(50217),At=n(59371),Ot=n(9303);const Rt=36e5;var Pt=n(57931),Tt=n(63393),Dt=n(56177),_t=n(15249);const Mt="CPh1NBIPIZdD7S5EeAJw",Lt="ImIlB71ObQKbFW5YUTmT",Ut="TzXFebu8XWPbINPiP4rs",Ft="MigGXxVYX9Yi6_lGrDwe",Bt="oyMDrjEp_otdJzIKn5YC",Vt=({property:e,value:s,onOverride:n,isOverridden:t})=>{if("int"===e.type||"internal"===e.type)throw Error("Invalid property type for dropdown!");const a="bool"===e.type?["true","false"]:e.values;return(0,E.jsx)(v.F,{id:`${e.name}-dropdown`,value:(s??e.default).toString(),onChange:s=>{var t;n(e.name,(t=s.currentTarget.value,"bool"===e.type?"true"===t:t))},className:r()({[Ft]:t}),children:a.map((e=>(0,E.jsx)("option",{value:e,children:e},e)))})},Ht=({property:e,value:s,onOverride:n,isOverridden:a})=>{if("int"!==e.type)throw Error("Invalid property type for dropdown!");const[i,l]=(0,t.useState)(s??e.default),o=(0,bt.YQ)((s=>{n(e.name,s)}),500);return(0,E.jsx)(x.Z,{type:"number",min:e.lower,max:e.upper,value:i,onChange:e=>{l(e.currentTarget.value),o(Number.parseInt(e.currentTarget.value,10))},className:r()({[Ft]:a})})},Jt=({property:e,localValue:s,remoteValue:n,experimentUrl:t,isRemoteUserSpecificOverride:a,onOverride:r,filter:i})=>{const l=s!==n,o=e.default.toString(),c=n?.toString();let d=(t||o!==c?c:null)??null;return d&&t&&(d=(0,E.jsxs)("a",{href:t,target:"_blank",className:Bt,children:[c,a&&(0,E.jsx)(Nt.o,{size:"small"})]}),a&&(d=(0,E.jsx)(cn.Zp,{label:"This value comes from a user-specific override in the linked experiment.",children:d}))),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsxs)(O.n,{className:U.rowName,title:e.name,highlight:!0,children:[(0,E.jsx)("a",{href:`https://sites.spotify.net/s/hyperlink?path=property-experiments&property=${e.name}`,rel:"noopener noreferrer",target:"_blank",children:i?(0,E.jsx)(St.M,{searchWords:[i??""],textToHighlight:e.name}):e.name}),(0,E.jsx)("div",{className:U.propertyDescription,children:e.description})]}),(0,E.jsx)(O.n,{className:U.rowValue,children:o}),(0,E.jsx)(O.n,{className:U.rowValue,children:d}),(0,E.jsx)(O.n,{className:U.rowValue,children:"bool"===e.type||"enum"===e.type?(0,E.jsx)(Vt,{property:e,value:s,onOverride:r,isOverridden:l}):"int"===e.type?(0,E.jsx)(Ht,{property:e,value:s,onOverride:r,isOverridden:l}):null})]})},zt="debugPanelRemoteConfigLastChangedAtByPropertyName",$t=({properties:e,localConfiguration:s,remoteConfiguration:n,setOverrides:a,clearOverrides:r})=>{const{filter:i}=(0,t.useContext)(kt.g),l=(0,_t.q)(),o=()=>{const e=l.getItem(zt);return e instanceof Tt.m||e instanceof Dt.Y?{}:e},c=(e,s)=>{a(wt.Vk.fromJSON({[e]:s})),l.setItem(zt,{...o(),[e]:Date.now()})},d=(0,t.useRef)(o()),u=e.sort(((e,s)=>(d.current[s.name]??0)-(d.current[e.name]??0)||e.name.localeCompare(s.name))),h=function(){const e=(0,At.d)(),s=(0,tt.k)(),n=(0,It.C)()?.username,a=(0,t.useMemo)((()=>wt.mA.getPropertySetId({clientId:e.remote_config_client_id},(0,wt.v6)(),[])),[e.remote_config_client_id]),r=(0,t.useMemo)((()=>{if(!e||!s.data||!n)return null;const t="web-player"===e.remote_config_client_id||"1"===s.data.employee;return{data:{platform:"WEB",clientId:e.remote_config_client_id,country:s.data.country,propertySetKey:a,clientVersion:e.event_sender_context_information?.client_version_string??"",installationId:e.event_sender_context_information?.installation_id??"",oauthClientId:e.event_sender_context_information?.client_id??"",employee:t,catalogue:s.data.catalogue,originPlatform:e.app_platform,originVersion:e.os_version??"",userName:n}}}),[n,e,s.data,a]),{data:i}=(0,Et.I)({queryKey:["traceback-config"],queryFn:()=>(0,Ot.V)().request("https://remote-configuration-resolver.spotify.net/debug/traceback-config",{method:"POST",responseType:"json",headers:{"content-type":"application/json"},payload:JSON.stringify(r)}).then((e=>{const s=e.body;return Object.fromEntries(s.data.map((e=>[e.name,e])))})),staleTime:5e3,gcTime:Rt,refetchInterval:Rt,refetchOnWindowFocus:!1,enabled:!!r});return i??{}}();return(0,E.jsxs)("div",{className:Lt,children:[(0,E.jsxs)("div",{className:Ut,children:[(0,E.jsx)(he.n,{size:"small",onClick:()=>{r(),l.clearItem(zt)},children:"Clear local overrides"}),(0,E.jsx)(Ct.S,{placeholder:"Find",alwaysExpanded:!0})]}),(0,E.jsx)(T.K,{children:(0,E.jsxs)(M.X,{children:[(0,E.jsxs)("colgroup",{children:[(0,E.jsx)("col",{width:"30%"}),(0,E.jsx)("col",{}),(0,E.jsx)("col",{})]}),(0,E.jsxs)("tbody",{children:[(0,E.jsxs)(A.H,{children:[(0,E.jsx)(L.M,{className:U.rowHeader,children:"Name"}),(0,E.jsx)(L.M,{className:U.rowHeader,children:"Default"}),(0,E.jsx)(L.M,{className:U.rowHeader,children:"Remote"}),(0,E.jsx)(L.M,{className:U.rowHeader,children:"Local"})]}),u.filter((e=>-1!==e.name.toLowerCase().indexOf(i.toLowerCase()))).map((e=>(0,E.jsx)(Jt,{property:e,localValue:s.getValue(e.name),remoteValue:n.getValue(e.name),experimentUrl:h?.[e.name]?.experimentRef?.experimentUrl,isRemoteUserSpecificOverride:h?.[e.name]?.isOverride??!1,onOverride:c,filter:i},e.name)))]})]})})]})},Zt=()=>{const e=[...(0,wt.v6)()],{localConfiguration:s,remoteConfiguration:n,setOverrides:t,clearOverrides:a}=(0,Pt.g)();return(0,E.jsx)("div",{className:Mt,children:(0,E.jsx)(kt.s,{uri:"spotify:internal:debug:remote-config-properties",children:(0,E.jsx)($t,{properties:e,localConfiguration:s,remoteConfiguration:n,setOverrides:t,clearOverrides:a})})})},Yt="wTIZy4hwIIwMdmqm93rW",qt="g2bLOY5W1sbuXtffHyDY",Wt=()=>{const e=(0,Qn.zy)(),s=(0,Qn.Zp)(),n=e=>{s(e,{state:{preventMoveFocus:!0}})},t=(0,on.o_h)(e.pathname);return(0,E.jsxs)("div",{className:Yt,children:[(0,E.jsxs)("form",{onSubmit:e=>{e.preventDefault();const s=new FormData(e.target).get("navigateTo").toString(),t=new URL(s,"https://open.spotify.com");t.hostname&&t.pathname?n(t.pathname+t.search+t.hash):n(s)},className:qt,children:[(0,E.jsx)("label",{htmlFor:"navigate-input",children:"Navigate to"}),(0,E.jsx)(j.E,{variant:"bodySmall",as:"input",style:{color:En.Ql9},name:"navigateTo",id:"navigate-input",type:"text",placeholder:"ex. /search/nirvana",onKeyDown:e=>{"ArrowLeft"!==e.key&&"ArrowRight"!==e.key||e.stopPropagation()}})]}),(0,E.jsx)("h2",{children:"Current location:"}),(0,E.jsxs)("ul",{children:[(0,E.jsxs)("li",{children:["Location: ",e.pathname]}),e.search&&(0,E.jsxs)("li",{children:["Search params: ?",e.search]}),e.hash&&(0,E.jsxs)("li",{children:["Hash params: #",e.hash]}),t?(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("li",{children:["URL: ",t.toURL()]}),(0,E.jsxs)("li",{children:["URI: ",t.toURI()]})]}):(0,E.jsx)("li",{children:"Not parseable as a Spotify URI!"}),(0,E.jsxs)("li",{children:["Location state: ",(0,E.jsx)("pre",{children:JSON.stringify(e.state,null,2)})]})]})]})};var Kt=n(95825),Gt=n(26027),Qt=n(19412);const Xt=()=>{const{localConfiguration:e,setOverrides:s}=(0,Pt.g)();return(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"React-Query Cache Persistence"}),(0,E.jsx)(O.n,{className:U.rowValue,align:"right",children:(0,E.jsx)(Kt.X,{checked:e.getValue(Qt.QMQ),onChange:e=>{s(wt.Vk.fromJSON({enableReactQueryPersistence:Boolean(e.target.checked)}))},children:"Enabled"})}),(0,E.jsx)(O.n,{className:U.rowValue,align:"right",children:(0,E.jsx)(g.$,{size:"small",onClick:()=>{(0,Gt.k)()},children:"Clear cache"})})]})},ea=()=>(0,E.jsx)("div",{className:z,children:(0,E.jsx)(F,{title:"Development options",rows:(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(Xt,{})}),cols:[],canCollapse:!0})});var sa=n(61673),na=n(51945),ta=n(22345),aa=n(31528),ra=n(95440),ia=n(90410),la=n(66686),oa=n(38117),ca=n(28261),da=n(4316),ua=function(e){return e.IPL="IN_PERSON",e.RGS="REMOTE",e}(ua||{});var ha=n(4552);function ma({obj:e}){return(0,E.jsx)(M.X,{children:(0,E.jsx)("tbody",{children:Object.entries(e).map((e=>(0,E.jsx)(pa,{name:e[0],value:e[1]},e[0])))})})}function pa({name:e,value:s}){const n=V();let t;return"string"==typeof s||"number"==typeof s?t=s:"boolean"==typeof s?t=(0,E.jsx)(Kt.X,{defaultChecked:s,isActive:!1,onClick:e=>{e.preventDefault()}}):"object"==typeof s&&null!==s&&(t=(0,E.jsx)(ma,{obj:s})),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:e}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:t}),(0,E.jsx)(O.n,{className:U.rowActions,children:(0,E.jsx)("button",{className:U.rowAction,onClick:()=>{void 0!==s&&n("object"==typeof s?JSON.stringify(s):s.toString())},children:(0,E.jsx)(P._,{size:"small"})})})]})}var xa=n(72509),ga=n(76766),ja=n(70865),va=n(7917);var fa=n(5617),ya=n(79937);const ba=({deviceId:e,title:s,tech:n,type:t,token:a,isNew:r})=>{const i=(0,ga.d)(),{data:l}=(0,Et.I)({queryKey:["scannedDeviceRowJam",a],queryFn:()=>i.getSessionInfo(a),refetchInterval:3e4}),{data:o}=(0,Et.I)({queryKey:["scannedDeviceVisibility",l?.sessionId],queryFn:l?.sessionId?()=>i.getLocalNetSesssionDeviceVisibility(l.sessionId):xa.hT,refetchInterval:3e4});return(0,E.jsx)(F,{title:s,rows:[{name:"Device ID",value:e},{name:"Tech",value:ya.x[n]},{name:"Type",value:ya.Z[t]},{name:"Token",value:a},{name:"Is new",value:r.toString()},...l?[{name:"Jam session id",value:l.sessionId},{name:"Jam session owner is self",value:l.isSessionOwner.toString()},{name:"Jam session owner",value:l.sessionMembers.find((e=>e.id===l.sessionOwnerId))?.displayName},{name:"Local device visibility",value:o?fa.MS[o]:null}]:[]],cols:[{name:"Property",width:"30%"},{name:"Value"},{name:"Actions",width:"16px"}],renderRow:({name:e,value:s})=>(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:e}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:s})]}),canCollapse:!0,isCollapsedInitially:!0},e)},Na=()=>{const e=(()=>{const e=(0,ga.d)(),[s,n]=(0,t.useState)(e.getLocalNetSessionDevices());return(0,va.c)(ja.P.SCAN_UPDATE,(()=>{n(e.getLocalNetSessionDevices())})),s})();return e?.devices.map((e=>(0,E.jsx)(ba,{...e},e.deviceId)))};var wa=n(29093),Ca=n(26595),Sa=n(21289);const ka=[{title:"Debugging Info",Component:()=>{const e=(0,Sa.M)(),s=(0,Ca.C)(),n=(0,wa.y)(),{currentSession:t}=(0,da.D)(),[a]=(0,hn.x)("dismissStartJamButtonFromQueue",!1),[r]=(0,hn.x)("dismissStartJamButtonFromFriendFeed",!1);return(0,E.jsx)(T.K,{children:(0,E.jsxs)(M.X,{children:[(0,E.jsxs)("colgroup",{children:[(0,E.jsx)("col",{width:"30%"}),(0,E.jsx)("col",{}),(0,E.jsx)("col",{width:"16px"})]}),(0,E.jsxs)("tbody",{children:[(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"useIsSocialConnectAPIEnabled"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:e})]}),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"useJamExperience()"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:s})]}),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"Is current Jam active?"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:t?.active.toString()??"null"})]}),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"useCanCreateJam()"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:n.toString()})]}),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"Jam banner dismissed from queue"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:a.toString()})]}),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"Jam banner dismissed from friend feed"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:r.toString()})]}),(0,E.jsxs)(A.H,{hover:!0,children:[(0,E.jsx)(O.n,{className:U.rowName,highlight:!0,children:"Scanned devices"}),(0,E.jsx)(O.n,{className:U.rowValue,truncate:!0,align:"right",children:(0,E.jsx)(M.X,{children:(0,E.jsx)("tbody",{children:(0,E.jsx)(Na,{})})})})]})]})]})})}},{title:"Current Session",Component:()=>{const{currentSession:e,refreshCurrentSession:s}=(0,da.D)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(sn.H,{iconOnly:ha.H,onClick:()=>{s()}}),(0,E.jsx)(T.K,{children:e&&(0,E.jsxs)(M.X,{children:[(0,E.jsxs)("colgroup",{children:[(0,E.jsx)("col",{width:"30%"}),(0,E.jsx)("col",{}),(0,E.jsx)("col",{width:"16px"})]}),(0,E.jsx)("tbody",{children:Object.entries(e).map((e=>(0,E.jsx)(pa,{name:e[0],value:e[1]},e[0])))})]})})]})}},{title:"Create New Session",Component:()=>{const{createSession:e}=(0,da.D)(),[s,n]=(0,t.useState)(null),[a,r]=(0,t.useState)(ua.IPL),i=(0,ra.wA)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{children:"Create a new session as your current user (does nothing if you already have a session)"}),(0,E.jsxs)("div",{className:U.rowControl,children:[(0,E.jsxs)(oa.C,{id:"sessionTypeDropdown",value:a,onSelect:e=>{switch(e){case ua.IPL:r(ua.IPL);break;case ua.RGS:r(ua.RGS);break;default:r(ua.IPL)}},children:[(0,E.jsx)("option",{value:ua.IPL,children:ua.IPL},ua.IPL),(0,E.jsx)("option",{value:ua.RGS,children:ua.RGS},ua.RGS)]}),(0,E.jsx)(g.$,{onClick:async s=>{s.preventDefault();const t=await e();n(t)},children:"Create"})]}),(0,E.jsx)(he.n,{onClick:()=>{i((0,la.A9)(ca.EL.INVITE))},style:{marginTop:ia.WG},children:"Open invitation modal"}),null!==s&&(0,E.jsx)(Xs.h,{value:JSON.stringify(s,null,2),readOnly:!0})]})}},{title:"Leave Current Session",Component:()=>{const{leaveSession:e,currentSession:s}=(0,da.D)(),[n,a]=(0,t.useState)(null);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:U.rowName,children:"Leave your current session"}),(0,E.jsxs)("div",{className:U.rowControl,children:[(0,E.jsx)(x.Z,{value:s?.sessionId??"",readOnly:!0}),(0,E.jsx)(g.$,{onClick:async n=>{if(n.preventDefault(),!s)return;const t=await e();a(t)},children:"Leave"})]}),null!==n&&(0,E.jsx)(Xs.h,{value:JSON.stringify(n,null,2),readOnly:!0})]})}},{title:"Delete Current Session",Component:()=>{const{currentSession:e,deleteSession:s}=(0,da.D)(),[n,a]=(0,t.useState)(null);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:U.rowName,children:"Delete your current session"}),(0,E.jsxs)("div",{className:U.rowControl,children:[(0,E.jsx)(x.Z,{value:e?.sessionId??"",readOnly:!0}),(0,E.jsx)(g.$,{onClick:async n=>{if(n.preventDefault(),!e)return;const t=await s();a(t)},children:"Delete"})]}),null!==n&&(0,E.jsx)(Xs.h,{value:JSON.stringify(n,null,2),readOnly:!0})]})}},{title:"Join Session as Guest",Component:()=>{const[e,s]=(0,t.useState)(""),n=(0,ra.wA)(),a=(0,Qn.Zp)();return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:U.rowName,children:"Join somebody else's session (paste join token or join URI)"}),(0,E.jsxs)("div",{className:U.rowControl,children:[(0,E.jsx)(x.Z,{value:e,onChange:e=>s(e.currentTarget.value)}),(0,E.jsx)(g.$,{onClick:async s=>{s.preventDefault();const t=(0,on.o_h)(e);t&&(0,on.crr)(t)?a(t.toURLPath(!0)):n((0,la.A9)(ca.EL.JOIN,e))},children:"Join"})]})]})}}],Ea=()=>{const[e,s]=(0,t.useState)(-1);return(0,E.jsxs)("div",{className:Yt,children:[(0,E.jsx)("h1",{children:"Social Connect!"}),(0,E.jsx)(sa.n,{children:ka.map(((n,t)=>(0,E.jsxs)(na.A,{children:[(0,E.jsx)(ta.J,{className:U.rowHeader,onClick:n=>{n.preventDefault(),s(t===e?-1:t)},isExpanded:t===e,children:n.title}),(0,E.jsx)(aa.u,{isExpanded:t===e,children:n.Component&&(0,E.jsx)(n.Component,{})})]},`${t}-item`)))})]})};var Ia=n(55257);const Aa="rqY5xQzTYB0T5O0XyDdn",Oa="jDgWpAIXmxJKgp8GtVWk",Ra=()=>{const{value:e,setValue:s,clearStoredKeyValue:n,clearSessionStorage:t}=(0,Ia.useSessionStorage)("eligibility"),{value:a,setValue:r,clearStoredKeyValue:i}=(0,Ia.useSessionStorage)("datetime");return(0,E.jsxs)("div",{className:Aa,children:[(0,E.jsx)("h1",{children:"Premium Page Debug"}),(0,E.jsxs)("div",{children:[(0,E.jsx)("p",{children:"Override Eligiiblity"}),(0,E.jsxs)("select",{className:Oa,value:e,onChange:e=>s(e.target.value),children:[(0,E.jsx)("option",{}),(0,E.jsx)("option",{value:"INTRO_ELIGIBLE",children:"INTRO_ELIGIBLE"}),(0,E.jsx)("option",{value:"NON_INTRO_ELIGIBLE",children:"NON_INTRO_ELIGIBLE"}),(0,E.jsx)("option",{value:"WINBACK",children:"WINBACK"})]}),(0,E.jsx)(g.$,{className:Aa,size:"small",onClick:()=>n("eligibility"),children:"Remove Eligiblity Override"})]}),(0,E.jsxs)("div",{children:[(0,E.jsx)("p",{children:"Override Date"}),(0,E.jsx)("input",{className:Oa,type:"datetime-local",value:a,onChange:e=>r(e.target.value)}),(0,E.jsx)(g.$,{size:"small",onClick:()=>i("datetime"),children:"Remove Date/Time Override"})]}),(0,E.jsx)(g.$,{size:"small",onClick:t,children:"Remove All Overrides"})]})};var Pa=n(86565);n(50684);const Ta=new Pa.l("lookupDebug","query","06b6d7798e1149749a96c5399fbacd911f8cca5f6fb4edf4efc1c4d64de881b5",null);var Da=n(51667),_a=n(98175),Ma=n(48125),La=n(4490);const Ua="coy21BK2YBTFtmDx4TNO",Fa="qqllJKnB60UvRvOwb8a2";function Ba(e){return Boolean(e)}function Va(e){return(0,Da.yr)(e)}const Ha=()=>{const{request:e}=(0,t.useContext)(Ma.j),[s,n]=(0,hn.x)(_a.P,[]),[a,r]=(0,t.useState)(""),i=async()=>{if(!function(e){const s=(0,on.o_h)(e);return!(!s||(0,on.Z0m)(s)||s?.id===on.NQG.COLLECTION||!(!s||(0,on._Tv)(s)||(0,on.ecE)(s)||(0,on.gHQ)(s)||(0,on.APS)(s)||(0,on.U_m)(s)||(0,on.WB1)(s)||(0,on.nuB)(s)))}(a))return;const t=await(0,La.c)(e,Ta,{uris:[a]}),r=t?.data?.lookup.map(Va).filter(Ba)||[];n(r.concat(s))};return(0,E.jsxs)("div",{className:Ua,children:[(0,E.jsx)("h1",{children:"Home"}),(0,E.jsxs)("div",{children:[(0,E.jsx)("h2",{children:"Shortcuts override"}),(0,E.jsxs)(h.g,{label:"Entity URI to add",labelFor:"shortcut_to_add",children:[(0,E.jsx)(x.Z,{id:"shortcut_to_add",type:"text",placeholder:"spotify:episode:123123",value:a,onChange:e=>r(e.currentTarget.value)}),(0,E.jsxs)(en.N,{children:["Right now we only allow: Artist, Album, Audiobook, Podcast, Track, User, Playlist, Episode and Chapter.",(0,E.jsx)("br",{})," For more info check the HomeV2ShortcutsShelf logic."]})]}),(0,E.jsx)(g.$,{size:"small",className:Fa,disabled:0===a.length,onClick:()=>{i()},children:"Add to Shortcuts"}),(0,E.jsx)(g.$,{size:"small",className:Fa,onClick:()=>{n([])},children:"Clear all overrides"})]})]})};var Ja=n(67743);const za="WAiWdE4pBSCiS9bz5mI7",$a="WU9QRIfJrSPefs8V7QI0",Za="pb99Xy2ZbO0AVWK2BIvI",Ya="G_PJW1iqB1P56Y5QBCja",qa=[{label:"Production",value:"prod"},{label:"Development",value:"dev"}],Wa=()=>{const e=(0,ra.wA)(),s=(0,ra.d4)((e=>e.inAppMessaging.env)),n=(0,ra.d4)((e=>e.inAppMessaging.message)),[a,r]=(0,t.useState)(""),[i,l]=(0,t.useState)(""),[o,c]=(0,t.useState)(!1);(0,t.useEffect)((()=>{n&&o&&c(!1)}),[n,o]);const d=!n&&o;return(0,E.jsx)("div",{className:za,children:(0,E.jsxs)("div",{className:$a,children:[(0,E.jsx)("div",{children:(0,E.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingEnv",children:"Mode (endpoint):"})}),(0,E.jsx)(oa.C,{dir:"auto",value:s,id:"desktop.settings.inAppMessagingEnv",onSelect:function(s){"prod"!==s&&"dev"!==s||e((0,Ja.$h)(s))},children:qa.map((({label:e,value:s})=>(0,E.jsx)("option",{value:s,children:e},s)))}),(0,E.jsx)("div",{children:(0,E.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingCreativeId",children:"Creative Id:"})}),(0,E.jsx)("div",{children:(0,E.jsx)("input",{className:Za,placeholder:"(eg. 12123434)",id:"desktop.settings.inAppMessagingCreativeId",name:"Creative Id",type:"text",value:a,onChange:function(e){r(e.target.value),c(!1)}})}),(0,E.jsx)("div",{children:(0,E.jsx)("label",{htmlFor:"desktop.settings.inAppMessagingAppUri",children:"URI for Dynamic Content (optional):"})}),(0,E.jsx)("div",{children:(0,E.jsx)("input",{className:Za,placeholder:"(eg. spotify:artist:123)",id:"desktop.settings.inAppMessagingAppUri",name:"App Uri",type:"text",value:i,onChange:function(e){l(e.target.value),c(!1)}})}),(0,E.jsx)("div",{}),(0,E.jsx)("div",{}),(0,E.jsx)("div",{children:(0,E.jsx)(g.$,{colorSet:"invertedLight",onClick:function(s){s.preventDefault(),e((0,Ja.yR)(a,i)),c(!1),window.setTimeout((()=>{c(!0)}),1e3)},children:"Get Preview"})}),d&&(0,E.jsx)("div",{className:Ya,children:"No Messsage found"})]})})};var Ka=n(75990),Ga=n(3217),Qa=n(10058);const Xa="CWbF6pzynkRv3fi29lB1",er="HJW0XXBdaYKM50QJ957Z",sr="ELSpUVm2MXGkQ_0rlJaj",nr="BEbSBX8wHpFESTzhAAUs",tr="debugWindowActiveTabGroup",ar="debugWindowActiveTabIndex",rr=()=>{const e=(0,_n.p)().getCapabilities().canGetFiles,s=(0,Sa.M)(),n=(0,B.ZY)(),a=(0,t.useRef)(null);(0,t.useEffect)((()=>{n&&(n.title="Spotify Debug Window")}),[n]);const d=(0,t.useMemo)((()=>Object.fromEntries(Object.entries({Authorization:[{label:"Access Token",Panel:ie},{label:"Product State",Panel:at}],Playback:[{label:"Player",Panel:Gn},e?{label:"Playback",Panel:Wn}:null,{label:"Connect",Panel:ue},s?{label:"Social Connect",Panel:Ea}:null].filter(Qa.P),"Data Fetching":[{label:"Esperanto",Panel:Ys},{label:"PubSub",Panel:yt},null,{label:"Metadata Extensions",Panel:kn}].filter(Qa.P),UI:[{label:"Routing",Panel:Wt},null].filter(Qa.P),Content:[{label:"Audiobooks",Panel:te},{label:"Playlist",Panel:nt}],Other:[null,{label:"Settings",Panel:ea},{label:"Remote Config",Panel:Zt},{label:"Ads",Panel:I},{label:"In-App Messaging",Panel:Wa},{label:"Your DJ",Panel:Ga.fW},{label:"Home",Panel:Ha},{label:"Premium Page",Panel:Ra},{label:"Font Width Estimation",Panel:Gs}].filter(Qa.P)}).filter((([e,s])=>s.length>0)))),[e,s]),u=Object.keys(d),h=(0,_t.q)(),m=h.getItem(tr),p="string"==typeof m&&m in d?m:u[0],[x,g]=(0,t.useState)(p),j=h.getItem(ar),v="number"==typeof j&&j in d[x]?j:0,[f,y]=(0,t.useState)(v),b=d[x][f].className,N=d[x][f].Panel;return(0,E.jsx)(Ka.SnackbarProvider,{domRootRef:a,children:(0,E.jsx)("div",{className:r()("encore-dark-theme","encore-layout-themes"),children:(0,E.jsxs)("div",{className:Xa,children:[(0,E.jsx)(i.V,{className:er,children:(0,E.jsx)(l.r,{flexMobile:!0,children:u.map((e=>(0,E.jsxs)(t.Fragment,{children:[(0,E.jsx)(o.D,{children:e}),d[e].map(((s,n)=>(0,E.jsx)(c.a,{active:x===e&&f===n,label:s.label,onClick:()=>{g(e),h.setItem(tr,e),y(n),h.setItem(ar,n)},className:sr,children:s.label},s.label)))]},e)))})}),(0,E.jsx)("div",{className:r()(nr,b),ref:a,children:(0,E.jsx)(N,{})})]})})})}},29093:(e,s,n)=>{n.d(s,{y:()=>t.y});var t=n(16518)},50217:(e,s,n)=>{n.d(s,{C:()=>r});var t=n(95440),a=n(24902);const r=()=>{const e=(0,t.d4)((e=>e.session?.user));return e?{type:a.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:s,height:n})=>({url:e,width:s||void 0,height:n||void 0})))}:null}},59371:(e,s,n)=>{n.d(s,{d:()=>r});var t=n(30758),a=n(56527);const r=()=>(0,t.useContext)(a.D)},39255:(e,s,n)=>{n.d(s,{F:()=>r});var t=n(30758),a=n(90319);function r(e,s){const n=(0,t.useRef)(s),r=(0,a.p)();n.current=s,(0,t.useEffect)((()=>r.getEvents().addListener(e,(e=>{n.current(e)}))),[e,r])}},23571:(e,s,n)=>{n.d(s,{x:()=>r});var t=n(46278),a=n(25214);function r(){return(0,a.N)(t.b)}},7917:(e,s,n)=>{n.d(s,{c:()=>l});var t=n(30758),a=n(69191),r=n(76766),i=n(14903);function l(e,s){const n=(0,r.d)(),l=(0,i.A)(s),o=(0,a.a)();(0,t.useEffect)((()=>n.getBroadcastingEvents().addListener(e,(e=>{o()&&l(e)}))),[n,l,e,o])}},32620:(e,s,n)=>{n.d(s,{h:()=>t});n(96403),n(41214);function t(e){return"object"!=typeof e||null===e?e:window.structuredClone?window.structuredClone(e):JSON.parse(JSON.stringify(e))}}}]);
//# sourceMappingURL=xpui-debug-window-contents.js.map